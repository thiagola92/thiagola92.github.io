<!doctype html>
<html lang="pt-br" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">3 postagens marcadas com &quot;python&quot; | thiagola92</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://thiagola92.github.io/img/social_card.png"><meta data-rh="true" name="twitter:image" content="https://thiagola92.github.io/img/social_card.png"><meta data-rh="true" property="og:url" content="https://thiagola92.github.io/pt-br/blog/tags/python"><meta data-rh="true" property="og:locale" content="pt_br"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="pt-br"><meta data-rh="true" name="docsearch:language" content="pt-br"><meta data-rh="true" property="og:title" content="3 postagens marcadas com &quot;python&quot; | thiagola92"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/pt-br/img/logo.svg"><link data-rh="true" rel="canonical" href="https://thiagola92.github.io/pt-br/blog/tags/python"><link data-rh="true" rel="alternate" href="https://thiagola92.github.io/blog/tags/python" hreflang="en"><link data-rh="true" rel="alternate" href="https://thiagola92.github.io/pt-br/blog/tags/python" hreflang="pt-br"><link data-rh="true" rel="alternate" href="https://thiagola92.github.io/blog/tags/python" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/pt-br/blog/rss.xml" title="thiagola92 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/pt-br/blog/atom.xml" title="thiagola92 Atom Feed">




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/pt-br/assets/css/styles.4ed44873.css">
<script src="/pt-br/assets/js/runtime~main.f6e2eada.js" defer="defer"></script>
<script src="/pt-br/assets/js/main.a21fb973.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Pular para o conteúdo principal"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Pular para o conteúdo principal</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/pt-br/"><div class="navbar__logo"><img src="/pt-br/img/logo.svg" alt="Website Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/pt-br/img/logo.svg" alt="Website Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">ThiagoLA92</b></a><a class="navbar__item navbar__link" href="/pt-br/">About</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pt-br/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/thiagola92" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2024/05/25/auth-username-password">Authentication - username &amp; password</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2024/05/11/auth-email-password">Authentication - email &amp; password</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2024/04/20/tty-terminal-shell-cli-tui-gui">TTY, Terminal, Shell, CLI, TUI, GUI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2024/04/01/c-cpp-lib-win">C/C++ Libs (Win)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2024/03/29/ik-fabr">Inverse Kinematics: FABR</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2024/03/26/ik-ccd">Inverse Kinematics: CCD</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2024/03/25/ik-two-bone">Inverse Kinematics: Two Bone</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2024/02/28/c-lib-package">C lib package</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2024/02/12/c-cpp-lib">C/C++ Libs</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2024/02/04/ik-look-at">Inverse Kinematics: Look At</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2023/12/31/union-enum">Unions e Enums</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2023/12/18/fk">Forward Kinematics</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2023/11/27/little-and-big-endians">Little-endian and Big-endian</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2023/11/27/most-and-least-significant-bit">Least vs Most significant bit</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2023/11/09/load-image-simple">Loading an image is simple</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2023/10/09/mondot">Mondot</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2023/09/22/mongodb-gui">MongoDB GUI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2023/09/21/wang-tiles-2">Wang Tiles pt. 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2023/09/19/wang-tiles">Wang Tiles pt. 1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2023/09/16/tumblr">Tumblr</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2023/05/12/sieve">Sieve</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2023/04/18/svg">SVG</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/godot-refcounted">GDScript RefCounted</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2023/02/16/gdscript-array">GDScript Array</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/pt-br/blog/2023/02/08/git-book">Git Book</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><header class="margin-bottom--xl"><h1>3 postagens marcadas com &quot;python&quot;</h1><a href="/pt-br/blog/tags">Ver todas os Marcadores</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="Eu não estava feliz que o post era muito &quot;aqui o código de X/Y/Z&quot;, pois gerava paredão de texto. E quando escrevo estes posts, a intenção é reforçar conhecimento para no futuro eu conseguir voltar e relembrar do assunto (e não do código em específico)."><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/pt-br/blog/2024/05/25/auth-username-password">Authentication - username &amp; password</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-05-25T00:00:00.000Z" itemprop="datePublished">25 de maio de 2024</time></div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/thiagola92" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="/img/dino.svg" alt="Thiago Lages de Alencar" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/thiagola92" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Thiago Lages de Alencar</span></a></div><small class="avatar__subtitle" itemprop="description">Desenvolvedor de Software</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Eu não estava feliz que o post era muito &quot;aqui o código de X/Y/Z&quot;, pois gerava paredão de texto. E quando escrevo estes posts, a intenção é reforçar conhecimento para no futuro eu conseguir voltar e relembrar do assunto (e não do código em específico).</p><p>O repositório com exemplos continua vivo em:<br>
<a href="https://github.com/thiagola92/learning-authentication" target="_blank" rel="noopener noreferrer">https://github.com/thiagola92/learning-authentication</a></p></div></div>
<p>Username com password é uma das maneiras mais velhas de se criar autenticação no seu sistema.</p>
<p><img loading="lazy" alt="UI para login" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iNDAwIgogICBoZWlnaHQ9IjQwMCIKICAgdmlld0JveD0iMCAwIDQwMCA0MDAiCiAgIHZlcnNpb249IjEuMSIKICAgaWQ9InN2ZzEiCiAgIGlua3NjYXBlOnZlcnNpb249IjEuMy4yICgxOjEuMy4yKzIwMjMxMTI1MjE1MCswOTFlMjBlZjBmKSIKICAgc29kaXBvZGk6ZG9jbmFtZT0idXNlcm5hbWVfcGFzc3dvcmQuc3ZnIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0ibmFtZWR2aWV3MSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiMwMDAwMDAiCiAgICAgYm9yZGVyb3BhY2l0eT0iMC4yNSIKICAgICBpbmtzY2FwZTpzaG93cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VjaGVja2VyYm9hcmQ9InRydWUiCiAgICAgaW5rc2NhcGU6ZGVza2NvbG9yPSIjZDFkMWQxIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBzaG93Z3JpZD0idHJ1ZSIKICAgICBpbmtzY2FwZTp6b29tPSIxLjQyIgogICAgIGlua3NjYXBlOmN4PSI4MC4yODE2OSIKICAgICBpbmtzY2FwZTpjeT0iMjE3Ljk1Nzc1IgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTkyMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSIxMDExIgogICAgIGlua3NjYXBlOndpbmRvdy14PSIxOTIwIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIzMiIKICAgICBpbmtzY2FwZTp3aW5kb3ctbWF4aW1pemVkPSIxIgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImxheWVyMSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9ImdyaWQxIgogICAgICAgdW5pdHM9InB4IgogICAgICAgb3JpZ2lueD0iMCIKICAgICAgIG9yaWdpbnk9IjAiCiAgICAgICBzcGFjaW5neD0iMC4yNjQ1ODMzMyIKICAgICAgIHNwYWNpbmd5PSIwLjI2NDU4MzMzIgogICAgICAgZW1wY29sb3I9IiMwMDk5ZTUiCiAgICAgICBlbXBvcGFjaXR5PSIwLjMwMTk2MDc4IgogICAgICAgY29sb3I9IiMwMDk5ZTUiCiAgICAgICBvcGFjaXR5PSIwLjE0OTAxOTYxIgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIGRvdHRlZD0iZmFsc2UiCiAgICAgICBncmlkYW5nbGV4PSIzMCIKICAgICAgIGdyaWRhbmdsZXo9IjMwIgogICAgICAgdmlzaWJsZT0idHJ1ZSIgLz4KICA8L3NvZGlwb2RpOm5hbWVkdmlldz4KICA8ZGVmcwogICAgIGlkPSJkZWZzMSIgLz4KICA8ZwogICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgIGlua3NjYXBlOmdyb3VwbW9kZT0ibGF5ZXIiCiAgICAgaWQ9ImxheWVyMSI+CiAgICA8cGF0aAogICAgICAgaWQ9InJlY3QxIgogICAgICAgc3R5bGU9ImZpbGw6IzMzYzI1NTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjE7cGFpbnQtb3JkZXI6ZmlsbCBtYXJrZXJzIHN0cm9rZSIKICAgICAgIGQ9Ik0gMTMyLjI5MTAyIDIyMi4yNSBDIDEyNi40Mjc4NiAyMjIuMjUgMTIxLjcwODk4IDIyNi45NzA4MiAxMjEuNzA4OTggMjMyLjgzMzk4IEwgMTIxLjcwODk4IDI1OS4yOTEwMiBDIDEyMS43MDg5OCAyNjUuMTU0MTggMTI2LjQyNzg2IDI2OS44NzUgMTMyLjI5MTAyIDI2OS44NzUgTCAyNjQuNTgzOTggMjY5Ljg3NSBDIDI3MC40NDcxNCAyNjkuODc1IDI3NS4xNjYwMiAyNjUuMTU0MTggMjc1LjE2NjAyIDI1OS4yOTEwMiBMIDI3NS4xNjYwMiAyMzIuODMzOTggQyAyNzUuMTY2MDIgMjI2Ljk3MDgyIDI3MC40NDcxNCAyMjIuMjUgMjY0LjU4Mzk4IDIyMi4yNSBMIDEzMi4yOTEwMiAyMjIuMjUgeiBNIDE1Ny41MTk1MyAyMzMuMjczNDQgTCAxNjQuODQ3NjYgMjMzLjI3MzQ0IEwgMTY0Ljg0NzY2IDI1MS41NDQ5MiBDIDE2NC44NDc2NiAyNTIuNzM5NTkgMTY0Ljk0NDcyIDI1My42Njg3NSAxNjUuMTM2NzIgMjU0LjMzMDA4IEMgMTY1LjM1MDA1IDI1NC45NzAwOCAxNjUuNjU5MTIgMjU1LjQxNzgzIDE2Ni4wNjQ0NSAyNTUuNjczODMgQyAxNjYuNDY5NzkgMjU1LjkwODQ5IDE2Ni45OTI4MSAyNTYuMDI1MzkgMTY3LjYzMjgxIDI1Ni4wMjUzOSBDIDE2OC4yOTQxNSAyNTYuMDI1MzkgMTY4LjkxMjI4IDI1NS45NTAxMSAxNjkuNDg4MjggMjU1LjgwMDc4IEMgMTcwLjA4NTYxIDI1NS42NTE0NSAxNzAuNTg2ODUgMjU1LjQ3MTE1IDE3MC45OTIxOSAyNTUuMjU3ODEgTCAxNzEuMzQzNzUgMjU3LjQzMzU5IEMgMTcxLjA0NTA4IDI1Ny42MDQyNiAxNzAuNTMzOTMgMjU3Ljc5NjQzIDE2OS44MDg1OSAyNTguMDA5NzcgQyAxNjkuMDgzMjYgMjU4LjIyMzEgMTY4LjM1ODE1IDI1OC4zMzAwOCAxNjcuNjMyODEgMjU4LjMzMDA4IEMgMTY2LjIyNDgxIDI1OC4zMzAwOCAxNjUuMTQ3MDYgMjU4LjA4NDQyIDE2NC40MDAzOSAyNTcuNTkzNzUgQyAxNjMuNjUzNzIgMjU3LjA4MTc1IDE2My4xMzA3IDI1Ni4zMzQ4NSAxNjIuODMyMDMgMjU1LjM1MzUyIEMgMTYyLjU1NDcgMjU0LjM3MjE4IDE2Mi40MTYwMiAyNTMuMTMzOTYgMTYyLjQxNjAyIDI1MS42NDA2MiBMIDE2Mi40MTYwMiAyMzUuNDQ5MjIgTCAxNTcuNTE5NTMgMjM1LjQ0OTIyIEwgMTU3LjUxOTUzIDIzMy4yNzM0NCB6IE0gMjE2LjY4NzUgMjM0LjEwNTQ3IEMgMjE3LjMwNjE3IDIzNC4xMDU0NyAyMTcuODE5MjggMjM0LjMwNzU2IDIxOC4yMjQ2MSAyMzQuNzEyODkgQyAyMTguNjI5OTQgMjM1LjExODIyIDIxOC44MzIwMyAyMzUuNjcyOTUgMjE4LjgzMjAzIDIzNi4zNzY5NSBDIDIxOC44MzIwMyAyMzcuMDU5NjIgMjE4LjYyOTk0IDIzNy42MTQzNSAyMTguMjI0NjEgMjM4LjA0MTAyIEMgMjE3LjgxOTI4IDIzOC40NDYzNSAyMTcuMzA2MTcgMjM4LjY0ODQ0IDIxNi42ODc1IDIzOC42NDg0NCBDIDIxNi4wOTAxNyAyMzguNjQ4NDQgMjE1LjU3OTAxIDIzOC40NDYzNSAyMTUuMTUyMzQgMjM4LjA0MTAyIEMgMjE0LjcyNTY4IDIzNy42MTQzNSAyMTQuNTExNzIgMjM3LjA1OTYyIDIxNC41MTE3MiAyMzYuMzc2OTUgQyAyMTQuNTExNzIgMjM1LjY3Mjk1IDIxNC43MjU2OCAyMzUuMTE4MjIgMjE1LjE1MjM0IDIzNC43MTI4OSBDIDIxNS41NzkwMSAyMzQuMzA3NTYgMjE2LjA5MDE3IDIzNC4xMDU0NyAyMTYuNjg3NSAyMzQuMTA1NDcgeiBNIDE4Mi4yMjQ2MSAyNDAuOTg0MzggQyAxODMuNjc1MjcgMjQwLjk4NDM4IDE4NC45NTUxMiAyNDEuMzQ2OTMgMTg2LjA2NDQ1IDI0Mi4wNzIyNyBDIDE4Ny4xOTUxMiAyNDIuNzk3NiAxODguMDgwNyAyNDMuODExOTUgMTg4LjcyMDcgMjQ1LjExMzI4IEMgMTg5LjM2MDcgMjQ2LjM5MzI4IDE4OS42Nzk2OSAyNDcuOTA2OTIgMTg5LjY3OTY5IDI0OS42NTYyNSBDIDE4OS42Nzk2OSAyNTEuNDA1NTggMTg5LjM2MDcgMjUyLjkzMTA5IDE4OC43MjA3IDI1NC4yMzI0MiBDIDE4OC4wODA3IDI1NS41MTI0MiAxODcuMTk1MTIgMjU2LjUxNDkgMTg2LjA2NDQ1IDI1Ny4yNDAyMyBDIDE4NC45NTUxMiAyNTcuOTQ0MjMgMTgzLjY3NTI3IDI1OC4yOTY4OCAxODIuMjI0NjEgMjU4LjI5Njg4IEMgMTgwLjgxNjYxIDI1OC4yOTY4OCAxNzkuNTU2NiAyNTcuOTQ0MjMgMTc4LjQ0NzI3IDI1Ny4yNDAyMyBDIDE3Ny4zNTkyNyAyNTYuNTE0OSAxNzYuNDk1NDcgMjU1LjUxMjQyIDE3NS44NTU0NyAyNTQuMjMyNDIgQyAxNzUuMjE1NDcgMjUyLjkzMTA5IDE3NC44OTY0OCAyNTEuNDA1NTggMTc0Ljg5NjQ4IDI0OS42NTYyNSBDIDE3NC44OTY0OCAyNDcuOTA2OTIgMTc1LjIwNTU1IDI0Ni4zOTMyOCAxNzUuODI0MjIgMjQ1LjExMzI4IEMgMTc2LjQ2NDIyIDI0My44MTE5NSAxNzcuMzM3OTMgMjQyLjc5NzYgMTc4LjQ0NzI3IDI0Mi4wNzIyNyBDIDE3OS41NTY2IDI0MS4zNDY5MyAxODAuODE2NjEgMjQwLjk4NDM3IDE4Mi4yMjQ2MSAyNDAuOTg0MzggeiBNIDIwMC4yNDAyMyAyNDAuOTg0MzggQyAyMDEuNzc2MjMgMjQwLjk4NDM4IDIwMy4wNjYgMjQxLjA5MTM1IDIwNC4xMTEzMyAyNDEuMzA0NjkgQyAyMDUuMTU2NjYgMjQxLjUxODAyIDIwNS45NTcwNSAyNDEuNzEwMTkgMjA2LjUxMTcyIDI0MS44ODA4NiBMIDIwNi41MTE3MiAyNTYuODg4NjcgQyAyMDYuNTExNzIgMjU5LjQwNiAyMDUuODYxODggMjYxLjIwODg4IDIwNC41NjA1NSAyNjIuMjk2ODggQyAyMDMuMjgwNTUgMjYzLjQwNjIxIDIwMS4zNzA3IDI2My45NjA5NCAxOTguODMyMDMgMjYzLjk2MDk0IEMgMTk3Ljc4NjcgMjYzLjk2MDk0IDE5Ni44MjU4NCAyNjMuODc1NzQgMTk1Ljk1MTE3IDI2My43MDUwOCBDIDE5NS4wOTc4NCAyNjMuNTU1NzQgMTk0LjM4NDU5IDI2My4zNzU0NCAxOTMuODA4NTkgMjYzLjE2MjExIEwgMTk0LjIyNDYxIDI2MC45MjE4OCBDIDE5NC44NDMyOCAyNjEuMTc3ODcgMTk1LjU0NjYgMjYxLjM3OTk2IDE5Ni4zMzU5NCAyNjEuNTI5MyBDIDE5Ny4xNDY2IDI2MS42Nzg2MyAxOTguMDAwNDkgMjYxLjc1MzkxIDE5OC44OTY0OCAyNjEuNzUzOTEgQyAyMDAuMDY5ODIgMjYxLjc1MzkxIDIwMS4wMjg3MiAyNjEuNTkzNDQgMjAxLjc3NTM5IDI2MS4yNzM0NCBDIDIwMi41NDMzOSAyNjAuOTc0NzcgMjAzLjEwOTk5IDI2MC40NzM1MyAyMDMuNDcyNjYgMjU5Ljc2OTUzIEMgMjAzLjgzNTMyIDI1OS4wODY4NyAyMDQuMDE1NjIgMjU4LjE3OTQ5IDIwNC4wMTU2MiAyNTcuMDQ4ODMgTCAyMDQuMDE1NjIgMjU2LjUwNTg2IEMgMjAzLjc1OTYzIDI1Ni42NTUxOSAyMDMuMjQ4NDcgMjU2Ljg1NzI4IDIwMi40ODA0NyAyNTcuMTEzMjggQyAyMDEuNzMzOCAyNTcuMzY5MjggMjAwLjg1ODEzIDI1Ny40OTgwNSAxOTkuODU1NDcgMjU3LjQ5ODA1IEMgMTk4LjYxODE0IDI1Ny40OTgwNSAxOTcuNDU1MTkgMjU3LjIyMDY4IDE5Ni4zNjcxOSAyNTYuNjY2MDIgQyAxOTUuMjc5MTkgMjU2LjA5MDAyIDE5NC40MDU0NyAyNTUuMjA0NDMgMTkzLjc0NDE0IDI1NC4wMDk3NyBDIDE5My4wODI4MSAyNTIuNzkzNzcgMTkyLjc1MTk1IDI1MS4yNDY0NyAxOTIuNzUxOTUgMjQ5LjM2OTE0IEMgMTkyLjc1MTk1IDI0Ny44MzMxNCAxOTMuMDM5MjMgMjQ2LjQzNjQgMTkzLjYxNTIzIDI0NS4xNzc3MyBDIDE5NC4xOTEyMyAyNDMuODk3NzQgMTk1LjAzNTIgMjQyLjg4MzM4IDE5Ni4xNDQ1MyAyNDIuMTM2NzIgQyAxOTcuMjc1MiAyNDEuMzY4NzIgMTk4LjY0MDI0IDI0MC45ODQzOCAyMDAuMjQwMjMgMjQwLjk4NDM4IHogTSAyMzUuNzU5NzcgMjQxLjAxNzU4IEMgMjM3LjE0NjQzIDI0MS4wMTc1OCAyMzguMzQxMDggMjQxLjI1MTM3IDIzOS4zNDM3NSAyNDEuNzIwNyBDIDI0MC4zNDY0MiAyNDIuMTY4NyAyNDEuMTE1MSAyNDIuOTE1NjEgMjQxLjY0ODQ0IDI0My45NjA5NCBDIDI0Mi4yMDMxIDI0NC45ODQ5NCAyNDIuNDgwNDcgMjQ2LjM3MTc2IDI0Mi40ODA0NyAyNDguMTIxMDkgTCAyNDIuNDgwNDcgMjU3Ljk0NTMxIEwgMjM5Ljk4NDM4IDI1Ny45NDUzMSBMIDIzOS45ODQzOCAyNDguNjMyODEgQyAyMzkuOTg0MzggMjQ3LjA5NjgxIDIzOS43OTIyIDI0NS45NTU2NSAyMzkuNDA4MiAyNDUuMjA4OTggQyAyMzkuMDI0MiAyNDQuNDQwOTkgMjM4LjUwMTE4IDI0My45Mjk4MyAyMzcuODM5ODQgMjQzLjY3MzgzIEMgMjM3LjE5OTg0IDI0My40MTc4MyAyMzYuNDc0NzMgMjQzLjI4OTA2IDIzNS42NjQwNiAyNDMuMjg5MDYgQyAyMzUuMTMwNzMgMjQzLjI4OTA2IDIzNC41NjYwOCAyNDMuMzIwNzcgMjMzLjk2ODc1IDI0My4zODQ3NyBDIDIzMy4zNzE0MiAyNDMuNDQ4NzcgMjMyLjc5NDkgMjQzLjUzMzk2IDIzMi4yNDAyMyAyNDMuNjQwNjIgTCAyMzIuMjQwMjMgMjU3Ljk0NTMxIEwgMjI5Ljc0NDE0IDI1Ny45NDUzMSBMIDIyOS43NDQxNCAyNDEuODE2NDEgQyAyMzAuODc0ODEgMjQxLjUxNzc0IDIzMS45NjI0OCAyNDEuMzE1NjUgMjMzLjAwNzgxIDI0MS4yMDg5OCBDIDIzNC4wNTMxNCAyNDEuMDgwOTggMjM0Ljk3MDQzIDI0MS4wMTc1OCAyMzUuNzU5NzcgMjQxLjAxNzU4IHogTSAyMTEuMjc5MyAyNDEuMzY5MTQgTCAyMTguNjA3NDIgMjQxLjM2OTE0IEwgMjE4LjYwNzQyIDI1MS41NDQ5MiBDIDIxOC42MDc0MiAyNTIuNzYwOTIgMjE4LjcxNDQgMjUzLjcgMjE4LjkyNzczIDI1NC4zNjEzMyBDIDIxOS4xNjI0IDI1NS4wMDEzMyAyMTkuNDkzMjYgMjU1LjQzOTE2IDIxOS45MTk5MiAyNTUuNjczODMgQyAyMjAuMzY3OTIgMjU1LjkwODQ5IDIyMC44OTA5NSAyNTYuMDI1MzkgMjIxLjQ4ODI4IDI1Ni4wMjUzOSBDIDIyMi4yNTYyOCAyNTYuMDI1MzkgMjIyLjkyNzkxIDI1NS45MjgzMyAyMjMuNTAzOTEgMjU1LjczNjMzIEMgMjI0LjEwMTI0IDI1NS41NDQzMyAyMjQuNTE3MjkgMjU1LjM4NTgxIDIyNC43NTE5NSAyNTUuMjU3ODEgTCAyMjUuMTAzNTIgMjU3LjQzMzU5IEMgMjI1LjA2MDg1IDI1Ny40NzYyNiAyMjQuODU4NzYgMjU3LjU3MTM3IDIyNC40OTYwOSAyNTcuNzIwNyBDIDIyNC4xNTQ3NiAyNTcuODcwMDQgMjIzLjcwNzAxIDI1OC4wMDg3MiAyMjMuMTUyMzQgMjU4LjEzNjcyIEMgMjIyLjYxOTAxIDI1OC4yNjQ3MiAyMjIuMDMyNTggMjU4LjMzMDA4IDIyMS4zOTI1OCAyNTguMzMwMDggQyAyMjAuMDI3MjUgMjU4LjMzMDA4IDIxOC45NTk0MSAyNTguMDg0NDIgMjE4LjE5MTQxIDI1Ny41OTM3NSBDIDIxNy40NDQ3NCAyNTcuMTAzMDggMjE2LjkyMTcxIDI1Ni4zNzc5NyAyMTYuNjIzMDUgMjU1LjQxNzk3IEMgMjE2LjMyNDM4IDI1NC40MzY2NCAyMTYuMTc1NzggMjUzLjE5ODQxIDIxNi4xNzU3OCAyNTEuNzA1MDggTCAyMTYuMTc1NzggMjQzLjUxMzY3IEwgMjExLjI3OTMgMjQzLjUxMzY3IEwgMjExLjI3OTMgMjQxLjM2OTE0IHogTSAxODIuMjI0NjEgMjQzLjI1NzgxIEMgMTgwLjgxNjYxIDI0My4yNTc4MSAxNzkuNjc1NDUgMjQzLjgzMjM4IDE3OC44MDA3OCAyNDQuOTg0MzggQyAxNzcuOTI2MTIgMjQ2LjExNTA0IDE3Ny40ODgyOCAyNDcuNjcyMjUgMTc3LjQ4ODI4IDI0OS42NTYyNSBDIDE3Ny40ODgyOCAyNTEuNjQwMjUgMTc3LjkzNjAzIDI1My4xOTk0MSAxNzguODMyMDMgMjU0LjMzMDA4IEMgMTc5LjcyODAzIDI1NS40Mzk0MSAxODAuODY5MTkgMjU1Ljk5MjE5IDE4Mi4yNTU4NiAyNTUuOTkyMTkgQyAxODMuNzA2NTIgMjU1Ljk5MjE5IDE4NC44Njk0NyAyNTUuNDM5NDEgMTg1Ljc0NDE0IDI1NC4zMzAwOCBDIDE4Ni42NDAxNCAyNTMuMTk5NDEgMTg3LjA4Nzg5IDI1MS42NDAyNSAxODcuMDg3ODkgMjQ5LjY1NjI1IEMgMTg3LjA4Nzg5IDI0Ny42NzIyNSAxODYuNjQwMTQgMjQ2LjExNTA0IDE4NS43NDQxNCAyNDQuOTg0MzggQyAxODQuODQ4MTQgMjQzLjgzMjM4IDE4My42NzUyNyAyNDMuMjU3ODEgMTgyLjIyNDYxIDI0My4yNTc4MSB6IE0gMjAwLjMzNTk0IDI0My4zMjAzMSBDIDE5OC43NTcyNyAyNDMuMzIwMzEgMTk3LjUzMDkyIDI0My44ODY5MSAxOTYuNjU2MjUgMjQ1LjAxNzU4IEMgMTk1LjgwMjkyIDI0Ni4xNDgyNCAxOTUuMzc2OTUgMjQ3LjYwODM5IDE5NS4zNzY5NSAyNDkuNDAwMzkgQyAxOTUuMzc2OTUgMjUwLjc2NTcyIDE5NS42MDA4MyAyNTEuODc1MTggMTk2LjA0ODgzIDI1Mi43Mjg1MiBDIDE5Ni40OTY4MyAyNTMuNTgxODUgMTk3LjA2MTQ3IDI1NC4yMDE5NCAxOTcuNzQ0MTQgMjU0LjU4NTk0IEMgMTk4LjQ0ODE0IDI1NC45Njk5NCAxOTkuMTczMjYgMjU1LjE2MjExIDE5OS45MTk5MiAyNTUuMTYyMTEgQyAyMDAuNzMwNTkgMjU1LjE2MjExIDIwMS41MDkxOSAyNTUuMDQzMjYgMjAyLjI1NTg2IDI1NC44MDg1OSBDIDIwMy4wMDI1MyAyNTQuNTczOTMgMjAzLjU4ODk2IDI1NC4yOTY1NiAyMDQuMDE1NjIgMjUzLjk3NjU2IEwgMjA0LjAxNTYyIDI0My43Njk1MyBDIDIwMy43MzgyOSAyNDMuNjYyODYgMjAzLjMwMDQ2IDI0My41NjU4IDIwMi43MDMxMiAyNDMuNDgwNDcgQyAyMDIuMTI3MTMgMjQzLjM3MzggMjAxLjMzODYgMjQzLjMyMDMxIDIwMC4zMzU5NCAyNDMuMzIwMzEgeiAiIC8+CiAgICA8cmVjdAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzMzYzI1NTtzdHJva2Utd2lkdGg6NS42MDI0NTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjE7cGFpbnQtb3JkZXI6ZmlsbCBtYXJrZXJzIHN0cm9rZSIKICAgICAgIGlkPSJyZWN0MS0yIgogICAgICAgd2lkdGg9IjE5Mi42NjY1OCIKICAgICAgIGhlaWdodD0iNDcuNjI0OTk2IgogICAgICAgeD0iMTAzLjY2NjcyIgogICAgICAgeT0iMTY0LjA0MTY2IgogICAgICAgcng9IjE1Ljg3NTAwMSIKICAgICAgIHJ5PSIxNS44NzUwMDEiIC8+CiAgICA8cmVjdAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzMzYzI1NTtzdHJva2Utd2lkdGg6NS42MDI0NTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjE7cGFpbnQtb3JkZXI6ZmlsbCBtYXJrZXJzIHN0cm9rZSIKICAgICAgIGlkPSJyZWN0MS0yLTciCiAgICAgICB3aWR0aD0iMTkyLjY2NjU4IgogICAgICAgaGVpZ2h0PSI0Ny42MjQ5OTYiCiAgICAgICB4PSIxMDMuNjY2NzIiCiAgICAgICB5PSIxMDMuMzMzMzMiCiAgICAgICByeD0iMTMuMDgzMzMyIgogICAgICAgcnk9IjEzLjA4MzMzMiIgLz4KICAgIDx0ZXh0CiAgICAgICB4bWw6c3BhY2U9InByZXNlcnZlIgogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTozMnB4O2ZvbnQtZmFtaWx5OidVYnVudHUgTW9ubyc7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjonVWJ1bnR1IE1vbm8nO2ZpbGw6IzMzYzI1NTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6NTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjE7cGFpbnQtb3JkZXI6ZmlsbCBtYXJrZXJzIHN0cm9rZSIKICAgICAgIHg9IjEyOC4yODgwNiIKICAgICAgIHk9IjE5OS44ODc0NCIKICAgICAgIGlkPSJ0ZXh0MS02Ij48dHNwYW4KICAgICAgICAgc29kaXBvZGk6cm9sZT0ibGluZSIKICAgICAgICAgaWQ9InRzcGFuMS0wIgogICAgICAgICB4PSIxMjguMjg4MDYiCiAgICAgICAgIHk9IjE5OS44ODc0NCI+cGFzc3dvcmQ8L3RzcGFuPjwvdGV4dD4KICAgIDx0ZXh0CiAgICAgICB4bWw6c3BhY2U9InByZXNlcnZlIgogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTozMnB4O2ZvbnQtZmFtaWx5OidVYnVudHUgTW9ubyc7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjonVWJ1bnR1IE1vbm8nO2ZpbGw6IzMzYzI1NTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6NTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjE7cGFpbnQtb3JkZXI6ZmlsbCBtYXJrZXJzIHN0cm9rZSIKICAgICAgIHg9IjEyNy45MDQwNiIKICAgICAgIHk9IjEzOS4wMjg1IgogICAgICAgaWQ9InRleHQxLTYtMSI+PHRzcGFuCiAgICAgICAgIHNvZGlwb2RpOnJvbGU9ImxpbmUiCiAgICAgICAgIGlkPSJ0c3BhbjEtMC04IgogICAgICAgICB4PSIxMjcuOTA0MDYiCiAgICAgICAgIHk9IjEzOS4wMjg1Ij51c2VybmFtZTwvdHNwYW4+PC90ZXh0PgogIDwvZz4KPC9zdmc+Cg==" width="400" height="400" class="img_ev3q"></p>
<p>Nós confiaremos que aquele usuário é o dono da conta se ele souber a senha que está relacionada àquele username. Note que falei &quot;confiaremos&quot; pois nunca podemos ter 100% de certeza, só estamos tentando reduzir a possibilidade de ser alguém indesejado na conta.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="clint---register">Clint - register<a href="#clint---register" class="hash-link" aria-label="Link direto para Clint - register" title="Link direto para Clint - register">​</a></h2>
<p><img loading="lazy" alt="UI para registrar" src="/pt-br/assets/images/register-cd0b4ac565f1dd2f9857730939e2820e.svg" width="400" height="400" class="img_ev3q"></p>
<p>Para entender como o registro de novos usuários funciona, podemos olhar como formulários em HTML funcionam.</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">form</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">action</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">./register</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">form</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Formulários coletam todos os dados dos elementos <code>&lt;input&gt;</code> dentro deles e enviam para o endereço especificado no atributo <code>action</code>. Tenha em mente que enviar quer dizer &quot;mandar para aquele <strong>endpoint</strong> um request <strong>HTTP</strong>&quot;.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Caso você já tenha feito uma API REST em qualquer linguagem, você pode começar a notar detalhes familiares. Acontece que os navegadores não fazem nenhuma mágica, eles enviam o mesmo tipo de request que você está acostumado a lidar no backend de APIs REST.</p></div></div>
<p>Como eu estou escrevendo isto ao mesmo tempo que testo o código, eu vou trocar o endpoint para a minha API (<code>http://127.0.0.1:8000/register</code>).</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">form</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">action</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://127.0.0.1:8000/register</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">form</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Nós precisamos adicionar o input do tipo <code>submit</code> pois ele é utilizado para engatilhar o envio.</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">form</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">action</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://127.0.0.1:8000/register</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">submit</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">register</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">form</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Se você clicar no botão de registrar, você mandara um request GET para o endpoint <code>register</code>, com nenhuma informação pois não existe nenhum campo <code>input</code> que segure informação.</p>
<p>No nosso caso precisamos de um campo para o username e outro para o password:</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">form</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">action</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://127.0.0.1:8000/register</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">text</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">username</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">username</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">br</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">password</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">password</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">password</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">br</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">submit</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">register</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">form</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note que utilizamos os tipos <code>text</code> e <code>password</code> apenas para dar o comportamento correto no navegador. O importante mesmo é o atributo <code>name</code> pois ele define o nome a qual o valor vai estar relacionado quando enviado.</p>
<p>Se clicarmos no botão de registrar, enviaremos as informações na URL:<br>
<code>/register?username=username&amp;password=password</code></p>
<p>Por padrão o formulário envia um request GET, o que é ótimo se você quiser compartilhar URL com alguém ou salvar no favoritos.</p>
<p>Porém não é nada seguro quando estamos falando de informação sensível como a senha do usuário! Neste caso queremos enviar no corpo do request POST (onde não fica visível a qualquer pessoa olhando a tela do seu computador).</p>
<p>Podemos especificar o método utilizado no request atráves do atributo <code>method</code>:</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">form</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">action</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://127.0.0.1:8000/register</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">method</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">post</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">text</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">username</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">username</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">br</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">password</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">password</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">password</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">br</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">submit</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">register</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">form</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Agora ao clicar no botão de registrar, enviaremos as informações no corpo do request e a URL para qual você vai ser direcionado <strong>não</strong> vai conter seus dados (<code>/register</code>).</p>
<p>Corpo do request: <code>username=username&amp;password=password</code></p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Note que no final das contas é o mesmo formato porém em lugares diferentes.</p><p>Se você tiver uma API, conseguirá ver que ambos possuem o campo <code>content-type</code> da requisição com o valor <code>application/x-www-form-urlencoded</code>.</p></div></div>
<p>Tudo isto poderia ser reproduzido em python com:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> httpx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> urllib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">parse </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> urlencode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">body </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> urlencode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> username</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> password</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">headers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;Content-Type&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;application/x-www-form-urlencoded&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">httpx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://127.0.0.1:8000/register&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> headers</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">headers</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> content</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">body</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="server---register">Server - register<a href="#server---register" class="hash-link" aria-label="Link direto para Server - register" title="Link direto para Server - register">​</a></h2>
<p>Okay, seu server recebeu a requisição de cadastro do usuário. O que fazer agora? Validações!</p>
<p><img loading="lazy" alt="Robo lendo um papel" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iNDAwIgogICBoZWlnaHQ9IjQwMCIKICAgdmlld0JveD0iMCAwIDQwMCA0MDAiCiAgIHZlcnNpb249IjEuMSIKICAgaWQ9InN2ZzEiCiAgIGlua3NjYXBlOnZlcnNpb249IjEuMy4yICgxOjEuMy4yKzIwMjMxMTI1MjE1MCswOTFlMjBlZjBmKSIKICAgc29kaXBvZGk6ZG9jbmFtZT0ic2VydmVyX3JlYWRpbmcuc3ZnIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0ibmFtZWR2aWV3MSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiMwMDAwMDAiCiAgICAgYm9yZGVyb3BhY2l0eT0iMC4yNSIKICAgICBpbmtzY2FwZTpzaG93cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VjaGVja2VyYm9hcmQ9InRydWUiCiAgICAgaW5rc2NhcGU6ZGVza2NvbG9yPSIjZDFkMWQxIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBzaG93Z3JpZD0idHJ1ZSIKICAgICBpbmtzY2FwZTp6b29tPSIxLjQyIgogICAgIGlua3NjYXBlOmN4PSIxNzguMTY5MDEiCiAgICAgaW5rc2NhcGU6Y3k9IjIxNy45NTc3NSIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjE5MjAiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iMTAxMSIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMTkyMCIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMzIiCiAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMSIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJncmlkMSIKICAgICAgIHVuaXRzPSJweCIKICAgICAgIG9yaWdpbng9IjAiCiAgICAgICBvcmlnaW55PSIwIgogICAgICAgc3BhY2luZ3g9IjAuMjY0NTgzMzMiCiAgICAgICBzcGFjaW5neT0iMC4yNjQ1ODMzMyIKICAgICAgIGVtcGNvbG9yPSIjMDA5OWU1IgogICAgICAgZW1wb3BhY2l0eT0iMC4zMDE5NjA3OCIKICAgICAgIGNvbG9yPSIjMDA5OWU1IgogICAgICAgb3BhY2l0eT0iMC4xNDkwMTk2MSIKICAgICAgIGVtcHNwYWNpbmc9IjUiCiAgICAgICBkb3R0ZWQ9ImZhbHNlIgogICAgICAgZ3JpZGFuZ2xleD0iMzAiCiAgICAgICBncmlkYW5nbGV6PSIzMCIKICAgICAgIHZpc2libGU9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPGRlZnMKICAgICBpZD0iZGVmczEiIC8+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIGlkPSJyZWN0MiIKICAgICAgIHN0eWxlPSJmaWxsOiMzM2MyNTU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjU7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1vcGFjaXR5OjE7cGFpbnQtb3JkZXI6ZmlsbCBtYXJrZXJzIHN0cm9rZSIKICAgICAgIGQ9Ik0gMTYyLjIwNzAzIDIxLjE2NjAxNiBDIDEzNS44MjI2OCAyMS4xNjYwMTYgMTE0LjU4MjAzIDQyLjQwODYwMSAxMTQuNTgyMDMgNjguNzkyOTY5IEwgMTE0LjU4MjAzIDIxNi45NTg5OCBMIDI0Ni4zNDE4IDIxNi45NTg5OCBDIDI1MC4wOTc2MSAyMTYuOTU4OTggMjUzLjEyMTA5IDIxOS45ODI0NyAyNTMuMTIxMDkgMjIzLjczODI4IEwgMjUzLjEyMTA5IDI4Ny41ODM5OCBMIDMzMy4zNzUgMjg3LjU4Mzk4IEMgMzU5Ljc1OTM2IDI4Ny41ODM5OCAzODEgMjY2LjM0MzM3IDM4MSAyMzkuOTU4OTggTCAzODEgNjguNzkyOTY5IEMgMzgxIDQyLjQwODYwMSAzNTkuNzU5MzYgMjEuMTY2MDE2IDMzMy4zNzUgMjEuMTY2MDE2IEwgMTYyLjIwNzAzIDIxLjE2NjAxNiB6IE0gMTU4LjQ1ODk4IDc0LjE5MTQwNiBMIDIyMi4yNSA3NC4xOTE0MDYgTCAyMjIuMjUgMTM3LjU4Mzk4IEwgMTU4LjQ1ODk4IDEzNy41ODM5OCBMIDE1OC40NTg5OCA3NC4xOTE0MDYgeiBNIDI3NC44NzUgNzQuMTkxNDA2IEwgMzM4LjY2NjAyIDc0LjE5MTQwNiBMIDMzOC42NjYwMiAxMzcuNTgzOTggTCAyNzQuODc1IDEzNy41ODM5OCBMIDI3NC44NzUgNzQuMTkxNDA2IHogTSAxNzkuOTE2MDIgMTk1Ljc5MTAyIEwgMzEyLjIwODk4IDE5NS43OTEwMiBMIDMxMi4yMDg5OCAyMTAuMjE2OCBMIDE3OS45MTYwMiAyMTAuMjE2OCBMIDE3OS45MTYwMiAxOTUuNzkxMDIgeiAiIC8+CiAgICA8cmVjdAogICAgICAgc3R5bGU9ImZpbGw6IzMzYzI1NTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS4xOTE3NDtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW9wYWNpdHk6MTtwYWludC1vcmRlcjpmaWxsIG1hcmtlcnMgc3Ryb2tlIgogICAgICAgaWQ9InJlY3QyLTUiCiAgICAgICB3aWR0aD0iNjMuNDk5OTY5IgogICAgICAgaGVpZ2h0PSI2My40OTk5NjkiCiAgICAgICB4PSIyMjIuMjUwMDIiCiAgICAgICB5PSIzMTcuNSIKICAgICAgIHJ4PSIxMS4zNTEzNzgiCiAgICAgICByeT0iMTEuMzUxMzc4IiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiMzM2MyNTU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuMTkxNzQ7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1vcGFjaXR5OjE7cGFpbnQtb3JkZXI6ZmlsbCBtYXJrZXJzIHN0cm9rZSIKICAgICAgIGlkPSJyZWN0Mi01LTIiCiAgICAgICB3aWR0aD0iNjMuNDk5OTY5IgogICAgICAgaGVpZ2h0PSI2My40OTk5NjkiCiAgICAgICB4PSI1Mi45MTY2NjQiCiAgICAgICB5PSIzMTcuNSIKICAgICAgIHJ4PSIxMS4zNTEzNzgiCiAgICAgICByeT0iMTEuMzUxMzc4IiAvPgogICAgPHBhdGgKICAgICAgIGlkPSJyZWN0MyIKICAgICAgIHN0eWxlPSJmaWxsOiMzM2MyNTU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjMuMTEzNztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW9wYWNpdHk6MTtwYWludC1vcmRlcjpmaWxsIG1hcmtlcnMgc3Ryb2tlIgogICAgICAgZD0iTSA5MC4yNTM5MDYgMjIyLjI1IEwgOTAuMjUzOTA2IDMxMi4yMDg5OCBMIDEwOC40NjQ4NCAzMTIuMjA4OTggQyAxMTUuODAxNjEgMzEyLjIwODk4IDEyMS43MDg5OCAzMTguMTE0NCAxMjEuNzA4OTggMzI1LjQ1MTE3IEwgMTIxLjcwODk4IDM3My4wNDg4MyBDIDEyMS43MDg5OCAzODAuMzg1NiAxMTUuODAxNjEgMzg2LjI5MTAyIDEwOC40NjQ4NCAzODYuMjkxMDIgTCA5MC4yNTM5MDYgMzg2LjI5MTAyIEwgOTAuMjUzOTA2IDQwMCBMIDI0OC40MTQwNiA0MDAgTCAyNDguNDE0MDYgMzg2LjI5MTAyIEwgMjMwLjIwMTE3IDM4Ni4yOTEwMiBDIDIyMi44NjQ0MSAzODYuMjkxMDIgMjE2Ljk1ODk4IDM4MC4zODU1OSAyMTYuOTU4OTggMzczLjA0ODgzIEwgMjE2Ljk1ODk4IDMyNS40NTExNyBDIDIxNi45NTg5OCAzMTguMTE0NDEgMjIyLjg2NDQxIDMxMi4yMDg5OCAyMzAuMjAxMTcgMzEyLjIwODk4IEwgMjQ4LjQxNDA2IDMxMi4yMDg5OCBMIDI0OC40MTQwNiAyMjIuMjUgTCA5MC4yNTM5MDYgMjIyLjI1IHogIiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiMzM2MyNTU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjIuMTUyNDtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjE7cGFpbnQtb3JkZXI6ZmlsbCBtYXJrZXJzIHN0cm9rZSIKICAgICAgIGlkPSJyZWN0NC0zLTItNyIKICAgICAgIHdpZHRoPSIyMi4zNjU0ODgiCiAgICAgICBoZWlnaHQ9IjIyLjIyNTM3NiIKICAgICAgIHg9IjE2MS4zOTU4MyIKICAgICAgIHk9IjExMi43MTIxMiIgLz4KICAgIDxyZWN0CiAgICAgICBzdHlsZT0iZmlsbDojMzNjMjU1O2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoyLjE1MjQ7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxO3BhaW50LW9yZGVyOmZpbGwgbWFya2VycyBzdHJva2UiCiAgICAgICBpZD0icmVjdDQtMy0yLTctMiIKICAgICAgIHdpZHRoPSIyMi4zNjU0ODgiCiAgICAgICBoZWlnaHQ9IjIyLjIyNTM3NiIKICAgICAgIHg9IjI3Ni42MTM2OCIKICAgICAgIHk9IjExMi43MTIxMiIgLz4KICA8L2c+Cjwvc3ZnPgo=" width="400" height="400" class="img_ev3q"></p>
<p>O conteúdo da requisição está no formato esperado?</p>
<p>Podemos verificar se o campo <code>content-type</code> está com <code>application/x-www-form-urlencoded</code>.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">headers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Content-Type&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;application/x-www-form-urlencoded&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">raise</span><span class="token plain"> Exception</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Invalid body format&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Claro que isso não impede o usuário de formatar o conteúdo incorretamente, porém agora podemos assumir que ele errou o formato e enviarmos uma mensagem de erro coerente com o problema.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">body</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> body</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fields </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> parse_qs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">body</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> ValueError</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">raise</span><span class="token plain"> Exception</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Body incorrectly formatted&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>E se o usuário esquecer um dos campos? Sim, precisamos validar isto também.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> fields </span><span class="token keyword" style="color:#00009f">or</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> fields</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> Exception</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Missing username or password&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>E se o usuário tiver caracters inválido?<br>
<!-- -->E se a senha tiver caracters inválido?<br>
<!-- -->E se o usuário já existir no banco?<br>
<!-- -->...</p>
<p>Acho que você já entendeu que validação é importante.<br>
<!-- -->Agora vamos falar de storage!</p>
<p><img loading="lazy" alt="Database" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iNDAwIgogICBoZWlnaHQ9IjQwMCIKICAgdmlld0JveD0iMCAwIDQwMCA0MDAiCiAgIHZlcnNpb249IjEuMSIKICAgaWQ9InN2ZzEiCiAgIGlua3NjYXBlOnZlcnNpb249IjEuMy4yICgxOjEuMy4yKzIwMjMxMTI1MjE1MCswOTFlMjBlZjBmKSIKICAgc29kaXBvZGk6ZG9jbmFtZT0iZGF0YWJhc2Uuc3ZnIgogICB4bWw6c3BhY2U9InByZXNlcnZlIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0ibmFtZWR2aWV3MSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiMwMDAwMDAiCiAgICAgYm9yZGVyb3BhY2l0eT0iMC4yNSIKICAgICBpbmtzY2FwZTpzaG93cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VjaGVja2VyYm9hcmQ9InRydWUiCiAgICAgaW5rc2NhcGU6ZGVza2NvbG9yPSIjZDFkMWQxIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBzaG93Z3JpZD0idHJ1ZSIKICAgICBpbmtzY2FwZTp6b29tPSIxLjQyIgogICAgIGlua3NjYXBlOmN4PSIxMzMuODAyODIiCiAgICAgaW5rc2NhcGU6Y3k9IjIyMC4wNzA0MiIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjE5MjAiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iMTAxMSIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMTkyMCIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMzIiCiAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMSIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiPjxpbmtzY2FwZTpncmlkCiAgICAgICBpZD0iZ3JpZDEiCiAgICAgICB1bml0cz0icHgiCiAgICAgICBvcmlnaW54PSIwIgogICAgICAgb3JpZ2lueT0iMCIKICAgICAgIHNwYWNpbmd4PSIwLjI2NDU4MzMzIgogICAgICAgc3BhY2luZ3k9IjAuMjY0NTgzMzMiCiAgICAgICBlbXBjb2xvcj0iIzAwOTllNSIKICAgICAgIGVtcG9wYWNpdHk9IjAuMzAxOTYwNzgiCiAgICAgICBjb2xvcj0iIzAwOTllNSIKICAgICAgIG9wYWNpdHk9IjAuMTQ5MDE5NjEiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgZG90dGVkPSJmYWxzZSIKICAgICAgIGdyaWRhbmdsZXg9IjMwIgogICAgICAgZ3JpZGFuZ2xlej0iMzAiCiAgICAgICB2aXNpYmxlPSJ0cnVlIiAvPjwvc29kaXBvZGk6bmFtZWR2aWV3PjxkZWZzCiAgICAgaWQ9ImRlZnMxIiAvPjxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj48cGF0aAogICAgICAgaWQ9InBhdGg1LTkiCiAgICAgICBzdHlsZT0iZmlsbDojMzNjMjU1O2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utb3BhY2l0eToxO3BhaW50LW9yZGVyOm5vcm1hbCIKICAgICAgIGQ9Ik0gMTE2LjQwMDM5LDMzMC45MDM4MSBBIDg1LjM3NTI5LDQyLjU5NzE5NSAwIDAgMCAxMTQuNjI1LDMzOS4wODc0IDg1LjM3NTI5LDQyLjU5NzE5NSAwIDAgMCAyMDAsMzgxLjY4NTA2IDg1LjM3NTI5LDQyLjU5NzE5NSAwIDAgMCAyODUuMzc1LDMzOS4wODc0IDg1LjM3NTI5LDQyLjU5NzE5NSAwIDAgMCAyODMuNzYzNjcsMzMwLjkwMzgxIFoiIC8+PHBhdGgKICAgICAgIGlkPSJyZWN0NSIKICAgICAgIHN0eWxlPSJmaWxsOiMzM2MyNTU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjMuOTMxMDE7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1vcGFjaXR5OjE7cGFpbnQtb3JkZXI6ZmlsbCBtYXJrZXJzIHN0cm9rZSIKICAgICAgIGQ9Im0gMTE0LjYyNSwxOTUuMDE5MDQgdiA0Ni44MTgzNiBjIDEuMjk5NTEsMS40NjAyNiAyLjcyMDY1LDIuOTAyMDIgNC4zNDM3NSw0LjMwNDY5IDcuODg5OTIsNi44MTgzOSAxOS41MjIyNiwxMi43NjIxOSAzNC4wMjM0NCwxNi45Mzk0NSAyOS4wMDIzNCw4LjM1NDUyIDY1LjAxMzI4LDguMzU0NTIgOTQuMDE1NjIsMCAxNC41MDExOCwtNC4xNzcyNiAyNi4xMzM1MiwtMTAuMTIxMDYgMzQuMDIzNDQsLTE2LjkzOTQ1IDEuNjIzMSwtMS40MDI2NyAzLjA0NDI0LC0yLjg0NDQzIDQuMzQzNzUsLTQuMzA0NjkgViAxOTUuMDE5MDQgQSA5NS4yNTEzODEsNDcuNTI0NzggMCAwIDEgMjAwLDIyMS43MDA2OCA5NS4yNTEzODEsNDcuNTI0NzggMCAwIDEgMTE0LjYyNSwxOTUuMDE5MDQgWiBtIDAsNTMuMTY3OTcgdiA1MC43MTY4IGMgMS4yOTkzNiwxLjQ2MDAyIDIuNzIwOSwyLjkwMDI4IDQuMzQzNzUsNC4zMDI3MyA3Ljg4OTkzLDYuODE4NCAxOS41MjIyNSwxMi43NjIyIDM0LjAyMzQ0LDE2LjkzOTQ1IDI5LjAwMjM3LDguMzU0NTQgNjUuMDEzMjUsOC4zNTQ1NCA5NC4wMTU2MiwwIDE0LjUwMTE5LC00LjE3NzI1IDI2LjEzMzUxLC0xMC4xMjEwNSAzNC4wMjM0NCwtMTYuOTM5NDUgMS42MjI4NSwtMS40MDI0NSAzLjA0NDM5LC0yLjg0MjcxIDQuMzQzNzUsLTQuMzAyNzMgdiAtNTAuNzE2OCBjIC0wLjQ3NzIyLDAuNDQzMjkgLTAuOTIzNjMsMC44OTgwNyAtMS40MjU3OCwxLjMzMjAzIC04LjU1NTE1LDcuMzkzMjggLTIwLjczNTQ1LDEzLjUzOTM3IC0zNS43MDUwOCwxNy44NTE1NiAtMjkuOTM5MjQsOC42MjQzOSAtNjYuNTQ5MDQsOC42MjQ0IC05Ni40ODgyOCwwIC0xNC45Njk2MywtNC4zMTIxOSAtMjcuMTQ5OTMsLTEwLjQ1ODI4IC0zNS43MDUwOCwtMTcuODUxNTYgLTAuNTAyMTUsLTAuNDMzOTYgLTAuOTQ4NTYsLTAuODg4NzQgLTEuNDI1NzgsLTEuMzMyMDMgeiBtIDAsNTcuMDY0NDUgdiAzMy44MzU5NCBoIDE3MC43NSB2IC0zMy44MzU5NCBjIC0wLjQ3NzIyLDAuNDQzMjkgLTAuOTIzNjMsMC44OTgwOCAtMS40MjU3OCwxLjMzMjAzIC04LjU1NTE2LDcuMzkzMyAtMjAuNzM1NDQsMTMuNTM5MzYgLTM1LjcwNTA4LDE3Ljg1MTU3IC0yOS45MzkyNyw4LjYyNDQgLTY2LjU0OTAxLDguNjI0NDEgLTk2LjQ4ODI4LDAgLTE0Ljk2OTY0LC00LjMxMjIxIC0yNy4xNDk5MiwtMTAuNDU4MjcgLTM1LjcwNTA4LC0xNy44NTE1NyAtMC41MDIxNSwtMC40MzM5NSAtMC45NDg1NiwtMC44ODg3NCAtMS40MjU3OCwtMS4zMzIwMyB6IiAvPjxlbGxpcHNlCiAgICAgICBzdHlsZT0iZmlsbDojMzNjMjU1O2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utb3BhY2l0eToxO3BhaW50LW9yZGVyOm5vcm1hbCIKICAgICAgIGlkPSJwYXRoNSIKICAgICAgIGN4PSIyMDAiCiAgICAgICBjeT0iMTc0LjE3NjE5IgogICAgICAgcng9Ijg1LjM3NTI5IgogICAgICAgcnk9IjQyLjU5NzE5NSIgLz48dGV4dAogICAgICAgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIKICAgICAgIHN0eWxlPSJmb250LXNpemU6MzJweDtmb250LWZhbWlseTonVWJ1bnR1IE1vbm8nOy1pbmtzY2FwZS1mb250LXNwZWNpZmljYXRpb246J1VidW50dSBNb25vJztmaWxsOiMzM2MyNTU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjQ7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kIgogICAgICAgeD0iNDIuNTI4NzciCiAgICAgICB5PSI3NC4wODMzMjgiCiAgICAgICBpZD0idGV4dDEiPjx0c3BhbgogICAgICAgICBzb2RpcG9kaTpyb2xlPSJsaW5lIgogICAgICAgICBpZD0idHNwYW4xIgogICAgICAgICB4PSI0Mi41Mjg3NyIKICAgICAgICAgeT0iNzQuMDgzMzI4Ij51c2VybmFtZTwvdHNwYW4+PC90ZXh0Pjx0ZXh0CiAgICAgICB4bWw6c3BhY2U9InByZXNlcnZlIgogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTozMnB4O2ZvbnQtZmFtaWx5OidVYnVudHUgTW9ubyc7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjonVWJ1bnR1IE1vbm8nO2ZpbGw6IzMzYzI1NTtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6NDtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiCiAgICAgICB4PSIyMjIuNjcxMzQiCiAgICAgICB5PSI4MS40NzUzMjciCiAgICAgICBpZD0idGV4dDEtNSI+PHRzcGFuCiAgICAgICAgIHNvZGlwb2RpOnJvbGU9ImxpbmUiCiAgICAgICAgIGlkPSJ0c3BhbjEtMyIKICAgICAgICAgeD0iMjIyLjY3MTM0IgogICAgICAgICB5PSI4MS40NzUzMjciPioqKioqKio8L3RzcGFuPjwvdGV4dD48L2c+PC9zdmc+Cg==" width="400" height="400" class="img_ev3q"></p>
<p>Como se armazena o username?<br>
<!-- -->Igual a qualquer outro campo texto...</p>
<p>Como se armazena a senha?<br>
<!-- -->Não se armazena senha...</p>
<p>Pode parecer estranho a primeira vista mas não precisamos armazenar a senha para conferir se alguém nos deus a senha correta.</p>
<p>Existem <strong>funções hash criptográficas</strong> que produzem saídas com propriedades que nos ajudam a conferir se a senha de um usuário está correta.</p>
<p>Propriedades que nos interessão nessas funções:</p>
<ul>
<li>Dada uma entrada de bytes, sempre produz a mesma saída de bytes<!-- -->
<ul>
<li>Nada de especial aqui, apenas está garantindo que não é afetado por outro fatores aleatórios (tempo, temperatura, etc)</li>
</ul>
</li>
<li>Não existe função que reverte a operação<!-- -->
<ul>
<li>Em outras palavras, tendo a saída de bytes da função você não consegue saber a entrada que foi dada para a função hash (sem ir chutando todas as possibilidades)</li>
</ul>
</li>
<li>Qualquer mudança na entrada de bytes gera uma saída de bytes muito diferente<!-- -->
<ul>
<li>A ideia é que as pessoas não devem saber que as entradas são parecidas a partir da saída</li>
</ul>
</li>
</ul>
<p>Diversas funções hash criptográficas existem, cada uma com o próprio algoritmo.<br>
<!-- -->No nosso caso vamos utilizar o algoritmo sha256 para os exemplos!</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; sha256(entrada)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">saida</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Segurança é algo que muda com o tempo, então funções hash criptográficas seguras de antigamente podem já não ser mais seguras.</p><p>Estou usando a função hash que usa o algoritmo sha256 apenas de exemplo, não estou considerando se é segura ou não para o ano atual.</p></div></div>
<table><thead><tr><th>entrada</th><th>saída</th></tr></thead><tbody><tr><td>abc</td><td>ba7816bf8f01cfea414140de5dae2223b00361a396177a9cb410ff61f20015ad</td></tr><tr><td>abd</td><td>a52d159f262b2c6ddb724a61840befc36eb30c88877a4030b65cbe86298449c9</td></tr><tr><td>ABC</td><td>b5d4045c3f466fa91fe2cc6abe79232a1a57cdf104f7a26e716e0a1e2789df78</td></tr><tr><td>123</td><td>a665a45920422f9d417e4867efdc4fb8a04a1f3fff1fa07e998e86f7f7a27ae3</td></tr></tbody></table>
<ul>
<li>Se você der a mesma entrada, vai receber a mesma saída</li>
<li>Olhando a saída você não sabe a entrada</li>
<li>A mudanaça de um bit entre &quot;abc&quot; e &quot;abd&quot; mudou totalmente a saída</li>
</ul>
<p>Não sei se ficou claro, mas isso é perfeito para podermos conferir se alguém acertou a senha.</p>
<p>Assim que um usuário registra no serviço e nos da senha, podemos calcular o hash da senha (saída da função hash para a senha) para armazenar.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; sha256(b&quot;password&quot;).hexdigest()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; sha256(b&quot;mega_password&quot;).hexdigest()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;2d2c3f7eb9152d67258cd1068a64a746c130d4cca3f571bd28a86d7f7589aa25&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; sha256(b&quot;senha&quot;).hexdigest()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;b7e94be513e96e8c45cd23d162275e5a12ebde9100a425c4ebcdd7fa4dcd897c&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<table><thead><tr><th>username</th><th>hash</th></tr></thead><tbody><tr><td>thiagola92</td><td>5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8</td></tr><tr><td>darklord</td><td>2d2c3f7eb9152d67258cd1068a64a746c130d4cca3f571bd28a86d7f7589aa25</td></tr><tr><td>juninho</td><td>b7e94be513e96e8c45cd23d162275e5a12ebde9100a425c4ebcdd7fa4dcd897c</td></tr></tbody></table>
<p>Quando alguém for logar no nosso serviço, a pessoa vai inserir a senha e nós vamos conferir se o hash dessa senha é igual ao que temos no banco.</p>
<ul>
<li>Se for igual, a pessoa sabe a senha e nós podemos autorizar o acesso ao serviço</li>
<li>Se não for igual, a pessoa <strong>não</strong> sabe a senha e nós devemos negar o acesso ao serviço</li>
</ul>
<p>Qual a vantagem de armazenar assim?<br>
<!-- -->Se algum hacker acessar nosso banco, ele não vai conseguir saber a senha das pessoas.</p>
<p>Mesmo que a pessoa saiba que meu hash é:<br>
<code>5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8</code><br>
<!-- -->Se ela tentar o hash como senha, o hash do hash vai ser totalmente diferente.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; sha256(b&quot;5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8&quot;).hexdigest()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;113459eb7bb31bddee85ade5230d6ad5d8b2fb52879e00a84ff6ae1067a210d3&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Então é isso? Temos que armazenar o hash da senha? Nope.</p>
<p><img loading="lazy" alt="Face saying nope" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iNDAwIgogICBoZWlnaHQ9IjQwMCIKICAgdmlld0JveD0iMCAwIDQwMCA0MDAiCiAgIHZlcnNpb249IjEuMSIKICAgaWQ9InN2ZzEiCiAgIGlua3NjYXBlOnZlcnNpb249IjEuMy4yICgxOjEuMy4yKzIwMjMxMTI1MjE1MCswOTFlMjBlZjBmKSIKICAgc29kaXBvZGk6ZG9jbmFtZT0ibm9wZS5zdmciCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJuYW1lZHZpZXcxIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzAwMDAwMCIKICAgICBib3JkZXJvcGFjaXR5PSIwLjI1IgogICAgIGlua3NjYXBlOnNob3dwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZWNoZWNrZXJib2FyZD0idHJ1ZSIKICAgICBpbmtzY2FwZTpkZXNrY29sb3I9IiNkMWQxZDEiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOnpvb209IjIuMDA4MTgzMyIKICAgICBpbmtzY2FwZTpjeD0iMTY2LjgxNzQ0IgogICAgIGlua3NjYXBlOmN5PSIxNzUuMDMzODMiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxOTIwIgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9IjEwMTEiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjE5MjAiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjMyIgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjEiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIj4KICAgIDxpbmtzY2FwZTpncmlkCiAgICAgICBpZD0iZ3JpZDEiCiAgICAgICB1bml0cz0icHgiCiAgICAgICBvcmlnaW54PSIwIgogICAgICAgb3JpZ2lueT0iMCIKICAgICAgIHNwYWNpbmd4PSIwLjI2NDU4MzMzIgogICAgICAgc3BhY2luZ3k9IjAuMjY0NTgzMzMiCiAgICAgICBlbXBjb2xvcj0iIzAwOTllNSIKICAgICAgIGVtcG9wYWNpdHk9IjAuMzAxOTYwNzgiCiAgICAgICBjb2xvcj0iIzAwOTllNSIKICAgICAgIG9wYWNpdHk9IjAuMTQ5MDE5NjEiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgZG90dGVkPSJmYWxzZSIKICAgICAgIGdyaWRhbmdsZXg9IjMwIgogICAgICAgZ3JpZGFuZ2xlej0iMzAiCiAgICAgICB2aXNpYmxlPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxkZWZzCiAgICAgaWQ9ImRlZnMxIiAvPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBpZD0icGF0aDEiCiAgICAgICBzdHlsZT0iZmlsbDojMzNjMjU1O2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDowLjQ4ODY1NjtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiCiAgICAgICBkPSJtIDI0Ni44NjI2MSw1Mi4wOTE5OTcgYSAxMzguNzQzOTksMTM3LjU4MzMzIDAgMCAwIC0xMzguNzQ0MTQsMTM3LjU4MjAzMyAxMzguNzQzOTksMTM3LjU4MzMzIDAgMCAwIDAuMzQ5NjEsNC44NDU3IDQ2LjU2NjYzOSw2NC4yMTczODQgMCAwIDEgMzQuMDQ0OTMsLTIwLjU2NjQxIDQ2LjU2NjYzOSw2NC4yMTczODQgMCAwIDEgNDYuNTY2NCw2NC4yMTY4IDQ2LjU2NjYzOSw2NC4yMTczODQgMCAwIDEgLTI4LjMwMjczLDU5LjAyNTM5IDEzOC43NDM5OSwxMzcuNTgzMzMgMCAwIDAgODYuMDg1OTMsMzAuMDYyNSBBIDEzOC43NDM5OSwxMzcuNTgzMzMgMCAwIDAgMzg1LjYwNjc2LDE4OS42NzQwMyAxMzguNzQzOTksMTM3LjU4MzMzIDAgMCAwIDI0Ni44NjI2MSw1Mi4wOTE5OTcgWiBtIDc4LjgxNDQ2LDY5LjM3MzA0MyBhIDUsNSAwIDAgMSA0LjY4MTY0LDUuMzAwNzggYyAtMC4xMzYxMSwyLjE5NDE0IC0wLjc2NjQxLDIuNDY3NDkgLTEuMDc4MTMsMi44OTg0NCAtMC4zMTE3MiwwLjQzMDk1IC0wLjU3MTAyLDAuNzA5MzQgLTAuODQ1NywwLjk5MjE5IC0wLjU0OTM2LDAuNTY1NyAtMS4xNTExNCwxLjA5NTUyIC0xLjg4NjcyLDEuNjkzMzYgLTEuNDcxMTYsMS4xOTU2NyAtMy40NDQ1MiwyLjYwOTI1IC01Ljg4NDc2LDQuMTIzMDQgLTQuODgwNTMsMy4wMjc2NCAtMTEuNTk1MzMsNi40MzI3MSAtMTkuMzk4NDQsOC42NTYyNSAtMTUuNjA2MjUsNC40NDcxMyAtMzYuMzk3NDcsMy41MzcxNiAtNTEuNzM0MzgsLTE1LjQ5MjE4IGEgNSw1IDAgMCAxIDAuNzU1ODYsLTcuMDMxMjUgNSw1IDAgMCAxIDcuMDI5MywwLjc1NTg2IGMgMTIuNzg0OTQsMTUuODYyOTcgMjcuOTA0ODgsMTUuOTQxNDggNDEuMjA4OTgsMTIuMTUwMzkgNi42NTIwNywtMS44OTU1NiAxMi42NDA0MSwtNC45MTUwNCAxNi44NjcxOSwtNy41MzcxMSAyLjExMzQsLTEuMzExMDUgMy43OTUyNCwtMi41Mjk0MyA0Ljg0NzY2LC0zLjM4NDc3IDAuNTI2MjEsLTAuNDI3NjcgMC45MDMyMiwtMC43Nzg2MSAxLjAyMTQ4LC0wLjkwMDM5IDAuMDU5MiwtMC4wNjA5IDAuMDU1MywtMC4wNzY1IC0wLjA4MiwwLjExMzI4IC0wLjEzNzI4LDAuMTg5NzkgLTAuNjcyNTIsMC4yNzYxNSAtMC44MDA3OCwyLjM0Mzc1IGEgNSw1IDAgMCAxIDUuMjk4ODMsLTQuNjgxNjQgeiBtIC0xMDEuMDgyMDMsMS41MTk1MyBhIDUsNSAwIDAgMSA0LjY4MTY0LDUuMzAwNzggYyAtMC4xMzYxMSwyLjE5NDE0IC0wLjc2NjQxLDIuNDY3NDkgLTEuMDc4MTMsMi44OTg0NCAtMC4zMTE3MiwwLjQzMDk1IC0wLjU3MTAyLDAuNzA5MzQgLTAuODQ1NywwLjk5MjE5IC0wLjU0OTM2LDAuNTY1NyAtMS4xNTMwOSwxLjA5NTUyIC0xLjg4ODY3LDEuNjkzMzYgLTEuNDcxMTYsMS4xOTU2NyAtMy40NDI1NSwyLjYwOTI0IC01Ljg4MjgxLDQuMTIzMDUgLTQuODgwNTMsMy4wMjc2MyAtMTEuNTk1MzIsNi40MzI2OSAtMTkuMzk4NDQsOC42NTYyNCAtMTUuNjA2MjYsNC40NDcxMyAtMzYuMzk3NDYsMy41MzcxOCAtNTEuNzM0MzgsLTE1LjQ5MjE4IGEgNSw1IDAgMCAxIDAuNzUzOTEsLTcuMDMxMjUgNSw1IDAgMCAxIDcuMDMxMjUsMC43NTU4NiBjIDEyLjc4NDk1LDE1Ljg2Mjk5IDI3LjkwMjksMTUuOTQxNDkgNDEuMjA3MDMsMTIuMTUwMzkgNi42NTIwNiwtMS44OTU1NiAxMi42NDIzNCwtNC45MTUwMiAxNi44NjkxNCwtNy41MzcxMSAyLjExMzQsLTEuMzExMDUgMy43OTUyNCwtMi41Mjk0MyA0Ljg0NzY2LC0zLjM4NDc3IDAuNTI2MjEsLTAuNDI3NjcgMC45MDMyMiwtMC43Nzg2MSAxLjAyMTQ4LC0wLjkwMDM5IDAuMDU5MiwtMC4wNjA5IDAuMDU1MywtMC4wNzY1IC0wLjA4MiwwLjExMzI4IC0wLjEzNzI4LDAuMTg5NzkgLTAuNjc0NDgsMC4yNzYxNiAtMC44MDI3MywyLjM0Mzc1IGEgNSw1IDAgMCAxIDUuMzAwNzgsLTQuNjgxNjQgeiIgLz4KICAgIDxlbGxpcHNlCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMzNjMjU1O3N0cm9rZS13aWR0aDo3LjQwODM5O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJwYXRoMS01IgogICAgICAgY3g9IjE0Mi41MTM2NCIKICAgICAgIGN5PSIyMzguMTY5NzUiCiAgICAgICByeD0iNDYuNTY2NjM5IgogICAgICAgcnk9IjY0LjIxNzM4NCIgLz4KICAgIDx0ZXh0CiAgICAgICB4bWw6c3BhY2U9InByZXNlcnZlIgogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTozMnB4O2ZvbnQtZmFtaWx5OidGaXJhQ29kZSBOZXJkIEZvbnQnOy1pbmtzY2FwZS1mb250LXNwZWNpZmljYXRpb246J0ZpcmFDb2RlIE5lcmQgRm9udCc7ZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMzNjMjU1O3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIHg9IjEzLjA3MzQzOSIKICAgICAgIHk9IjIzNi4yOTIzMSIKICAgICAgIGlkPSJ0ZXh0MyI+PHRzcGFuCiAgICAgICAgIHNvZGlwb2RpOnJvbGU9ImxpbmUiCiAgICAgICAgIGlkPSJ0c3BhbjMiCiAgICAgICAgIHg9IjEzLjA3MzQzOSIKICAgICAgICAgeT0iMjM2LjI5MjMxIj5OT09PT09QRTwvdHNwYW4+PC90ZXh0PgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMyY2E5NDk7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0ibSAxNDIuNTEzNjUsMTc0LjE1NDk0IGMgNTEuMjczNzEsMTUuOTk1OTMgMTA3LjY5NjQ2LDEwLjY5MDc1IDEwNy42OTY0NiwxMC42OTA3NSIKICAgICAgIGlkPSJwYXRoMyIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzJjYTk0OTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDE0Ni4xNTE3NywzMDQuNTkxMzMgQyAxOTcuNDI1NDgsMjg4LjU5NTQgMjUzLjg0ODIzLDI5My45MDA1OCAyNTMuODQ4MjMsMjkzLjkwMDU4IgogICAgICAgaWQ9InBhdGgzLTYiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogIDwvZz4KPC9zdmc+Cg==" width="400" height="400" class="img_ev3q"></p>
<p>O que acontece quando dois usuários possuem a mesma senha?</p>
<table><thead><tr><th>username</th><th>hash</th></tr></thead><tbody><tr><td>thiagola92</td><td>5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8</td></tr><tr><td>darklord</td><td><strong>2d2c3f7eb9152d67258cd1068a64a746c130d4cca3f571bd28a86d7f7589aa25</strong></td></tr><tr><td>juninho</td><td>b7e94be513e96e8c45cd23d162275e5a12ebde9100a425c4ebcdd7fa4dcd897c</td></tr><tr><td>mmiguel</td><td><strong>2d2c3f7eb9152d67258cd1068a64a746c130d4cca3f571bd28a86d7f7589aa25</strong></td></tr></tbody></table>
<p>Isso quer dizer que se um hacker advinhar a senha de <code>mmiguel</code>, ele também sabe a senha de <code>darklord</code>.</p>
<p>Para previnir isso é normal adicionar <strong>salt</strong> às senhas, ou seja, concatenar bytes extras na senha antes de fazer o hash.</p>
<p>Assim que o usuário criar a conta, criaremos um salt para ele com uma função que gera X bytes aleatórios (<code>os.urandom(X)</code>):</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># No caso vamos gerar 10 bytes aleatórios.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">salt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">urandom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<table><thead><tr><th>username</th><th>salt</th></tr></thead><tbody><tr><td>thiagola92</td><td>cea3a49482094b096acb</td></tr><tr><td>darklord</td><td>b9f195b7ce55a51fdc0d</td></tr><tr><td>juninho</td><td>885cfd855add75c08a7a</td></tr><tr><td>mmiguel</td><td>10cc25d0c8adcbc44e9a</td></tr></tbody></table>
<p>Iremos inserir na função hash a concatenação de <code>senha + salt</code>.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; sha256(b&quot;password&quot; + b&quot;cea3a49482094b096acb&quot;).hexdigest()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;a15760e9639bc64e8908d5d2109900dcbc508e6fc5fa7b161e5149fcdaa04eee&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; sha256(b&quot;mega_password&quot; + b&quot;b9f195b7ce55a51fdc0d&quot;).hexdigest()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;8c7044c8e42efebbf7d19027db0a00c8d2242197a0e001d5d0d977cccfaa020c&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; sha256(b&quot;senha&quot; + b&quot;885cfd855add75c08a7a&quot;).hexdigest()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;f51f77c4575127dbf8906c60b7b1c80e01772be217c8a1c9df68e4f527b7f8eb&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; sha256(b&quot;mega_password&quot; + b&quot;10cc25d0c8adcbc44e9a&quot;).hexdigest()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;bbb70b912376b0c266d90cd3ebd1ffa99f6c439a50ed6481bb809b99fd93d300&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<table><thead><tr><th>username</th><th>salt</th><th>hash</th></tr></thead><tbody><tr><td>thiagola92</td><td>cea3a49482094b096acb</td><td>a15760e9639bc64e8908d5d2109900dcbc508e6fc5fa7b161e5149fcdaa04eee</td></tr><tr><td>darklord</td><td>b9f195b7ce55a51fdc0d</td><td>8c7044c8e42efebbf7d19027db0a00c8d2242197a0e001d5d0d977cccfaa020c</td></tr><tr><td>juninho</td><td>885cfd855add75c08a7a</td><td>f51f77c4575127dbf8906c60b7b1c80e01772be217c8a1c9df68e4f527b7f8eb</td></tr><tr><td>mmiguel</td><td>10cc25d0c8adcbc44e9a</td><td>bbb70b912376b0c266d90cd3ebd1ffa99f6c439a50ed6481bb809b99fd93d300</td></tr></tbody></table>
<p>Agora se um hacker tentar todas as possibilidades de senhas para o <code>mmiguel</code> e um dia acertar, ele jamais vai ser que é a mesma senha para <code>darklord</code>.</p>
<blockquote>
<p>E se o salt gerado for o mesmo para ambos?</p>
</blockquote>
<p>Uma maneira de solucionar isto é verificar se já existe alguém com o mesmo hash e salt.<br>
<!-- -->Caso sim, gere um novo salt...</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="client---login">Client - login<a href="#client---login" class="hash-link" aria-label="Link direto para Client - login" title="Link direto para Client - login">​</a></h2>
<p><img loading="lazy" alt="UI para login" src="/pt-br/assets/images/login-0fa8f3165e1cd067ebd8e33f9799049c.svg" width="400" height="400" class="img_ev3q"></p>
<p>Quando falando de website, a maneira para logar é a mesma de se registrar:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> httpx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> urllib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">parse </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> urlencode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">body </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> urlencode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> username</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> password</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">headers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;Content-Type&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;application/x-www-form-urlencoded&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">httpx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://127.0.0.1:8000/login&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> headers</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">headers</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> content</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">body</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>E o server responde enviando cookies para que o browser use nas próximas requisições de conteúdo.</p>
<p>Note que esse request utiliza o body para enviar <code>username</code> e <code>password</code>, o que deixa o body ocupado por dados relacionados ao login (ao menos que você queira fazer uma bagunça e misturar login com pedido de dados).</p>
<p>Outra maneira conhecida por APIs é passar a autentição no headers pelo campo <code>Authorization</code>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> httpx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> base64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">credentials </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#e3116c">f&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">username</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">:</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">password</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">credentials </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> credentials</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">credentials </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> base64</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">b64encode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">credentials</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">credentials </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> credentials</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> httpx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://127.0.0.1:8000/&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> headers</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;Authorization&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Basic </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">credentials</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note que nesse modelo nós botamos como valor do <code>Authroization</code> o esquema e depois a credencial:<br>
<code>&lt;scheme&gt; &lt;credential&gt;</code></p>
<p>No nosso caso o esquema é <code>Basic</code>, onde quer dizer que vamos passar as credenciais em base 64 e concatenadas com <code>:</code>.<br>
<code>&lt;username&gt;:&lt;password&gt;</code></p>
<p>A vantagem desta maneira é que em uma requisição nós já conseguiriamos nos autenticar e aplicar a operação desejada na API.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Essa maneira não é incentivada pois passar em toda requisição username e password é arriscado, basta uma pessoa má intencionado conseguir acesso a uma mensagem para obter sua senha.</p><p>Passar em uma requisição para obter um token/cookie é válido, pois toda requisição seguinte nós utilizariamos esse token/cookie para sermos validados no server.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="server---login">Server - login<a href="#server---login" class="hash-link" aria-label="Link direto para Server - login" title="Link direto para Server - login">​</a></h2>
<p>Okay, seu servidor recebeu o request de logar... O que fazer? Validações! (novamente)</p>
<p><img loading="lazy" alt="Robo lendo um papel com os olhos estressados" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iNDAwIgogICBoZWlnaHQ9IjQwMCIKICAgdmlld0JveD0iMCAwIDQwMCA0MDAiCiAgIHZlcnNpb249IjEuMSIKICAgaWQ9InN2ZzEiCiAgIGlua3NjYXBlOnZlcnNpb249IjEuMy4yICgxOjEuMy4yKzIwMjMxMTI1MjE1MCswOTFlMjBlZjBmKSIKICAgc29kaXBvZGk6ZG9jbmFtZT0ic2VydmVyX2FuZ3JpbHlfcmVhZGluZy5zdmciCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJuYW1lZHZpZXcxIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzAwMDAwMCIKICAgICBib3JkZXJvcGFjaXR5PSIwLjI1IgogICAgIGlua3NjYXBlOnNob3dwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZWNoZWNrZXJib2FyZD0idHJ1ZSIKICAgICBpbmtzY2FwZTpkZXNrY29sb3I9IiNkMWQxZDEiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOnpvb209IjEuNDIiCiAgICAgaW5rc2NhcGU6Y3g9IjIwNC45Mjk1OCIKICAgICBpbmtzY2FwZTpjeT0iMTg5Ljc4ODczIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTkyMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSIxMDExIgogICAgIGlua3NjYXBlOndpbmRvdy14PSIxOTIwIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIzMiIKICAgICBpbmtzY2FwZTp3aW5kb3ctbWF4aW1pemVkPSIxIgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImxheWVyMSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9ImdyaWQxIgogICAgICAgdW5pdHM9InB4IgogICAgICAgb3JpZ2lueD0iMCIKICAgICAgIG9yaWdpbnk9IjAiCiAgICAgICBzcGFjaW5neD0iMC4yNjQ1ODMzMyIKICAgICAgIHNwYWNpbmd5PSIwLjI2NDU4MzMzIgogICAgICAgZW1wY29sb3I9IiMwMDk5ZTUiCiAgICAgICBlbXBvcGFjaXR5PSIwLjMwMTk2MDc4IgogICAgICAgY29sb3I9IiMwMDk5ZTUiCiAgICAgICBvcGFjaXR5PSIwLjE0OTAxOTYxIgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIGRvdHRlZD0iZmFsc2UiCiAgICAgICBncmlkYW5nbGV4PSIzMCIKICAgICAgIGdyaWRhbmdsZXo9IjMwIgogICAgICAgdmlzaWJsZT0idHJ1ZSIgLz4KICA8L3NvZGlwb2RpOm5hbWVkdmlldz4KICA8ZGVmcwogICAgIGlkPSJkZWZzMSIgLz4KICA8ZwogICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgIGlua3NjYXBlOmdyb3VwbW9kZT0ibGF5ZXIiCiAgICAgaWQ9ImxheWVyMSI+CiAgICA8cGF0aAogICAgICAgaWQ9InJlY3QyIgogICAgICAgc3R5bGU9ImZpbGw6IzMzYzI1NTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6NTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW9wYWNpdHk6MTtwYWludC1vcmRlcjpmaWxsIG1hcmtlcnMgc3Ryb2tlIgogICAgICAgZD0iTSAxNjIuMjA3MDMgMjEuMTY2MDE2IEMgMTM1LjgyMjY4IDIxLjE2NjAxNiAxMTQuNTgyMDMgNDIuNDA4NjAxIDExNC41ODIwMyA2OC43OTI5NjkgTCAxMTQuNTgyMDMgMjE2Ljk1ODk4IEwgMjQ2LjM0MTggMjE2Ljk1ODk4IEMgMjUwLjA5NzYxIDIxNi45NTg5OCAyNTMuMTIxMDkgMjE5Ljk4MjQ3IDI1My4xMjEwOSAyMjMuNzM4MjggTCAyNTMuMTIxMDkgMjg3LjU4Mzk4IEwgMzMzLjM3NSAyODcuNTgzOTggQyAzNTkuNzU5MzYgMjg3LjU4Mzk4IDM4MSAyNjYuMzQzMzcgMzgxIDIzOS45NTg5OCBMIDM4MSA2OC43OTI5NjkgQyAzODEgNDIuNDA4NjAxIDM1OS43NTkzNiAyMS4xNjYwMTYgMzMzLjM3NSAyMS4xNjYwMTYgTCAxNjIuMjA3MDMgMjEuMTY2MDE2IHogTSAxNTguNDU4OTggNzQuMTkxNDA2IEwgMjIyLjI1IDc0LjE5MTQwNiBMIDIyMi4yNSAxMzcuNTgzOTggTCAxNTguNDU4OTggMTM3LjU4Mzk4IEwgMTU4LjQ1ODk4IDc0LjE5MTQwNiB6IE0gMjc0Ljg3NSA3NC4xOTE0MDYgTCAzMzguNjY2MDIgNzQuMTkxNDA2IEwgMzM4LjY2NjAyIDEzNy41ODM5OCBMIDI3NC44NzUgMTM3LjU4Mzk4IEwgMjc0Ljg3NSA3NC4xOTE0MDYgeiBNIDE3OS45MTYwMiAxOTUuNzkxMDIgTCAzMTIuMjA4OTggMTk1Ljc5MTAyIEwgMzEyLjIwODk4IDIxMC4yMTY4IEwgMTc5LjkxNjAyIDIxMC4yMTY4IEwgMTc5LjkxNjAyIDE5NS43OTEwMiB6ICIgLz4KICAgIDxyZWN0CiAgICAgICBzdHlsZT0iZmlsbDojMzNjMjU1O2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxLjE5MTc0O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utb3BhY2l0eToxO3BhaW50LW9yZGVyOmZpbGwgbWFya2VycyBzdHJva2UiCiAgICAgICBpZD0icmVjdDItNSIKICAgICAgIHdpZHRoPSI2My40OTk5NjkiCiAgICAgICBoZWlnaHQ9IjYzLjQ5OTk2OSIKICAgICAgIHg9IjIyMi4yNTAwMiIKICAgICAgIHk9IjMxNy41IgogICAgICAgcng9IjExLjM1MTM3OCIKICAgICAgIHJ5PSIxMS4zNTEzNzgiIC8+CiAgICA8cmVjdAogICAgICAgc3R5bGU9ImZpbGw6IzMzYzI1NTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS4xOTE3NDtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW9wYWNpdHk6MTtwYWludC1vcmRlcjpmaWxsIG1hcmtlcnMgc3Ryb2tlIgogICAgICAgaWQ9InJlY3QyLTUtMiIKICAgICAgIHdpZHRoPSI2My40OTk5NjkiCiAgICAgICBoZWlnaHQ9IjYzLjQ5OTk2OSIKICAgICAgIHg9IjUyLjkxNjY2NCIKICAgICAgIHk9IjMxNy41IgogICAgICAgcng9IjExLjM1MTM3OCIKICAgICAgIHJ5PSIxMS4zNTEzNzgiIC8+CiAgICA8cGF0aAogICAgICAgaWQ9InJlY3QzIgogICAgICAgc3R5bGU9ImZpbGw6IzMzYzI1NTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6My4xMTM3O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utb3BhY2l0eToxO3BhaW50LW9yZGVyOmZpbGwgbWFya2VycyBzdHJva2UiCiAgICAgICBkPSJNIDkwLjI1MzkwNiAyMjIuMjUgTCA5MC4yNTM5MDYgMzEyLjIwODk4IEwgMTA4LjQ2NDg0IDMxMi4yMDg5OCBDIDExNS44MDE2MSAzMTIuMjA4OTggMTIxLjcwODk4IDMxOC4xMTQ0IDEyMS43MDg5OCAzMjUuNDUxMTcgTCAxMjEuNzA4OTggMzczLjA0ODgzIEMgMTIxLjcwODk4IDM4MC4zODU2IDExNS44MDE2MSAzODYuMjkxMDIgMTA4LjQ2NDg0IDM4Ni4yOTEwMiBMIDkwLjI1MzkwNiAzODYuMjkxMDIgTCA5MC4yNTM5MDYgNDAwIEwgMjQ4LjQxNDA2IDQwMCBMIDI0OC40MTQwNiAzODYuMjkxMDIgTCAyMzAuMjAxMTcgMzg2LjI5MTAyIEMgMjIyLjg2NDQxIDM4Ni4yOTEwMiAyMTYuOTU4OTggMzgwLjM4NTU5IDIxNi45NTg5OCAzNzMuMDQ4ODMgTCAyMTYuOTU4OTggMzI1LjQ1MTE3IEMgMjE2Ljk1ODk4IDMxOC4xMTQ0MSAyMjIuODY0NDEgMzEyLjIwODk4IDIzMC4yMDExNyAzMTIuMjA4OTggTCAyNDguNDE0MDYgMzEyLjIwODk4IEwgMjQ4LjQxNDA2IDIyMi4yNSBMIDkwLjI1MzkwNiAyMjIuMjUgeiAiIC8+CiAgICA8cmVjdAogICAgICAgc3R5bGU9ImZpbGw6IzMzYzI1NTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6Mi4xNTI0O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtwYWludC1vcmRlcjpmaWxsIG1hcmtlcnMgc3Ryb2tlIgogICAgICAgaWQ9InJlY3Q0LTMtMi03IgogICAgICAgd2lkdGg9IjIyLjM2NTQ4OCIKICAgICAgIGhlaWdodD0iMjIuMjI1Mzc2IgogICAgICAgeD0iMTYxLjM5NTgzIgogICAgICAgeT0iMTEyLjcxMjEyIiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiMzM2MyNTU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjIuMTUyNDtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjE7cGFpbnQtb3JkZXI6ZmlsbCBtYXJrZXJzIHN0cm9rZSIKICAgICAgIGlkPSJyZWN0NC0zLTItNy0yIgogICAgICAgd2lkdGg9IjIyLjM2NTQ4OCIKICAgICAgIGhlaWdodD0iMjIuMjI1Mzc2IgogICAgICAgeD0iMjc2LjYxMzY4IgogICAgICAgeT0iMTEyLjcxMjEyIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMyY2E5NDk7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kIgogICAgICAgZD0ibSAyMTYuMzAyNTksNzMuMTY3OTQgLTIuMjQwODMsMTEuNDQxNDUxIC04LjIwMTk3LDEuMjM4MDIzIgogICAgICAgaWQ9InBhdGgyIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMyY2E5NDk7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kIgogICAgICAgZD0ibSAxODMuNzYxMzIsNzQuMjcwNTUyIC0xMS4xODI3NSwxNC45MzIzNzIgNy4wOTMyLDEyLjkyNjY5NiIKICAgICAgIGlkPSJwYXRoMyIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMmNhOTQ5O3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZCIKICAgICAgIGQ9Im0gMTcxLjA3ODYsODguMjAwMDg2IC01LjYwODc5LDkuNzg2NjkxIDUuNjA4NzksNS42NDI4NDMiCiAgICAgICBpZD0icGF0aDQiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzJjYTk0OTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiCiAgICAgICBkPSJtIDIyMS43MDM4OSwxMTIuNzEyMTIgLTEwLjYyMjcsLTEwLjc0MTc2IC02LjcyMTQsNy41OTM5MyAtNi4wMjEzNSwtMi42MDc5MyIKICAgICAgIGlkPSJwYXRoNSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMmNhOTQ5O3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZCIKICAgICAgIGQ9Im0gMjEzLjE0MzE2LDEzNi41NTUzNyAtNC40ODE2NywtMTIuNzMwNTYgLTEwLjU2OTMsNi44OTMxNSAtNy4yMTU5LDQuMjE5NTQiCiAgICAgICBpZD0icGF0aDYiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzJjYTk0OTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiCiAgICAgICBkPSJtIDIwNC4zNTk3OSwxMjUuNTc0MzggLTguNTA5NCwtNC4xMDgxOSAtNi40NzQxLDQuMzUwMTUiCiAgICAgICBpZD0icGF0aDciIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzJjYTk0OTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiCiAgICAgICBkPSJtIDE5Ni44Mzg0NCw3NS42NjA0NjUgLTMuNzM4NTIsMTUuNTQxNjg3IC03LjgzODYsMy4yMjYzMzIiCiAgICAgICBpZD0icGF0aDgiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzJjYTk0OTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiCiAgICAgICBkPSJtIDE5NC4zNjk1MSw5MC45NDk3OSAyLjQ2ODkzLDcuMjk3MTIzIC01Ljc4ODU2LDMuNjAwNjI3IgogICAgICAgaWQ9InBhdGg5IiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMyY2E5NDk7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kIgogICAgICAgZD0ibSAyOTguOTc5MTcsNzQuMTYwNDY1IC01LjEzNzMzLDE3LjQyOTg1NCA1LjEzNzMzLDguODgwMTExIgogICAgICAgaWQ9InBhdGgxMCIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMmNhOTQ5O3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZCIKICAgICAgIGQ9Im0gMjkyLjM0MTg1LDkyLjAzNTMwNiAtNC41NDU0Myw2LjM0NjgyNiIKICAgICAgIGlkPSJwYXRoMTEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzJjYTk0OTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiCiAgICAgICBkPSJtIDMxMC43MzgzNCwxMzguMDU1MzcgNC45Nzk2MywtMTAuNzM5MDMgLTQuODIxMjgsLTQuOTkxNDUiCiAgICAgICBpZD0icGF0aDEyIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMyY2E5NDk7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kIgogICAgICAgZD0ibSAzMTEuMTMxNzUsMTM0LjkzNzUgLTUuNDc0MTgsLTQuNzQ3MzcgMC41MTIyNCwtNi4zNjUzMiIKICAgICAgIGlkPSJwYXRoMTMiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzJjYTk0OTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiCiAgICAgICBkPSJtIDMxOC40OTUxOCw3NC4xNjA0NjUgMC43NDY5NCwxNi4zNzQ4NDEgLTEwLjg0NzQ2LDIuMDEwOTk0IgogICAgICAgaWQ9InBhdGgxNCIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMmNhOTQ5O3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZCIKICAgICAgIGQ9Im0gMzIwLjc0MjExLDkwLjUzNTMwNiAtMy41MjQxNyw5LjM0NjgyNiIKICAgICAgIGlkPSJwYXRoMTUiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzJjYTk0OTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiCiAgICAgICBkPSJtIDMzNy41NDExNSwxMDguOTEyNjggLTEwLjU3NTIsLTcuNTMwNTUgLTExLjI0ODAxLDEyLjgyOTk5IC02LjQ3OTYsLTEwLjg2NDU4IgogICAgICAgaWQ9InBhdGgxNiIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMmNhOTQ5O3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZCIKICAgICAgIGQ9Im0gMzE1LjcxNzk0LDExNC4yMTIxMiAtNi40Nzk2LDMuNjAzMTYiCiAgICAgICBpZD0icGF0aDE3IiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMyY2E5NDk7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kIgogICAgICAgZD0ibSAzNDAuMzg0NzQsMTQxLjgwOTc3IC0xMC4zMzI3MiwtMTQuNDkzNDMgLTcuODA5OTEsLTEzLjEwNDIyIgogICAgICAgaWQ9InBhdGgxOCIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMmNhOTQ5O3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZCIKICAgICAgIGQ9Im0gMzI4Ljc4NTIzLDEyNy4zMTYzNCAtNS4zOTU0OSwyLjg3Mzc5IgogICAgICAgaWQ9InBhdGgxOSIgLz4KICA8L2c+Cjwvc3ZnPgo=" width="400" height="400" class="img_ev3q"></p>
<p>Se estivermos falando da mesma maneira utilizada por websites, então as validações são bem parecidas com as de registrar!</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">headers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Content-Type&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;application/x-www-form-urlencoded&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">raise</span><span class="token plain"> Exception</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Invalid body format&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">body</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> body</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fields </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> parse_qs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">body</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> ValueError</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">raise</span><span class="token plain"> Exception</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Body incorrectly formatted&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> fields </span><span class="token keyword" style="color:#00009f">or</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> fields</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> Exception</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Missing username or password&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Se estivermos falando da maneira das APIs, temos que adaptar ao outro local onde o username e password estão mas nada complicado!</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">headers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Authorization&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">raise</span><span class="token plain"> Exception</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Missing authorization&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">auth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> conn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">headers</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;Authorization&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scheme</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> credentials </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">split</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> scheme</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lower</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;basic&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">raise</span><span class="token plain"> Exception</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Incorrect authorization protocol&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    credentials </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> base64</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">b64decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">credentials</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    credentials </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> credentials</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    username</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> password </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> credentials</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">partition</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> ValueError</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">raise</span><span class="token plain"> Exception</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Credentials incorrectly formatted&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Chegou a hora da verdade.<br>
<!-- -->Quem mandou a requisição é o usuário verdadeiro da conta?</p>
<p><img loading="lazy" alt="Pessoa com o lazer de uma arma na cabeça" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iNDAwIgogICBoZWlnaHQ9IjQwMCIKICAgdmlld0JveD0iMCAwIDQwMCA0MDAiCiAgIHZlcnNpb249IjEuMSIKICAgaWQ9InN2ZzEiCiAgIGlua3NjYXBlOnZlcnNpb249IjEuMy4yICgxOjEuMy4yKzIwMjMxMTI1MjE1MCswOTFlMjBlZjBmKSIKICAgc29kaXBvZGk6ZG9jbmFtZT0icGVyc29uX2xhemVyX2hlYWQuc3ZnIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0ibmFtZWR2aWV3MSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiMwMDAwMDAiCiAgICAgYm9yZGVyb3BhY2l0eT0iMC4yNSIKICAgICBpbmtzY2FwZTpzaG93cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VjaGVja2VyYm9hcmQ9InRydWUiCiAgICAgaW5rc2NhcGU6ZGVza2NvbG9yPSIjZDFkMWQxIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBzaG93Z3JpZD0idHJ1ZSIKICAgICBpbmtzY2FwZTp6b29tPSIyLjAwODE4MzMiCiAgICAgaW5rc2NhcGU6Y3g9IjIyNy4wNzA5MSIKICAgICBpbmtzY2FwZTpjeT0iMjIyLjgzODIyIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTkyMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSIxMDExIgogICAgIGlua3NjYXBlOndpbmRvdy14PSIxOTIwIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIzMiIKICAgICBpbmtzY2FwZTp3aW5kb3ctbWF4aW1pemVkPSIxIgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImxheWVyMSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9ImdyaWQxIgogICAgICAgdW5pdHM9InB4IgogICAgICAgb3JpZ2lueD0iMCIKICAgICAgIG9yaWdpbnk9IjAiCiAgICAgICBzcGFjaW5neD0iMC4yNjQ1ODMzMyIKICAgICAgIHNwYWNpbmd5PSIwLjI2NDU4MzMzIgogICAgICAgZW1wY29sb3I9IiMwMDk5ZTUiCiAgICAgICBlbXBvcGFjaXR5PSIwLjMwMTk2MDc4IgogICAgICAgY29sb3I9IiMwMDk5ZTUiCiAgICAgICBvcGFjaXR5PSIwLjE0OTAxOTYxIgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIGRvdHRlZD0iZmFsc2UiCiAgICAgICBncmlkYW5nbGV4PSIzMCIKICAgICAgIGdyaWRhbmdsZXo9IjMwIgogICAgICAgdmlzaWJsZT0idHJ1ZSIgLz4KICA8L3NvZGlwb2RpOm5hbWVkdmlldz4KICA8ZGVmcwogICAgIGlkPSJkZWZzMSIgLz4KICA8ZwogICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgIGlua3NjYXBlOmdyb3VwbW9kZT0ibGF5ZXIiCiAgICAgaWQ9ImxheWVyMSI+CiAgICA8cGF0aAogICAgICAgaWQ9InBhdGgyIgogICAgICAgc3R5bGU9ImZpbGw6IzMzYzI1NTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6Mi42NzAxMztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiCiAgICAgICBkPSJNIDEzNy41ODM5OCAxNDguMTY2MDIgQSAxMTYuNDE2NzcgMTE2LjQxNjc3IDAgMCAwIDIxLjE2NjAxNiAyNjQuNTgzOTggQSAxMTYuNDE2NzcgMTE2LjQxNjc3IDAgMCAwIDEzNy41ODM5OCAzODEgQSAxMTYuNDE2NzcgMTE2LjQxNjc3IDAgMCAwIDI1NCAyNjQuNTgzOTggQSAxMTYuNDE2NzcgMTE2LjQxNjc3IDAgMCAwIDEzNy41ODM5OCAxNDguMTY2MDIgeiBNIDg5LjUzOTA2MiAxODIuMTkxNDEgQSAzNC4zNDgwNyAzNC4zNDgwNyAwIDAgMSAxMjMuODg2NzIgMjE2LjUzOTA2IEEgMzQuMzQ4MDcgMzQuMzQ4MDcgMCAwIDEgODkuNTM5MDYyIDI1MC44ODY3MiBBIDM0LjM0ODA3IDM0LjM0ODA3IDAgMCAxIDU1LjE5MTQwNiAyMTYuNTM5MDYgQSAzNC4zNDgwNyAzNC4zNDgwNyAwIDAgMSA4OS41MzkwNjIgMTgyLjE5MTQxIHogTSAxODUuNTE5NTMgMTgyLjQwNjI1IEEgMzQuMjQwMjMxIDM0LjI0MDIzMSAwIDAgMSAyMTkuNzU5NzcgMjE2LjY0NjQ4IEEgMzQuMjQwMjMxIDM0LjI0MDIzMSAwIDAgMSAxODUuNTE5NTMgMjUwLjg4NjcyIEEgMzQuMjQwMjMxIDM0LjI0MDIzMSAwIDAgMSAxNTEuMjc5MyAyMTYuNjQ2NDggQSAzNC4yNDAyMzEgMzQuMjQwMjMxIDAgMCAxIDE4NS41MTk1MyAxODIuNDA2MjUgeiBNIDkzLjc1IDMwMS42MjUgTCAxODEuNDE2MDIgMzAxLjYyNSBDIDE4NC4zNDc2IDMwMS42MjUgMTg2LjcwODk4IDMwMy45ODQ0NCAxODYuNzA4OTggMzA2LjkxNjAyIEMgMTg2LjcwODk4IDMwOS44NDc2IDE4NC4zNDc2IDMxMi4yMDg5OCAxODEuNDE2MDIgMzEyLjIwODk4IEwgOTMuNzUgMzEyLjIwODk4IEMgOTAuODE4NDIgMzEyLjIwODk4IDg4LjQ1ODk4NCAzMDkuODQ3NiA4OC40NTg5ODQgMzA2LjkxNjAyIEMgODguNDU4OTg0IDMwMy45ODQ0NCA5MC44MTg0MiAzMDEuNjI1IDkzLjc1IDMwMS42MjUgeiAiIC8+CiAgICA8Y2lyY2xlCiAgICAgICBzdHlsZT0iZmlsbDojZmYwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDowLjA5MTAyNzI7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kIgogICAgICAgaWQ9InBhdGgyLTUtNyIKICAgICAgIGN4PSIxNDAuMzM3MTMiCiAgICAgICBjeT0iMTcxLjk3OTE2IgogICAgICAgcj0iMy45Njg3NTEiIC8+CiAgICA8Y2lyY2xlCiAgICAgICBzdHlsZT0iZmlsbDojMzNjMjU1O2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDowLjI0Mjc0O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZCIKICAgICAgIGlkPSJwYXRoMi01IgogICAgICAgY3g9IjEwNS44MzMzMyIKICAgICAgIGN5PSIyMDEuMDgzMzEiCiAgICAgICByPSIxMC41ODMzMzUiIC8+CiAgICA8Y2lyY2xlCiAgICAgICBzdHlsZT0iZmlsbDojMzNjMjU1O2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDowLjI0Mjc0O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZCIKICAgICAgIGlkPSJwYXRoMi01LTIiCiAgICAgICBjeD0iMTY5LjMzMzMzIgogICAgICAgY3k9IjIwMS4wODMzMSIKICAgICAgIHI9IjEwLjU4MzMzNSIgLz4KICAgIDxlbGxpcHNlCiAgICAgICBzdHlsZT0iZmlsbDojMzNjMjU1O2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoyLjk3MTIxO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZCIKICAgICAgIGlkPSJwYXRoMyIKICAgICAgIGN4PSIzMjIuNzkxNjYiCiAgICAgICBjeT0iNTguNTE3NDQ4IgogICAgICAgcng9IjE1Ljg3NTAwNiIKICAgICAgIHJ5PSIxNi4xODQxMTYiIC8+CiAgICA8cmVjdAogICAgICAgc3R5bGU9ImZpbGw6IzMzYzI1NTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6Mi40MDMwNTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiCiAgICAgICBpZD0icmVjdDMiCiAgICAgICB3aWR0aD0iMTQ3LjM1OTM4IgogICAgICAgaGVpZ2h0PSIxMy4xMzQ2NiIKICAgICAgIHg9IjMwMy44MzMwMSIKICAgICAgIHk9Ii0xMTcuMDg0MjQiCiAgICAgICB0cmFuc2Zvcm09InJvdGF0ZSgzMCkiCiAgICAgICByeD0iNi41NjczMjk5IgogICAgICAgcnk9IjYuNTY3MzI5OSIgLz4KICAgIDxyZWN0CiAgICAgICBzdHlsZT0iZmlsbDojZmYwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoyLjEyNjg7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kIgogICAgICAgaWQ9InJlY3Q0IgogICAgICAgd2lkdGg9IjkzLjc4NTc1OSIKICAgICAgIGhlaWdodD0iMy43NTE0MzAzIgogICAgICAgeD0iMTMuMDEyNTUzIgogICAgICAgeT0iMjE5LjgzMjQzIgogICAgICAgaW5rc2NhcGU6dHJhbnNmb3JtLWNlbnRlci14PSIzNS42NTc2MDEiCiAgICAgICBpbmtzY2FwZTp0cmFuc2Zvcm0tY2VudGVyLXk9IjI2LjMwMDkzMSIKICAgICAgIHRyYW5zZm9ybT0icm90YXRlKC0zNi4wOTY2NSkiIC8+CiAgICA8ZwogICAgICAgaWQ9ImczIgogICAgICAgaW5rc2NhcGU6dHJhbnNmb3JtLWNlbnRlci14PSI1MS43NjI5ODkiCiAgICAgICBpbmtzY2FwZTp0cmFuc2Zvcm0tY2VudGVyLXk9IjE4LjYyOTY5NSIKICAgICAgIHRyYW5zZm9ybT0icm90YXRlKC0zNS41MzcxNzIsMzIzLjAwNDYyLDQ5LjcwNzc0NSkiPgogICAgICA8cmVjdAogICAgICAgICBzdHlsZT0iZmlsbDojMzNjMjU1O2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoyLjk5NDE4O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZCIKICAgICAgICAgaWQ9InJlY3QyIgogICAgICAgICB3aWR0aD0iMTI2Ljk5OTk4IgogICAgICAgICBoZWlnaHQ9IjQyLjMzMzMzMiIKICAgICAgICAgeD0iMjExLjY2NjY2IgogICAgICAgICB5PSIxMC41ODMzMzMiCiAgICAgICAgIHJ4PSIxMC4zODAzMTIiCiAgICAgICAgIHJ5PSIxMC4yOTg2NzkiIC8+CiAgICAgIDxyZWN0CiAgICAgICAgIHN0eWxlPSJmaWxsOiMzM2MyNTU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjAuODY0MzQ0O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZCIKICAgICAgICAgaWQ9InJlY3QyLTciCiAgICAgICAgIHdpZHRoPSI0Mi4zMzMzMjQiCiAgICAgICAgIGhlaWdodD0iMTAuNTgzMzMzIgogICAgICAgICB4PSIxOTAuNSIKICAgICAgICAgeT0iMzcuMDQxNjY0IgogICAgICAgICByeD0iMy40NjAxMDM4IgogICAgICAgICByeT0iMi41NzQ2NzAxIiAvPgogICAgPC9nPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMyY2E5NDk7c3Ryb2tlLXdpZHRoOjYuNTc5ODY7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBpZD0icGF0aDQiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzb2RpcG9kaTpjeD0iODkuNTM5NDY3IgogICAgICAgc29kaXBvZGk6Y3k9IjIxNi4wNjgzMSIKICAgICAgIHNvZGlwb2RpOnJ4PSIzNC44MTg0MDkiCiAgICAgICBzb2RpcG9kaTpyeT0iMzQuODE4NDA5IgogICAgICAgc29kaXBvZGk6c3RhcnQ9IjAiCiAgICAgICBzb2RpcG9kaTplbmQ9IjMuMTQxNTkyNyIKICAgICAgIHNvZGlwb2RpOm9wZW49InRydWUiCiAgICAgICBzb2RpcG9kaTphcmMtdHlwZT0iYXJjIgogICAgICAgZD0ibSAxMjQuMzU3ODgsMjE2LjA2ODMxIGEgMzQuODE4NDA5LDM0LjgxODQwOSAwIDAgMSAtMTcuNDA5MjEsMzAuMTUzNjMgMzQuODE4NDA5LDM0LjgxODQwOSAwIDAgMSAtMzQuODE4NDA5LDAgMzQuODE4NDA5LDM0LjgxODQwOSAwIDAgMSAtMTcuNDA5MjAzLC0zMC4xNTM2MyIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMmNhOTQ5O3N0cm9rZS13aWR0aDo2LjU3OTg2O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utb3BhY2l0eToxIgogICAgICAgaWQ9InBhdGg0LTkiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzb2RpcG9kaTpjeD0iMTg1LjYzMDkxIgogICAgICAgc29kaXBvZGk6Y3k9IjIxNi45NTgzMyIKICAgICAgIHNvZGlwb2RpOnJ4PSIzNC44MTg0MDkiCiAgICAgICBzb2RpcG9kaTpyeT0iMzQuODE4NDA5IgogICAgICAgc29kaXBvZGk6c3RhcnQ9IjAiCiAgICAgICBzb2RpcG9kaTplbmQ9IjMuMTQxNTkyNyIKICAgICAgIHNvZGlwb2RpOm9wZW49InRydWUiCiAgICAgICBzb2RpcG9kaTphcmMtdHlwZT0iYXJjIgogICAgICAgZD0ibSAyMjAuNDQ5MzEsMjE2Ljk1ODMzIGEgMzQuODE4NDA5LDM0LjgxODQwOSAwIDAgMSAtMTcuNDA5MiwzMC4xNTM2MyAzNC44MTg0MDksMzQuODE4NDA5IDAgMCAxIC0zNC44MTg0MSwtMWUtNSAzNC44MTg0MDksMzQuODE4NDA5IDAgMCAxIC0xNy40MDkyLC0zMC4xNTM2MiIgLz4KICAgIDxnCiAgICAgICBpZD0iZzEwIj4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzJjYTk0OTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0ibSA1OC4yMDgzMywyMDEuMDgzMzIgaCAxMC41ODMzMzMgbCAxMC41ODMzMzMsLTUuMjkxNjYiCiAgICAgICAgIGlkPSJwYXRoNSIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzJjYTk0OTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0ibSA2OC43OTE2NjMsMjAxLjA4MzMyIDEwLjU4MzMzMyw1LjI5MTY3IDEwLjU4MzMzMywtNS4yOTE2NyIKICAgICAgICAgaWQ9InBhdGg2IiAvPgogICAgICA8cGF0aAogICAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMmNhOTQ5O3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJtIDYzLjQ5OTk5NywyMzIuODMzMzIgNS4yOTE2NjYsLTEwLjU4MzMzIDE1Ljg3NDk5OSw1LjI5MTY2IC01LjI5MTY2NiwtMTUuODc0OTkiCiAgICAgICAgIGlkPSJwYXRoNyIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzJjYTk0OTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0ibSA4NC42NjY2NjIsMjI3LjU0MTY1IDUuMjkxNjY3LC01LjI5MTY2IgogICAgICAgICBpZD0icGF0aDgiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMyY2E5NDk7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICAgIGQ9Im0gMTAwLjU0MTY2LDI0OC43MDgzMiB2IC0xMC41ODMzMyBsIC0xMC41ODMzMzEsLTUuMjkxNjcgNS4yOTE2NjYsLTEwLjU4MzMzIgogICAgICAgICBpZD0icGF0aDkiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMyY2E5NDk7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICAgIGQ9Im0gMTAwLjU0MTY2LDIzOC4xMjQ5OSA1LjI5MTY3LC01LjI5MTY3IHYgLTEwLjU4MzMzIgogICAgICAgICBpZD0icGF0aDEwIiAvPgogICAgPC9nPgogICAgPGcKICAgICAgIGlkPSJnMTAtOSIKICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KC0xLDAsMCwxLDI3NS4xNjY2NSwtMS42ODI1MTA0ZS02KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMyY2E5NDk7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICAgIGQ9Im0gNTguMjA4MzMsMjAxLjA4MzMyIGggMTAuNTgzMzMzIGwgMTAuNTgzMzMzLC01LjI5MTY2IgogICAgICAgICBpZD0icGF0aDUtNyIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzJjYTk0OTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0ibSA2OC43OTE2NjMsMjAxLjA4MzMyIDEwLjU4MzMzMyw1LjI5MTY3IDEwLjU4MzMzMywtNS4yOTE2NyIKICAgICAgICAgaWQ9InBhdGg2LTMiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMyY2E5NDk7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICAgIGQ9Im0gNjMuNDk5OTk3LDIzMi44MzMzMiA1LjI5MTY2NiwtMTAuNTgzMzMgMTUuODc0OTk5LDUuMjkxNjYgLTUuMjkxNjY2LC0xNS44NzQ5OSIKICAgICAgICAgaWQ9InBhdGg3LTYiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMyY2E5NDk7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICAgIGQ9Im0gODQuNjY2NjYyLDIyNy41NDE2NSA1LjI5MTY2NywtNS4yOTE2NiIKICAgICAgICAgaWQ9InBhdGg4LTEiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMyY2E5NDk7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICAgIGQ9Im0gMTAwLjU0MTY2LDI0OC43MDgzMiB2IC0xMC41ODMzMyBsIC0xMC41ODMzMzEsLTUuMjkxNjcgNS4yOTE2NjYsLTEwLjU4MzMzIgogICAgICAgICBpZD0icGF0aDktMiIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzJjYTk0OTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0ibSAxMDAuNTQxNjYsMjM4LjEyNDk5IDUuMjkxNjcsLTUuMjkxNjcgdiAtMTAuNTgzMzMiCiAgICAgICAgIGlkPSJwYXRoMTAtOSIgLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo=" width="400" height="400" class="img_ev3q"></p>
<p>Bem... Ele não vai ser o usuário verdadeiro se o usuário nem existir né?</p>
<p>Podemos verificar isso tentando pegar do banco o salt e hash.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">salt</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">hash</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> get_user_auth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">username</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> salt </span><span class="token keyword" style="color:#00009f">or</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> </span><span class="token builtin">hash</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">raise</span><span class="token plain"> Exception</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Invalid user&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Agora vem a parte fácil... Validar se a senha que ele passou está certa! Basta calcular o hash usando a senha que nos passaram.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> sha256</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">password </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> salt</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">hexdigest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token builtin">hash</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">raise</span><span class="token plain"> Exception</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Wrong password&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Fim!</p>
<p>Principalmente porque não pretendo cobrir a fundo assuntos como cookies e tokens. Mas tudo coberto já da um ótimo início para entender autenticação/login/cadastro/etc.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Link direto para References" title="Link direto para References">​</a></h2>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Authorization" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Authorization</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type</a></li>
<li><a href="https://www.w3schools.com/tags/att_form_enctype.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/tags/att_form_enctype.asp</a></li>
</ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Marcadores:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pt-br/blog/tags/authentication">authentication</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pt-br/blog/tags/auth">auth</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pt-br/blog/tags/python">python</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pt-br/blog/tags/user">user</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pt-br/blog/tags/username">username</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pt-br/blog/tags/password">password</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pt-br/blog/tags/duckdb">duckdb</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pt-br/blog/tags/starlette">starlette</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="No post anterior vimos como fazer authenticação com usuário e senha."><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/pt-br/blog/2024/05/11/auth-email-password">Authentication - email &amp; password</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-05-11T00:00:00.000Z" itemprop="datePublished">11 de maio de 2024</time></div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/thiagola92" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="/img/dino.svg" alt="Thiago Lages de Alencar" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/thiagola92" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Thiago Lages de Alencar</span></a></div><small class="avatar__subtitle" itemprop="description">Desenvolvedor de Software</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>No post anterior vimos como fazer <a href="/pt-br/blog/2024/05/25/auth-username-password">authenticação com usuário e senha</a>.<br>
<!-- -->Agora vamos ver com email e senha, basicamente igual ao outro porém email é o identificador da conta.</p>
<p>Precisaremos de um servidor de email para receber email:</p>
<ul>
<li><a href="https://aiosmtpd.aio-libs.org/en/latest/" target="_blank" rel="noopener noreferrer">aiosmtpd</a></li>
</ul>
<p>No lado do server utilizaremos:</p>
<ul>
<li><a href="https://duckdb.org/" target="_blank" rel="noopener noreferrer">DuckDB</a> como banco de dados</li>
<li><a href="https://www.starlette.io/" target="_blank" rel="noopener noreferrer">Starlette</a> como RESTful API</li>
</ul>
<p>No lado do client utilizaremos:</p>
<ul>
<li><a href="https://www.python-httpx.org/" target="_blank" rel="noopener noreferrer">httpx</a> para fazer requisições</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="questions">Questions<a href="#questions" class="hash-link" aria-label="Link direto para Questions" title="Link direto para Questions">​</a></h2>
<blockquote>
<p>Qual a vantagem de ter o email como identificador?</p>
</blockquote>
<p>Uma segunda maneira de confirmar autenticação.</p>
<p>Para alguém acessar a conta, ela tem que provar que sabe a senha (vulgo botar a senha na hora de logar).<br>
<!-- -->Agora podemos cobrar que ela prove ser a dona da email (mandamos uma mensagem para o email dela e ela diz para a gente o conteúdo do email).</p>
<p>Em outras palavras, se uma pessoa tem a senha e tem acesso ao email que criou a conta, então ela é a dona da conta.</p>
<blockquote>
<p>Como que falar o conteúdo do email vai provar algo?</p>
</blockquote>
<p>Vamos dizer que a pessoa pede para mudar a senha da conta.</p>
<ul>
<li>Nós mandamos um email com um código especial e aleatório para ao email dela</li>
<li>Ela acessa o email e pega o código (por exemplo: <code>982jd8fsj83</code>)</li>
<li>A pessoa manda o código para o site e a senha nova</li>
<li>Nós conferimos se o código que a pessoa nos mandou era o que esperavamos, se for mudamos a senha</li>
</ul>
<p>Essa é apenas uma maneira de implementar isto, outra maneira mais conhecida é:</p>
<ul>
<li>Enviamos um email com uma URL do site gerada aleatóriamente</li>
<li>Usuário acessa o URL</li>
<li>Levamos o usuário para a área de trocar a senha<!-- -->
<ul>
<li>Pois a pessoa provou que ela entrou no email e conseguiu o URL único</li>
<li>Nesse caso podemos também fazer verificação se ela estava logada na conta que esperava esse URL</li>
</ul>
</li>
</ul>
<p>Iremos pela primeira maneira.</p>
<blockquote>
<p>O que ganhamos com isso?</p>
</blockquote>
<p>O famoso botão &quot;recupere sua senha&quot;.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="email-server">Email server<a href="#email-server" class="hash-link" aria-label="Link direto para Email server" title="Link direto para Email server">​</a></h2>
<p>Para não termos que configurar o seu provedor de email ou criar um código onde você passa credenciais reais do seu provedor, vamos levantar um na própria máquina.</p>
<p>Script para preparar o diretório do provedor de email:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir email_server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd email_server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python3 -m venv venv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">. venv/bin/activate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pip install aiosmtpd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Para ligar o provedor de email:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python -m aiosmtpd -n</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="server">Server<a href="#server" class="hash-link" aria-label="Link direto para Server" title="Link direto para Server">​</a></h2>
<p>Script para preparar o diretório dos exemplos:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python3 -m venv venv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">. venv/bin/activate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pip install duckdb starlette uvicorn pytz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">touch main.py auth.py database.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="server---database-operations">Server - Database Operations<a href="#server---database-operations" class="hash-link" aria-label="Link direto para Server - Database Operations" title="Link direto para Server - Database Operations">​</a></h3>
<p>Alteraremos as operações do post anterior para usarem email em vez de usuário.</p>
<p>E adicionaremos 4 operações ao banco no nosso código:</p>
<ul>
<li>Criar código de recuperação de conta</li>
<li>Validar o código de recuperação<!-- -->
<ul>
<li>Isso inclui ver se o usuário está passando o código dentro de um tempo limite</li>
</ul>
</li>
<li>Remover código de recuperação</li>
<li>Alterar senha</li>
</ul>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">database.py</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> datetime </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> datetime</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> timedelta</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> duckdb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cursor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> duckdb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;users.db&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cursor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        CREATE SEQUENCE IF NOT EXISTS user_id_sequence START 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    &quot;&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cursor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        CREATE TABLE IF NOT EXISTS users (</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            id      integer     primary key     default nextval(&#x27;user_id_sequence&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            email   text        not null        unique,</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            salt    text        not null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            hash    text        not null</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    &quot;&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cursor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        CREATE TABLE IF NOT EXISTS recovery_codes (</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            email   text        primary key     not null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            code    text        not null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            time    timestamp</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    &quot;&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get_user_auth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">email</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">tuple</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cursor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> duckdb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;users.db&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cursor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;SELECT salt, hash FROM users WHERE email = $email&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;email&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fetchone</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">create_user</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">email</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> salt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">hash</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cursor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> duckdb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;users.db&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cursor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        INSERT INTO users (email, salt, hash) VALUES</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            ($email, $salt, $hash)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        &quot;&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;email&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;salt&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> salt</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hash&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">hash</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">create_recovery_code</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">email</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> code</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cursor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> duckdb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;users.db&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cursor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        INSERT INTO recovery_codes (email, code, time) VALUES</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            ($email, $code, current_timestamp)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        ON CONFLICT (email) DO UPDATE</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            SET code = EXCLUDED.code</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        &quot;&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;email&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;code&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> code</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">is_recovery_code_valid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">email</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> code</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cursor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> duckdb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;users.db&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cursor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        SELECT email, code, time, current_timestamp</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        FROM recovery_codes</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        WHERE email = $email AND code = $code</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        &quot;&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;email&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;code&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> code</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fetchone</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    created</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> datetime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    now</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> datetime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    now </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> now</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">replace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tzinfo</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    diff</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> timedelta </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> created </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> now</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Válido por uma hora</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> diff</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">total_seconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3600</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">delete_recovery_code</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">email</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cursor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> duckdb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;users.db&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cursor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        DELETE FROM recovery_codes WHERE email = $email</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        &quot;&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;email&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">change_account</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">email</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> salt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">hash</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cursor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> duckdb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;users.db&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cursor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        UPDATE users</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        SET salt = $salt,</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            hash = $hash</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        WHERE email = $email</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        &quot;&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;email&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;salt&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> salt</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hash&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">hash</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="server---authentication">Server - Authentication<a href="#server---authentication" class="hash-link" aria-label="Link direto para Server - Authentication" title="Link direto para Server - Authentication">​</a></h3>
<p>Igual post anterior porém trocamos usuário por email.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">auth.py</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> base64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> hashlib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> binascii</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> starlette</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">authentication </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AuthenticationBackend</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AuthenticationError</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AuthCredentials</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SimpleUser</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> starlette</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">requests </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> HTTPConnection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> database </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> get_user_auth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">AuthBackend</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">AuthenticationBackend</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">authenticate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> conn</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HTTPConnection</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># No authroization, no access</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Authorization&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> conn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">headers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> conn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">headers</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;Authorization&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scheme</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> credentials </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">split</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Wrong authorization scheme</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> scheme</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lower</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;basic&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Extract email and password from credentials</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        credentials </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> base64</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">b64decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">credentials</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        credentials </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> credentials</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> password </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> credentials</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">partition</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Get real hash from database</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        salt</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">hash</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> get_user_auth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">email</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> salt </span><span class="token keyword" style="color:#00009f">or</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> </span><span class="token builtin">hash</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">raise</span><span class="token plain"> AuthenticationError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Invalid credentails&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Generate guess of hash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        password </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> password</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        salt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> binascii</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">a2b_hex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">salt</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        guess </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> hashlib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">scrypt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">password</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> salt</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">salt</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> n</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> r</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        guess </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> binascii</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">b2a_hex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">guess</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        guess </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> guess</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Check if the hash guess is the same as real hash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token builtin">hash</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> guess</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">raise</span><span class="token plain"> AuthenticationError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Wrong password&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> AuthCredentials</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;authenticated&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SimpleUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">email</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="server---main">Server - Main<a href="#server---main" class="hash-link" aria-label="Link direto para Server - Main" title="Link direto para Server - Main">​</a></h3>
<p>Trocamos usuário por email e adicionamos dois 2 endpoints novos:</p>
<ul>
<li>Pedir o código de recuperação</li>
<li>Mudar a senha da conta</li>
</ul>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">main.py</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> hashlib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> binascii</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> secrets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> smtplib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> urllib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">parse </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> parse_qs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">message </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> EmailMessage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> starlette</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">applications </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Starlette</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> starlette</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">responses </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> PlainTextResponse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> starlette</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">requests </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> starlette</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">routing </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Route</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> starlette</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">middleware </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Middleware</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> starlette</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">middleware</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">authentication </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> AuthenticationMiddleware</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> starlette</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">authentication </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> requires</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> auth </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> AuthBackend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">register</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Request</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Refuse if not in the right format</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">headers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Content-Type&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;application/x-www-form-urlencoded&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> PlainTextResponse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Invalid body format&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">400</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Break down body</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">body</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> body</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fields </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> parse_qs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">body</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Body must have username and password</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> fields </span><span class="token keyword" style="color:#00009f">or</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> fields</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> PlainTextResponse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Missing username or password&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">400</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Get username and password</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    email </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fields</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    password </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fields</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Found user with this email</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> database</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_user_auth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">email</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> PlainTextResponse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;User already exist&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">403</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Create salt and password hash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    salt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">urandom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    password </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> password</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">hash</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> hashlib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">scrypt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">password</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> salt</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">salt</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> n</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> r</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    salt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> binascii</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">b2a_hex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">salt</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">hash</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> binascii</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">b2a_hex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">hash</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    database</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_user</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> salt</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">hash</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> PlainTextResponse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;User created&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">recover_account</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Request</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Get email in body</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    email </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">body</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    email </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Didn&#x27;t find user with this email</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> database</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_user_auth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">email</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> PlainTextResponse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;No account with this email&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">403</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Create recovery code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    code </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> secrets</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">token_urlsafe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Save to database, so we can check it later</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    database</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_recovery_code</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> code</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Create email</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> EmailMessage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;Subject&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Recover account&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;From&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;server@localhost&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;To&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> email</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;Content&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Send email</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> smtplib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SMTP</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;localhost&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8025</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">send_message</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">quit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> PlainTextResponse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Recovery code sent to your email&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">change_account</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Request</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Break down body</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">body</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> body</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fields </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> parse_qs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">body</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Body must have email, code and password</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;email&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> fields </span><span class="token keyword" style="color:#00009f">or</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;code&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> fields </span><span class="token keyword" style="color:#00009f">or</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> fields</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> PlainTextResponse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Missing email or password&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">400</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Get email, recovery code and new password</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    email </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fields</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;email&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    code </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fields</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;code&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    password </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fields</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> email </span><span class="token keyword" style="color:#00009f">or</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> code </span><span class="token keyword" style="color:#00009f">or</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> PlainTextResponse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Missing email/code/password&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">400</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> database</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">is_recovery_code_valid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> code</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> PlainTextResponse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Invalid code&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">403</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Create salt and new password hash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    salt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">urandom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    password </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> password</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">hash</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> hashlib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">scrypt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">password</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> salt</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">salt</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> n</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> r</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    salt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> binascii</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">b2a_hex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">salt</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">hash</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> binascii</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">b2a_hex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">hash</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Change password and remove recovery code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    database</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">change_account</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> salt</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">hash</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    database</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">delete_recovery_code</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">email</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> PlainTextResponse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Password changed&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Needs to be authenticated to receive this response</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@requires</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;authenticated&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">content</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Request</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> PlainTextResponse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Private content&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">database</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Starlette</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    debug</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    routes</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Route</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> content</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Route</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/register&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> register</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> methods</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;post&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Route</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/recover_account&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> recover_account</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> methods</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;post&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Route</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/change_account&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> change_account</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> methods</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;post&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    middleware</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Middleware</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">AuthenticationMiddleware</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> backend</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">AuthBackend</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Agora podemos iniciar o server com:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">uvicorn --reload main:app</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="client">Client<a href="#client" class="hash-link" aria-label="Link direto para Client" title="Link direto para Client">​</a></h2>
<p>Script para preparar o diretório dos exemplos:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python3 -m venv venv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">. venv/bin/activate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pip install httpx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">touch content.py register.py recover_account.py change_account.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="client---access-content">Client - Access Content<a href="#client---access-content" class="hash-link" aria-label="Link direto para Client - Access Content" title="Link direto para Client - Access Content">​</a></h3>
<p>Mesmo que o post anterior porém trocando usuário por email.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">content.py</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> sys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> httpx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> base64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Get username and password from command line</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">username </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">argv</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">password </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">argv</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Setup credentials string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">credentials </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#e3116c">f&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">username</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">:</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">password</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">credentials </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> credentials</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">credentials </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> base64</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">b64encode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">credentials</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">credentials </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> credentials</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Get content</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> httpx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://127.0.0.1:8000/&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> headers</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;Authorization&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Basic </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">credentials</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Execute o código para testar obter o conteúdo do sistema:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python content.py username@email.com password</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Se você ainda não escreveu o código de registar, isto deve estar proibindo você de ver o conteúdo da página.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="client---register-user">Client - Register User<a href="#client---register-user" class="hash-link" aria-label="Link direto para Client - Register User" title="Link direto para Client - Register User">​</a></h3>
<p>Mesmo que o post anterior porém trocando usuário por email.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">register.py</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> sys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> httpx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> urllib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">parse </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> urlencode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Get email and password from command line</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">email </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">argv</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">password </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">argv</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Setup body string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">body </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> urlencode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;email&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> password</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Register user</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> httpx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;http://127.0.0.1:8000/register&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    headers</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;Content-Type&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;application/x-www-form-urlencoded&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    content</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">body</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Execute o código para registar seu email e senha:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python register.py username@email.com password</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Agora se executar novamente o código de pegar conteúdo, deve conseguir ler o conteúdo da página.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python content.py username@email.com password</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="client---recover-account">Client - Recover Account<a href="#client---recover-account" class="hash-link" aria-label="Link direto para Client - Recover Account" title="Link direto para Client - Recover Account">​</a></h3>
<p>Nosso endpoint de requisitar senha só precisa do email, então esse código é o mais curto que veremos.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">recover_account.py</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> sys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> httpx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Get email from command line</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">email </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">argv</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">content </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#e3116c">f&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">email</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Request recovery code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> httpx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://127.0.0.1:8000/recover_account&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> content</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">content</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Execute o código para requisitar um email com o código de recuperação:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python recover_account.py username@email.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Olhe no terminal que está executando o server de email, nele você deve receber um email com o código.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="client---change-account">Client - Change Account<a href="#client---change-account" class="hash-link" aria-label="Link direto para Client - Change Account" title="Link direto para Client - Change Account">​</a></h3>
<p>Agora podemos cobrar do usuário o código de recuperação ao mesmo tempo que a nova senha.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">change_account.py</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> sys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> httpx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> urllib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">parse </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> urlencode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Get email, code and new password from command line</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">email </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">argv</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">code </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">argv</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">password </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">argv</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Setup body string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">body </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> urlencode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;email&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;code&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> code</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> password</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Change account password</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> httpx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://127.0.0.1:8000/change_account&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> content</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">body</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Após receber o código, execute este código para trocar a senha e lembre de informar o código de recuperação visto no servidor de email:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python change_account.py username@email.com fasdfasfasdfasdf new_password</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Tente acessar o conteúdo da página com a senha velha e veja falhar.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python content.py username@email.com password</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Tente acessar o conteúdo da página com a senha nova e veja o conteúdo privido.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python content.py username@email.com new_password</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Marcadores:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pt-br/blog/tags/authentication">authentication</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pt-br/blog/tags/auth">auth</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pt-br/blog/tags/python">python</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pt-br/blog/tags/email">email</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pt-br/blog/tags/mail">mail</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pt-br/blog/tags/password">password</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pt-br/blog/tags/duckdb">duckdb</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pt-br/blog/tags/starlette">starlette</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pt-br/blog/tags/aiosmtpd">aiosmtpd</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="No post anterior declarei que busquei por um tempo uma interface gráfica (GUI) para MongoDB porém não fiquei satisfeita com nenhuma."><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/pt-br/blog/2023/10/09/mondot">Mondot</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-10-09T00:00:00.000Z" itemprop="datePublished">9 de outubro de 2023</time></div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/thiagola92" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="/img/dino.svg" alt="Thiago Lages de Alencar" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/thiagola92" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Thiago Lages de Alencar</span></a></div><small class="avatar__subtitle" itemprop="description">Desenvolvedor de Software</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>No <a href="/pt-br/blog/2023/09/22/mongodb-gui">post anterior</a> declarei que busquei por um tempo uma interface gráfica (GUI) para <a href="https://www.mongodb.com/" target="_blank" rel="noopener noreferrer">MongoDB</a> porém não fiquei satisfeita com nenhuma.</p>
<p>Neste post vou falar do desenvolvimento do <a href="https://github.com/thiagola92/Mondot" target="_blank" rel="noopener noreferrer">Mondot</a>, interface gráfica para o banco MongoDB.</p>
<blockquote>
<p>Por favor, levar em conta que eu posso tomar decisões ruins 🤣</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="reason">Reason<a href="#reason" class="hash-link" aria-label="Link direto para Reason" title="Link direto para Reason">​</a></h2>
<p>Em 2021, eu tinha duas coisas em mente:</p>
<ul>
<li>Nenhuma GUI de Mongo me agrada</li>
<li>Quero aprender <a href="https://godotengine.org/" target="_blank" rel="noopener noreferrer">Godot</a></li>
</ul>
<p>Bastou essas duas coisas para eu querer começar este projeto.<br>
<!-- -->Eu não queria fazer a melhor GUI do mundo, eu queria me divertir com Godot ao mesmo tempo que resolvia um incomodo que eu tinha com GUIs.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="start">Start<a href="#start" class="hash-link" aria-label="Link direto para Start" title="Link direto para Start">​</a></h2>
<p>Abri o Godot, comecei a criar containers, janelas, botões, etc. Dias depois me veio a pergunta:</p>
<blockquote>
<p>Como diabos eu vou me comunicar com o Mongo?</p>
</blockquote>
<p><img loading="lazy" alt="Rosto de idiota com o olhar torto para fora" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iMjQwIgogICBoZWlnaHQ9IjI0MCIKICAgdmlld0JveD0iMCAwIDgwIDgwIgogICB2ZXJzaW9uPSIxLjEiCiAgIGlkPSJzdmcxIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIxLjMgKDE6MS4zKzIwMjMwNzIzMTQ1OSswZTE1MGVkNmM0KSIKICAgc29kaXBvZGk6ZG9jbmFtZT0ib2hfY3JhcC5zdmciCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJuYW1lZHZpZXcxIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzExMTExMSIKICAgICBib3JkZXJvcGFjaXR5PSIxIgogICAgIGlua3NjYXBlOnNob3dwYWdlc2hhZG93PSJmYWxzZSIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMCIKICAgICBpbmtzY2FwZTpwYWdlY2hlY2tlcmJvYXJkPSIxIgogICAgIGlua3NjYXBlOmRlc2tjb2xvcj0iI2FmYWZhZiIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgbGFiZWxzdHlsZT0iZGVmYXVsdCIKICAgICBpbmtzY2FwZTp6b29tPSI1LjgxNTQ4ODEiCiAgICAgaW5rc2NhcGU6Y3g9IjEyOS4yMjM4OSIKICAgICBpbmtzY2FwZTpjeT0iMTMwLjE2OTY0IgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTkyMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSIxMDE2IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIxOTIwIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIyNyIKICAgICBpbmtzY2FwZTp3aW5kb3ctbWF4aW1pemVkPSIxIgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImxheWVyMSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9ImdyaWQxIgogICAgICAgdW5pdHM9InB4IgogICAgICAgb3JpZ2lueD0iMCIKICAgICAgIG9yaWdpbnk9IjAiCiAgICAgICBzcGFjaW5neD0iMSIKICAgICAgIHNwYWNpbmd5PSIxIgogICAgICAgZW1wY29sb3I9IiMwMDk5ZTUiCiAgICAgICBlbXBvcGFjaXR5PSIwLjMwMTk2MDc4IgogICAgICAgY29sb3I9IiMwMDk5ZTUiCiAgICAgICBvcGFjaXR5PSIwLjE0OTAxOTYxIgogICAgICAgZW1wc3BhY2luZz0iOCIKICAgICAgIGRvdHRlZD0iZmFsc2UiCiAgICAgICBncmlkYW5nbGV4PSIzMCIKICAgICAgIGdyaWRhbmdsZXo9IjMwIgogICAgICAgdmlzaWJsZT0idHJ1ZSIgLz4KICA8L3NvZGlwb2RpOm5hbWVkdmlldz4KICA8ZGVmcwogICAgIGlkPSJkZWZzMSIgLz4KICA8ZwogICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgIGlua3NjYXBlOmdyb3VwbW9kZT0ibGF5ZXIiCiAgICAgaWQ9ImxheWVyMSI+CiAgICA8cGF0aAogICAgICAgaWQ9InBhdGgxIgogICAgICAgc3R5bGU9ImZpbGw6IzNlY2M1ZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6MS40NDI2O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpiZXZlbCIKICAgICAgIGQ9Ik0gNDAgOCBBIDMyIDMyIDAgMCAwIDggNDAgQSAzMiAzMiAwIDAgMCA0MCA3MiBBIDMyIDMyIDAgMCAwIDcyIDQwIEEgMzIgMzIgMCAwIDAgNDAgOCB6IE0gMjcgMTYgQSA4IDggMCAwIDEgMzUgMjQgQSA4IDggMCAwIDEgMjcgMzIgQSA4IDggMCAwIDEgMTkgMjQgQSA4IDggMCAwIDEgMjcgMTYgeiBNIDUzIDE2IEEgOCA4IDAgMCAxIDYxIDI0IEEgOCA4IDAgMCAxIDUzIDMyIEEgOCA4IDAgMCAxIDQ1IDI0IEEgOCA4IDAgMCAxIDUzIDE2IHogTSAyNi41IDU3LjQ3MDcwMyBMIDUzLjUgNTcuNDcwNzAzIEMgNTQuODg1MTU3IDU3LjQ3MDcwMyA1NiA1Ny42NTIyMTkgNTYgNTcuODc3NjA0IEMgNTYgNTguMTAyOTkgNTQuODg1MTU3IDU4LjI4NDUwNSA1My41IDU4LjI4NDUwNSBMIDI2LjUgNTguMjg0NTA1IEMgMjUuMTE0ODQzIDU4LjI4NDUwNSAyNCA1OC4xMDI5OSAyNCA1Ny44Nzc2MDQgQyAyNCA1Ny42NTIyMTkgMjUuMTE0ODQzIDU3LjQ3MDcwMyAyNi41IDU3LjQ3MDcwMyB6ICIgLz4KICAgIDxjaXJjbGUKICAgICAgIHN0eWxlPSJmaWxsOiMzZWNjNWY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjAuMTU3Nzg0O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpiZXZlbCIKICAgICAgIGlkPSJwYXRoMS01LTciCiAgICAgICBjeD0iNTUuNSIKICAgICAgIGN5PSIyMC41IgogICAgICAgcj0iMy41IiAvPgogICAgPGNpcmNsZQogICAgICAgc3R5bGU9ImZpbGw6IzNlY2M1ZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6MC4xNTc3ODQ7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOmJldmVsIgogICAgICAgaWQ9InBhdGgxLTUtNy02IgogICAgICAgY3g9IjI0LjUiCiAgICAgICBjeT0iMjAuNSIKICAgICAgIHI9IjMuNSIgLz4KICA8L2c+Cjwvc3ZnPgo=" width="240" height="240" class="img_ev3q"></p>
<p>Eu vou pegar o texto que o usuário escrever e fazer o que com ele?<br>
<!-- -->Passar para um Node.js?<br>
<!-- -->Eu vou ter que instalar Node.js na máquina da pessoa?<br>
<!-- -->Como eu pego a resposta?<br>
<!-- -->Eu conseguiria usar GDNative?<br>
<!-- -->Como que os outros projetos fazem isto?</p>
<p>Agora eu precisava descobrir como faria isto acontecer.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cheating">Cheating<a href="#cheating" class="hash-link" aria-label="Link direto para Cheating" title="Link direto para Cheating">​</a></h2>
<p><img loading="lazy" alt="Colando do colega do lado" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iMjQwIgogICBoZWlnaHQ9IjI0MCIKICAgdmlld0JveD0iMCAwIDgwIDgwIgogICB2ZXJzaW9uPSIxLjEiCiAgIGlkPSJzdmcxIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIxLjMgKDE6MS4zKzIwMjMwNzIzMTQ1OSswZTE1MGVkNmM0KSIKICAgc29kaXBvZGk6ZG9jbmFtZT0iY2hlYXRpbmcuc3ZnIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0ibmFtZWR2aWV3MSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiMxMTExMTEiCiAgICAgYm9yZGVyb3BhY2l0eT0iMSIKICAgICBpbmtzY2FwZTpzaG93cGFnZXNoYWRvdz0iZmFsc2UiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAiCiAgICAgaW5rc2NhcGU6cGFnZWNoZWNrZXJib2FyZD0iMSIKICAgICBpbmtzY2FwZTpkZXNrY29sb3I9IiNhZmFmYWYiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGxhYmVsc3R5bGU9ImRlZmF1bHQiCiAgICAgaW5rc2NhcGU6em9vbT0iNC4xMTIxNzExIgogICAgIGlua3NjYXBlOmN4PSIxMTcuODIwOTciCiAgICAgaW5rc2NhcGU6Y3k9IjEzNS40NTE1NiIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjE5MjAiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iMTAxNiIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMTkyMCIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMjciCiAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMSIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJncmlkMSIKICAgICAgIHVuaXRzPSJweCIKICAgICAgIG9yaWdpbng9IjAiCiAgICAgICBvcmlnaW55PSIwIgogICAgICAgc3BhY2luZ3g9IjEiCiAgICAgICBzcGFjaW5neT0iMSIKICAgICAgIGVtcGNvbG9yPSIjMDA5OWU1IgogICAgICAgZW1wb3BhY2l0eT0iMC4zMDE5NjA3OCIKICAgICAgIGNvbG9yPSIjMDA5OWU1IgogICAgICAgb3BhY2l0eT0iMC4xNDkwMTk2MSIKICAgICAgIGVtcHNwYWNpbmc9IjgiCiAgICAgICBkb3R0ZWQ9ImZhbHNlIgogICAgICAgZ3JpZGFuZ2xleD0iMzAiCiAgICAgICBncmlkYW5nbGV6PSIzMCIKICAgICAgIHZpc2libGU9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPGRlZnMKICAgICBpZD0iZGVmczEiIC8+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIGlkPSJwYXRoMSIKICAgICAgIHN0eWxlPSJmaWxsOiMzZWNjNWY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjEuMzMzMzM7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOmJldmVsIgogICAgICAgZD0iTSA1Ni4yNDIxODggMjUuNTE0OTc0IEEgMTQuMjQyNDAxIDE0LjI0MjQwMSAwIDAgMCA0MiAzOS43NTc4MTIgQSAxNC4yNDI0MDEgMTQuMjQyNDAxIDAgMCAwIDU2LjI0MjE4OCA1NCBBIDE0LjI0MjQwMSAxNC4yNDI0MDEgMCAwIDAgNzAuNDg1MDI2IDM5Ljc1NzgxMiBBIDE0LjI0MjQwMSAxNC4yNDI0MDEgMCAwIDAgNTYuMjQyMTg4IDI1LjUxNDk3NCB6IE0gNTIgMzggQSA0IDQgMCAwIDEgNTYgNDIgQSA0IDQgMCAwIDEgNTIgNDYgQSA0IDQgMCAwIDEgNDggNDIgQSA0IDQgMCAwIDEgNTIgMzggeiBNIDY1IDM4IEEgNCA0IDAgMCAxIDY5IDQyIEEgNCA0IDAgMCAxIDY1IDQ2IEEgNCA0IDAgMCAxIDYxIDQyIEEgNCA0IDAgMCAxIDY1IDM4IHogIiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjEuMDA5MTU7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOmJldmVsIgogICAgICAgaWQ9InJlY3QxLTciCiAgICAgICB3aWR0aD0iMTYiCiAgICAgICBoZWlnaHQ9IjgiCiAgICAgICB4PSI2NCIKICAgICAgIHk9IjU0IgogICAgICAgcng9IjMuMTk1NDI2NyIKICAgICAgIHJ5PSIzLjE5NTQyNjciIC8+CiAgICA8cmVjdAogICAgICAgc3R5bGU9ImZpbGw6IzNlY2M1ZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6MS4wMDkxNTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46YmV2ZWwiCiAgICAgICBpZD0icmVjdDEiCiAgICAgICB3aWR0aD0iMTYiCiAgICAgICBoZWlnaHQ9IjgiCiAgICAgICB4PSI2NCIKICAgICAgIHk9IjU0IgogICAgICAgcng9IjMuMTk1NDI2NyIKICAgICAgIHJ5PSIzLjE5NTQyNjciIC8+CiAgICA8cmVjdAogICAgICAgc3R5bGU9ImZpbGw6IzNlY2M1ZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6MS4wMDkxNTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46YmV2ZWwiCiAgICAgICBpZD0icmVjdDEtNSIKICAgICAgIHdpZHRoPSIxNiIKICAgICAgIGhlaWdodD0iOCIKICAgICAgIHg9IjQwIgogICAgICAgeT0iNTQiCiAgICAgICByeD0iMy4xOTU0MjY3IgogICAgICAgcnk9IjMuMTk1NDI2NyIgLz4KICAgIDxyZWN0CiAgICAgICBzdHlsZT0iZmlsbDojM2VjYzVmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxLjAwOTE1O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpiZXZlbCIKICAgICAgIGlkPSJyZWN0MS01LTMiCiAgICAgICB3aWR0aD0iMTYiCiAgICAgICBoZWlnaHQ9IjgiCiAgICAgICB4PSIxNyIKICAgICAgIHk9IjU0IgogICAgICAgcng9IjMuMTk1NDI2NyIKICAgICAgIHJ5PSIzLjE5NTQyNjciIC8+CiAgICA8cmVjdAogICAgICAgc3R5bGU9ImZpbGw6IzNlY2M1ZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6MS4wMDkxNTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46YmV2ZWwiCiAgICAgICBpZD0icmVjdDEtNS03IgogICAgICAgd2lkdGg9IjE2IgogICAgICAgaGVpZ2h0PSI4IgogICAgICAgeD0iMCIKICAgICAgIHk9IjU0IgogICAgICAgcng9IjMuMTk1NDI2NyIKICAgICAgIHJ5PSIzLjE5NTQyNjciIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyIgogICAgICAgdHJhbnNmb3JtPSJyb3RhdGUoNDUsNTAuNjM2MDM5LDYyLjg2Mzk2MSkiPgogICAgICA8cmVjdAogICAgICAgICBzdHlsZT0iZmlsbDojM2VjYzVmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxLjQyNDA0O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpiZXZlbCIKICAgICAgICAgaWQ9InJlY3QyIgogICAgICAgICB3aWR0aD0iMiIKICAgICAgICAgaGVpZ2h0PSIxNSIKICAgICAgICAgeD0iNTYiCiAgICAgICAgIHk9IjQwIgogICAgICAgICByeD0iMCIKICAgICAgICAgcnk9IjAiIC8+CiAgICAgIDxyZWN0CiAgICAgICAgIHN0eWxlPSJmaWxsOiMzZWNjNWY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjAuNTE5OTg2O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpiZXZlbCIKICAgICAgICAgaWQ9InJlY3QyLTIiCiAgICAgICAgIHdpZHRoPSIyIgogICAgICAgICBoZWlnaHQ9IjIiCiAgICAgICAgIHg9IjU2IgogICAgICAgICB5PSIzOCIKICAgICAgICAgcng9IjAuNjg0NTA2ODMiCiAgICAgICAgIHJ5PSIwLjY4NDUwNjgzIiAvPgogICAgICA8cGF0aAogICAgICAgICBzb2RpcG9kaTp0eXBlPSJzdGFyIgogICAgICAgICBzdHlsZT0iZmlsbDojM2VjYzVmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxLjMzMzMzO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpiZXZlbCIKICAgICAgICAgaWQ9InBhdGgyIgogICAgICAgICBpbmtzY2FwZTpmbGF0c2lkZWQ9InRydWUiCiAgICAgICAgIHNvZGlwb2RpOnNpZGVzPSIzIgogICAgICAgICBzb2RpcG9kaTpjeD0iNDguMDg3NDE0IgogICAgICAgICBzb2RpcG9kaTpjeT0iNTYuNjY4ODQyIgogICAgICAgICBzb2RpcG9kaTpyMT0iMS4zODgyMjc2IgogICAgICAgICBzb2RpcG9kaTpyMj0iMC42OTQxMTM3OSIKICAgICAgICAgc29kaXBvZGk6YXJnMT0iMS41NzA3OTYzIgogICAgICAgICBzb2RpcG9kaTphcmcyPSIyLjYxNzk5MzkiCiAgICAgICAgIGlua3NjYXBlOnJvdW5kZWQ9IjAiCiAgICAgICAgIGlua3NjYXBlOnJhbmRvbWl6ZWQ9IjAiCiAgICAgICAgIGQ9Im0gNDguMDg3NDE0LDU4LjA1NzA3IC0xLjIwMjI0MSwtMi4wODIzNDEgMi40MDQ0ODEsLTFlLTYgeiIKICAgICAgICAgaW5rc2NhcGU6dHJhbnNmb3JtLWNlbnRlci15PSIwLjI4ODY3NDkiCiAgICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KDAuODMxNzgwNDMsMCwwLDAuODMxNzgwNDMsMTcuMDAxODMsOC43MDkyNjU0KSIgLz4KICAgIDwvZz4KICAgIDxnCiAgICAgICBpZD0iZzItMCIKICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KC0wLjcwNzEwNjc4LDAuNzA3MTA2NzgsMC43MDcxMDY3OCwwLjcwNzEwNjc4LDE3Ljg1OTIyNiwtMTcuNjEwMTczKSI+CiAgICAgIDxyZWN0CiAgICAgICAgIHN0eWxlPSJmaWxsOiMzZWNjNWY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjEuNDI0MDQ7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOmJldmVsIgogICAgICAgICBpZD0icmVjdDItMyIKICAgICAgICAgd2lkdGg9IjIiCiAgICAgICAgIGhlaWdodD0iMTUiCiAgICAgICAgIHg9IjU2IgogICAgICAgICB5PSI0MCIKICAgICAgICAgcng9IjAiCiAgICAgICAgIHJ5PSIwIiAvPgogICAgICA8cmVjdAogICAgICAgICBzdHlsZT0iZmlsbDojM2VjYzVmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDowLjUxOTk4NjtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46YmV2ZWwiCiAgICAgICAgIGlkPSJyZWN0Mi0yLTYiCiAgICAgICAgIHdpZHRoPSIyIgogICAgICAgICBoZWlnaHQ9IjIiCiAgICAgICAgIHg9IjU2IgogICAgICAgICB5PSIzOCIKICAgICAgICAgcng9IjAuNjg0NTA2ODMiCiAgICAgICAgIHJ5PSIwLjY4NDUwNjgzIiAvPgogICAgICA8cGF0aAogICAgICAgICBzb2RpcG9kaTp0eXBlPSJzdGFyIgogICAgICAgICBzdHlsZT0iZmlsbDojM2VjYzVmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxLjMzMzMzO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpiZXZlbCIKICAgICAgICAgaWQ9InBhdGgyLTEiCiAgICAgICAgIGlua3NjYXBlOmZsYXRzaWRlZD0idHJ1ZSIKICAgICAgICAgc29kaXBvZGk6c2lkZXM9IjMiCiAgICAgICAgIHNvZGlwb2RpOmN4PSI0OC4wODc0MTQiCiAgICAgICAgIHNvZGlwb2RpOmN5PSI1Ni42Njg4NDIiCiAgICAgICAgIHNvZGlwb2RpOnIxPSIxLjM4ODIyNzYiCiAgICAgICAgIHNvZGlwb2RpOnIyPSIwLjY5NDExMzc5IgogICAgICAgICBzb2RpcG9kaTphcmcxPSIxLjU3MDc5NjMiCiAgICAgICAgIHNvZGlwb2RpOmFyZzI9IjIuNjE3OTkzOSIKICAgICAgICAgaW5rc2NhcGU6cm91bmRlZD0iMCIKICAgICAgICAgaW5rc2NhcGU6cmFuZG9taXplZD0iMCIKICAgICAgICAgZD0ibSA0OC4wODc0MTQsNTguMDU3MDcgLTEuMjAyMjQxLC0yLjA4MjM0MSAyLjQwNDQ4MSwtMWUtNiB6IgogICAgICAgICBpbmtzY2FwZTp0cmFuc2Zvcm0tY2VudGVyLXk9IjAuMjg4Njc0OSIKICAgICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMC44MzE3ODA0MywwLDAsMC44MzE3ODA0MywxNy4wMDE4Myw4LjcwOTI2NTQpIiAvPgogICAgPC9nPgogICAgPHBhdGgKICAgICAgIGlkPSJwYXRoMS02IgogICAgICAgc3R5bGU9ImZpbGw6IzNlY2M1ZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6MS4zMzMzMztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46YmV2ZWwiCiAgICAgICBkPSJNIDIwLjI0MjE4OCAyNS41MTQ5NzQgQSAxNC4yNDI0MDEgMTQuMjQyNDAxIDAgMCAwIDYgMzkuNzU3ODEyIEEgMTQuMjQyNDAxIDE0LjI0MjQwMSAwIDAgMCAyMC4yNDIxODggNTQgQSAxNC4yNDI0MDEgMTQuMjQyNDAxIDAgMCAwIDM0LjQ4NTAyNiAzOS43NTc4MTIgQSAxNC4yNDI0MDEgMTQuMjQyNDAxIDAgMCAwIDIwLjI0MjE4OCAyNS41MTQ5NzQgeiBNIDIwIDM3IEEgNCA0IDAgMCAxIDI0IDQxIEEgNCA0IDAgMCAxIDIwIDQ1IEEgNCA0IDAgMCAxIDE2IDQxIEEgNCA0IDAgMCAxIDIwIDM3IHogTSAzMCAzNyBBIDQgNCAwIDAgMSAzNCA0MSBBIDQgNCAwIDAgMSAzMCA0NSBBIDQgNCAwIDAgMSAyNiA0MSBBIDQgNCAwIDAgMSAzMCAzNyB6ICIgLz4KICAgIDxjaXJjbGUKICAgICAgIHN0eWxlPSJmaWxsOiMzZWNjNWY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjAuMTg3MjM0O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpiZXZlbCIKICAgICAgIGlkPSJwYXRoMS02LTAiCiAgICAgICBjeD0iMzEiCiAgICAgICBjeT0iNDIiCiAgICAgICByPSIyIiAvPgogICAgPGNpcmNsZQogICAgICAgc3R5bGU9ImZpbGw6IzNlY2M1ZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6MC4xODcyMzQ7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOmJldmVsIgogICAgICAgaWQ9InBhdGgxLTYtMC01IgogICAgICAgY3g9IjIxIgogICAgICAgY3k9IjQyIgogICAgICAgcj0iMiIgLz4KICAgIDxjaXJjbGUKICAgICAgIHN0eWxlPSJmaWxsOiMzZWNjNWY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjAuMTg3MjM0O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpiZXZlbCIKICAgICAgIGlkPSJwYXRoMS02LTAtOCIKICAgICAgIGN4PSI1MiIKICAgICAgIGN5PSI0NCIKICAgICAgIHI9IjIiIC8+CiAgICA8Y2lyY2xlCiAgICAgICBzdHlsZT0iZmlsbDojM2VjYzVmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDowLjE4NzIzNDtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46YmV2ZWwiCiAgICAgICBpZD0icGF0aDEtNi0wLTYiCiAgICAgICBjeD0iNjUiCiAgICAgICBjeT0iNDQiCiAgICAgICByPSIyIiAvPgogIDwvZz4KPC9zdmc+Cg==" width="240" height="240" class="img_ev3q"></p>
<p><strong><a href="https://github.com/Studio3T/robomongo" target="_blank" rel="noopener noreferrer">Robomongo</a></strong>! Também conhecido como <strong>Robo 3T</strong>.<br>
<!-- -->Um projeto open-source que em 2017 foi adquirido pelos criadores do <a href="https://studio3t.com/" target="_blank" rel="noopener noreferrer">Studio 3T</a>.</p>
<p>O que importa é que eu tenho um projeto para <del>copiar</del> estudar!</p>
<p>Robo 3T possui dois repositórios:</p>
<ul>
<li>robomongo<!-- -->
<ul>
<li>Responsável pela interface gráfica</li>
</ul>
</li>
<li>robomongo-shell<!-- -->
<ul>
<li>Responsável pela interação com o Mongo.</li>
</ul>
</li>
</ul>
<p>Importante notar que o segundo é um fork do Mongo oficial, justamente pois nele é incluido um shell interativo para se comunicar com o banco.</p>
<p>Isso faz sentido, já que a interface de linha de comando geralmente é a primeira coisa a ser feita para interagir com bancos. Como mais as pessoas interagiriam com o banco antes de GUI existirem? Poderia ser por código mas seria um baita trabalho cada operação.</p>
<p>Então era isso, tudo que eu tinha que fazer era:</p>
<ol>
<li>Incluir o shell do Mongo na minha interface gráfica</li>
<li>Utilizar o modo iterativo do shell</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="problems">Problems<a href="#problems" class="hash-link" aria-label="Link direto para Problems" title="Link direto para Problems">​</a></h2>
<p>Eu não tinha ideia de como fazer para incluir o shell na interface gráfica.<br>
<!-- -->Decidi aceitar que passaria como o shell separado para o usuário e dei essa parte como dada.</p>
<p>Eu que não vou reclamar das minhas decisões idiotas no meu projeto pessoal.</p>
<p><img loading="lazy" alt="Shrug face" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iMjgwIgogICBoZWlnaHQ9IjI0MCIKICAgdmlld0JveD0iMCAwIDkzLjMzMzMzMyA4MCIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0ic3ZnMSIKICAgaW5rc2NhcGU6dmVyc2lvbj0iMS4zICgxOjEuMysyMDIzMDcyMzE0NTkrMGUxNTBlZDZjNCkiCiAgIHNvZGlwb2RpOmRvY25hbWU9InNocnVnLnN2ZyIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9Im5hbWVkdmlldzEiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjMTExMTExIgogICAgIGJvcmRlcm9wYWNpdHk9IjEiCiAgICAgaW5rc2NhcGU6c2hvd3BhZ2VzaGFkb3c9ImZhbHNlIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwIgogICAgIGlua3NjYXBlOnBhZ2VjaGVja2VyYm9hcmQ9IjEiCiAgICAgaW5rc2NhcGU6ZGVza2NvbG9yPSIjYWZhZmFmIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBzaG93Z3JpZD0idHJ1ZSIKICAgICBsYWJlbHN0eWxlPSJkZWZhdWx0IgogICAgIGlua3NjYXBlOnpvb209IjUuODE1NDg4MiIKICAgICBpbmtzY2FwZTpjeD0iMTE3LjE4NzA3IgogICAgIGlua3NjYXBlOmN5PSI4Ny41MjQ4OTYiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxOTIwIgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9IjEwMTYiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjE5MjAiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjI3IgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjEiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIj4KICAgIDxpbmtzY2FwZTpncmlkCiAgICAgICBpZD0iZ3JpZDEiCiAgICAgICB1bml0cz0icHgiCiAgICAgICBvcmlnaW54PSIwIgogICAgICAgb3JpZ2lueT0iMCIKICAgICAgIHNwYWNpbmd4PSIxIgogICAgICAgc3BhY2luZ3k9IjEiCiAgICAgICBlbXBjb2xvcj0iIzAwOTllNSIKICAgICAgIGVtcG9wYWNpdHk9IjAuMzAxOTYwNzgiCiAgICAgICBjb2xvcj0iIzAwOTllNSIKICAgICAgIG9wYWNpdHk9IjAuMTQ5MDE5NjEiCiAgICAgICBlbXBzcGFjaW5nPSI4IgogICAgICAgZG90dGVkPSJmYWxzZSIKICAgICAgIGdyaWRhbmdsZXg9IjMwIgogICAgICAgZ3JpZGFuZ2xlej0iMzAiCiAgICAgICB2aXNpYmxlPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxkZWZzCiAgICAgaWQ9ImRlZnMxIiAvPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBpZD0icGF0aDEiCiAgICAgICBzdHlsZT0iZmlsbDojM2VjYzVmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxLjEyMDgxO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpiZXZlbCIKICAgICAgIGQ9Ik0gNDYuMzMzMzMzIDIwIEEgMTQgMTQgMCAwIDAgMzIuMzMzMzMzIDM0IEEgMTQgMTQgMCAwIDAgMzMuMjE2MTQ2IDM4Ljc5MTAxNiBMIDMzLjcyOTE2NyAzOC43OTEwMTYgQyAzNi4yNzk5OCAzOC43OTEwMTYgMzguMzMzMzMzIDQwLjg0NTAyMSAzOC4zMzMzMzMgNDMuMzk1ODMzIEMgMzguMzMzMzMzIDQ0LjAzMTU3NiAzOC4yMDU2MzEgNDQuNjM2MzI0IDM3Ljk3NDYwOSA0NS4xODYxOTggQSAxNCAxNCAwIDAgMCA0Ni4zMzMzMzMgNDggQSAxNCAxNCAwIDAgMCA1NC42OTIwNTcgNDUuMTg2MTk4IEMgNTQuNDYxMDM1IDQ0LjYzNjMyNCA1NC4zMzMzMzMgNDQuMDMxNTc2IDU0LjMzMzMzMyA0My4zOTU4MzMgQyA1NC4zMzMzMzMgNDAuODQ1MDE4IDU2LjM4NjY3OCAzOC43OTEwMTYgNTguOTM3NSAzOC43OTEwMTYgTCA1OS40NTA1MjEgMzguNzkxMDE2IEEgMTQgMTQgMCAwIDAgNjAuMzMzMzMzIDM0IEEgMTQgMTQgMCAwIDAgNDYuMzMzMzMzIDIwIHogTSA0MSAyNCBDIDQxLjU1Mzk5NCAyNCA0MiAyNC40NDYwMDYgNDIgMjUgTCA0MiAzMi41MDA2NTEgQyA0MiAzMy4wNTQ2NDUgNDEuNTUzOTk0IDMzLjUwMDY1MSA0MSAzMy41MDA2NTEgQyA0MC40NDYwMDEgMzMuNTAwNjUxIDQwIDMzLjA1NDY0NSA0MCAzMi41MDA2NTEgTCA0MCAyNSBDIDQwIDI0LjQ0NjAwNiA0MC40NDYwMDEgMjQgNDEgMjQgeiBNIDQ5IDI0IEMgNDkuNTUzOTkzIDI0IDUwIDI0LjQ0NjAwNyA1MCAyNSBMIDUwIDMyLjUwMDY1MSBDIDUwIDMzLjA1NDY0NCA0OS41NTM5OTMgMzMuNTAwNjUxIDQ5IDMzLjUwMDY1MSBDIDQ4LjQ0NiAzMy41MDA2NTEgNDggMzMuMDU0NjQ0IDQ4IDMyLjUwMDY1MSBMIDQ4IDI1IEMgNDggMjQuNDQ2MDA3IDQ4LjQ0NiAyNCA0OSAyNCB6IE0gNTUuMzMzMzMzIDI5LjY2NjY2NyBDIDU1LjczMzE2MiAzOS4zMDczMjggNTAuMTA4MzQ4IDQzLjAwNzE0IDQxLjc4NDUwNSA0My4yMTU0OTUgTCA1NS4zMzMzMzMgMjkuNjY2NjY3IHogIiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiMzZWNjNWY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjEuMDUzO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpiZXZlbCIKICAgICAgIGlkPSJyZWN0MSIKICAgICAgIHdpZHRoPSIxOS44OTAxNzUiCiAgICAgICBoZWlnaHQ9IjguMzY3NDM5MyIKICAgICAgIHg9IjU1LjMzMzMzMiIKICAgICAgIHk9IjM5LjIxMTg3NiIKICAgICAgIHJ4PSI0LjE4MzcxOTYiCiAgICAgICByeT0iNC4xODM3MTk2IiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiMzZWNjNWY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjEuMDUzO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpiZXZlbCIKICAgICAgIGlkPSJyZWN0MS0yIgogICAgICAgd2lkdGg9IjE5Ljg5MDE3NSIKICAgICAgIGhlaWdodD0iOC4zNjc0MzkzIgogICAgICAgeD0iNzIuMjIzNTAzIgogICAgICAgeT0iMjkuMjExODgiCiAgICAgICByeD0iNC4xODM3MTk2IgogICAgICAgcnk9IjQuMTgzNzE5NiIgLz4KICAgIDxyZWN0CiAgICAgICBzdHlsZT0iZmlsbDojM2VjYzVmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxLjA1MztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46YmV2ZWwiCiAgICAgICBpZD0icmVjdDEtNSIKICAgICAgIHdpZHRoPSIxOS44OTAxNzUiCiAgICAgICBoZWlnaHQ9IjguMzY3NDM5MyIKICAgICAgIHg9Ii02LjYyNDg2NTEiCiAgICAgICB5PSI3OC4zNzE5ODYiCiAgICAgICByeD0iNC4xODM3MTk2IgogICAgICAgcnk9IjQuMTgzNzE5NiIKICAgICAgIHRyYW5zZm9ybT0icm90YXRlKC02MCkiIC8+CiAgICA8cmVjdAogICAgICAgc3R5bGU9ImZpbGw6IzNlY2M1ZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6MS4wNTM7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOmJldmVsIgogICAgICAgaWQ9InJlY3QxLTciCiAgICAgICB3aWR0aD0iMTkuODkwMTc1IgogICAgICAgaGVpZ2h0PSI4LjM2NzQzOTMiCiAgICAgICB4PSItMzcuMzMzMzMyIgogICAgICAgeT0iMzkuNjMyNTYxIgogICAgICAgcng9IjQuMTgzNzE5NiIKICAgICAgIHJ5PSI0LjE4MzcxOTYiCiAgICAgICB0cmFuc2Zvcm09InNjYWxlKC0xLDEpIiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiMzZWNjNWY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjEuMDUzO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpiZXZlbCIKICAgICAgIGlkPSJyZWN0MS0yLTAiCiAgICAgICB3aWR0aD0iMTkuODkwMTc1IgogICAgICAgaGVpZ2h0PSI4LjM2NzQzOTMiCiAgICAgICB4PSItMjAuNDQzMTU3IgogICAgICAgeT0iMjkuNjMyNTYxIgogICAgICAgcng9IjQuMTgzNzE5NiIKICAgICAgIHJ5PSI0LjE4MzcxOTYiCiAgICAgICB0cmFuc2Zvcm09InNjYWxlKC0xLDEpIiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiMzZWNjNWY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjEuMDUzO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpiZXZlbCIKICAgICAgIGlkPSJyZWN0MS01LTkiCiAgICAgICB3aWR0aD0iMTkuODkwMTc1IgogICAgICAgaGVpZ2h0PSI4LjM2NzQzOTMiCiAgICAgICB4PSItNTMuMzIyNTIxIgogICAgICAgeT0iLTEuNjY5MzU2IgogICAgICAgcng9IjQuMTgzNzE5NiIKICAgICAgIHJ5PSI0LjE4MzcxOTYiCiAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCgtMC41LC0wLjg2NjAyNTQsLTAuODY2MDI1NCwwLjUsMCwwKSIgLz4KICA8L2c+Cjwvc3ZnPgo=" width="280" height="240" class="img_ev3q"></p>
<p>Agora tudo que eu tinha que fazer é chamar o shell pelo Godot.<br>
<!-- -->Para isto eu iria precisar usar o método <a href="https://docs.godotengine.org/en/3.6/classes/class_os.html#class-os-method-execute" target="_blank" rel="noopener noreferrer"><code>OS.execute()</code></a>.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">int execute (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String path,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PoolStringArray arguments,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bool blocking=true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Array output=[],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bool read_stderr=false,bool open_console=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>O problema é que essa função possui dois comportamentos dependendo se <code>blocking</code> for <code>true</code> ou <code>false</code>, porém nenhum dos dois era o que eu buscava.</p>
<p><img loading="lazy" alt="Outro rosto de idiota com o olhar torto para fora" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iMjQwIgogICBoZWlnaHQ9IjI0MCIKICAgdmlld0JveD0iMCAwIDgwIDgwIgogICB2ZXJzaW9uPSIxLjEiCiAgIGlkPSJzdmcxIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIxLjMgKDE6MS4zKzIwMjMwNzIzMTQ1OSswZTE1MGVkNmM0KSIKICAgc29kaXBvZGk6ZG9jbmFtZT0ib2hfZnVjay5zdmciCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJuYW1lZHZpZXcxIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzExMTExMSIKICAgICBib3JkZXJvcGFjaXR5PSIxIgogICAgIGlua3NjYXBlOnNob3dwYWdlc2hhZG93PSJmYWxzZSIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMCIKICAgICBpbmtzY2FwZTpwYWdlY2hlY2tlcmJvYXJkPSIxIgogICAgIGlua3NjYXBlOmRlc2tjb2xvcj0iI2FmYWZhZiIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgbGFiZWxzdHlsZT0iZGVmYXVsdCIKICAgICBpbmtzY2FwZTp6b29tPSIyLjkwNzc0NDEiCiAgICAgaW5rc2NhcGU6Y3g9IjMxLjEyMzc4NSIKICAgICBpbmtzY2FwZTpjeT0iMTI1LjAxMSIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjE5MjAiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iMTA0MyIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMCIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctbWF4aW1pemVkPSIxIgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImxheWVyMSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9ImdyaWQxIgogICAgICAgdW5pdHM9InB4IgogICAgICAgb3JpZ2lueD0iMCIKICAgICAgIG9yaWdpbnk9IjAiCiAgICAgICBzcGFjaW5neD0iMSIKICAgICAgIHNwYWNpbmd5PSIxIgogICAgICAgZW1wY29sb3I9IiMwMDk5ZTUiCiAgICAgICBlbXBvcGFjaXR5PSIwLjMwMTk2MDc4IgogICAgICAgY29sb3I9IiMwMDk5ZTUiCiAgICAgICBvcGFjaXR5PSIwLjE0OTAxOTYxIgogICAgICAgZW1wc3BhY2luZz0iOCIKICAgICAgIGRvdHRlZD0iZmFsc2UiCiAgICAgICBncmlkYW5nbGV4PSIzMCIKICAgICAgIGdyaWRhbmdsZXo9IjMwIgogICAgICAgdmlzaWJsZT0idHJ1ZSIgLz4KICA8L3NvZGlwb2RpOm5hbWVkdmlldz4KICA8ZGVmcwogICAgIGlkPSJkZWZzMSIgLz4KICA8ZwogICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgIGlua3NjYXBlOmdyb3VwbW9kZT0ibGF5ZXIiCiAgICAgaWQ9ImxheWVyMSI+CiAgICA8cGF0aAogICAgICAgaWQ9InBhdGgyIgogICAgICAgc3R5bGU9ImZpbGw6IzNlY2M1ZjtzdHJva2Utd2lkdGg6MS40NDY4MjtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46YmV2ZWwiCiAgICAgICBkPSJNIDQwIDggQSAzMiAzMiAwIDAgMCA4IDQwIEEgMzIgMzIgMCAwIDAgNDAgNzIgQSAzMiAzMiAwIDAgMCA3MiA0MCBBIDMyIDMyIDAgMCAwIDQwIDggeiBNIDI5IDE2IEEgMTAgMTAgMCAwIDEgMzkgMjYgQSAxMCAxMCAwIDAgMSAyOSAzNiBBIDEwIDEwIDAgMCAxIDE5IDI2IEEgMTAgMTAgMCAwIDEgMjkgMTYgeiBNIDUxIDE2IEEgMTAgMTAgMCAwIDEgNjEgMjYgQSAxMCAxMCAwIDAgMSA1MSAzNiBBIDEwIDEwIDAgMCAxIDQxIDI2IEEgMTAgMTAgMCAwIDEgNTEgMTYgeiBNIDIwLjI2MTA2OCA1Ny4wMzMyMDMgTCA1OS43Mzg5MzIgNTcuMDMzMjAzIEMgNjIuMDk5NzIxIDU3LjAzMzIwMyA2NCA1Ny4yNDkxNSA2NCA1Ny41MTY5MjcgQyA2NCA1Ny43ODQ3MDQgNjIuMDk5NzIxIDU4IDU5LjczODkzMiA1OCBMIDIwLjI2MTA2OCA1OCBDIDE3LjkwMDI3OSA1OCAxNiA1Ny43ODQ3MDQgMTYgNTcuNTE2OTI3IEMgMTYgNTcuMjQ5MTUgMTcuOTAwMjc5IDU3LjAzMzIwMyAyMC4yNjEwNjggNTcuMDMzMjAzIHogIiAvPgogICAgPGNpcmNsZQogICAgICAgc3R5bGU9ImZpbGw6IzNlY2M1ZjtzdHJva2Utd2lkdGg6MC4yMDM0NTk7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOmJldmVsIgogICAgICAgaWQ9InBhdGgyLTciCiAgICAgICBjeD0iMjYuNSIKICAgICAgIGN5PSIyMS41IgogICAgICAgcj0iNC41IiAvPgogICAgPGNpcmNsZQogICAgICAgc3R5bGU9ImZpbGw6IzNlY2M1ZjtzdHJva2Utd2lkdGg6MC4yMDM0NTk7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOmJldmVsIgogICAgICAgaWQ9InBhdGgyLTctNiIKICAgICAgIGN4PSI1My41IgogICAgICAgY3k9IjIxLjUiCiAgICAgICByPSI0LjUiIC8+CiAgPC9nPgo8L3N2Zz4K" width="240" height="240" class="img_ev3q"></p>
<p><code>blocking</code> -&gt; <code>true</code>: Godot vai pausar enquanto a saída não é escrita em output.</p>
<p>Não queremos isto pois uma busca pode resultar em milhares de documentos. Queremos retornar mais documentos conforme o usuário pedir por mais documentos.</p>
<p><code>blocking</code> -&gt; <code>false</code>: Godot vai continuar executando e o comando irá rodar em um processo separado. Porém não será possível recuperar o output do comando.</p>
<p>Nós queremos receber a saída aos poucos se estivermos falando de pesquisas que resultam em muitos documentos.</p>
<p>Função do Godot não é interativa, como vou usar o shell interativo?<br>
<!-- -->Posso ler input e output usando algum conhecimento do sistema operacional?<br>
<!-- -->Eu vou ter que conhecer bem todos sistemas operacionais?<br>
<!-- -->Vou ter que descobrir como Robo 3T linka o shell?</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="solution">Solution<a href="#solution" class="hash-link" aria-label="Link direto para Solution" title="Link direto para Solution">​</a></h2>
<p>Criar meu próprio shell.</p>
<p><img loading="lazy" alt="Shell" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iMTI4IgogICBoZWlnaHQ9Ijk2IgogICB2aWV3Qm94PSIwIDAgMTI4IDk2IgogICB2ZXJzaW9uPSIxLjEiCiAgIGlkPSJzdmcxIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIxLjMgKDE6MS4zKzIwMjMwNzIzMTQ1OSswZTE1MGVkNmM0KSIKICAgc29kaXBvZGk6ZG9jbmFtZT0ic2hlbGwuc3ZnIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0ibmFtZWR2aWV3MSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiMxMTExMTEiCiAgICAgYm9yZGVyb3BhY2l0eT0iMSIKICAgICBpbmtzY2FwZTpzaG93cGFnZXNoYWRvdz0iZmFsc2UiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAiCiAgICAgaW5rc2NhcGU6cGFnZWNoZWNrZXJib2FyZD0iMSIKICAgICBpbmtzY2FwZTpkZXNrY29sb3I9IiNhZmFmYWYiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGxhYmVsc3R5bGU9ImRlZmF1bHQiCiAgICAgaW5rc2NhcGU6em9vbT0iOC4yMjQzNDIxIgogICAgIGlua3NjYXBlOmN4PSI0NS43Nzg3MzgiCiAgICAgaW5rc2NhcGU6Y3k9IjQ4LjI3MTMzOCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjE5MjAiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iMTAxNiIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMTkyMCIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMjciCiAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMSIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJncmlkMSIKICAgICAgIHVuaXRzPSJweCIKICAgICAgIG9yaWdpbng9IjAiCiAgICAgICBvcmlnaW55PSIwIgogICAgICAgc3BhY2luZ3g9IjEiCiAgICAgICBzcGFjaW5neT0iMSIKICAgICAgIGVtcGNvbG9yPSIjMDA5OWU1IgogICAgICAgZW1wb3BhY2l0eT0iMC4zMDE5NjA3OCIKICAgICAgIGNvbG9yPSIjMDA5OWU1IgogICAgICAgb3BhY2l0eT0iMC4xNDkwMTk2MSIKICAgICAgIGVtcHNwYWNpbmc9IjgiCiAgICAgICBkb3R0ZWQ9ImZhbHNlIgogICAgICAgZ3JpZGFuZ2xleD0iMzAiCiAgICAgICBncmlkYW5nbGV6PSIzMCIKICAgICAgIHZpc2libGU9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPGRlZnMKICAgICBpZD0iZGVmczEiIC8+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIGlkPSJyZWN0MiIKICAgICAgIHN0eWxlPSJmaWxsOiMzZWNjNWY7c3Ryb2tlLXdpZHRoOjMuNjc1Mjc7LWlua3NjYXBlLXN0cm9rZTpub25lIgogICAgICAgZD0iTSAxMC42OTkyMTkgOCBDIDkuMjAzOTA1MyA4IDggOS4yMDM5MDUzIDggMTAuNjk5MjE5IEwgOCA4NS40MDQyOTcgQyA4IDg2Ljg5OTYwNiA5LjIwMzkwNTMgODguMTAzNTE2IDEwLjY5OTIxOSA4OC4xMDM1MTYgTCAxMTcuMzAwNzggODguMTAzNTE2IEMgMTE4Ljc5NjEgODguMTAzNTE2IDEyMCA4Ni44OTk2MDYgMTIwIDg1LjQwNDI5NyBMIDEyMCAxMC42OTkyMTkgQyAxMjAgOS4yMDM5MDUzIDExOC43OTYxIDggMTE3LjMwMDc4IDggTCAxMC42OTkyMTkgOCB6IE0gOTkuMjUzOTA2IDkgTCAxMDYuNzQ2MDkgOSBDIDEwNi44ODYzNiA5IDEwNyA5LjExMzYzNTkgMTA3IDkuMjUzOTA2MiBMIDEwNyAxNi43NDYwOTQgQyAxMDcgMTYuODg2MzY1IDEwNi44ODYzNiAxNyAxMDYuNzQ2MDkgMTcgTCA5OS4yNTM5MDYgMTcgQyA5OS4xMTM2MzUgMTcgOTkgMTYuODg2MzY1IDk5IDE2Ljc0NjA5NCBMIDk5IDkuMjUzOTA2MiBDIDk5IDkuMTEzNjM1OSA5OS4xMTM2MzUgOSA5OS4yNTM5MDYgOSB6IE0gMTEwLjg3ODkxIDkuNTY4MzU5NCBDIDExMC45NDM2MyA5LjU2ODM1OTQgMTExLjAwOSA5LjU5Mjk4NTIgMTExLjA1ODU5IDkuNjQyNTc4MSBMIDExMyAxMS41ODM5ODQgTCAxMTQuOTQxNDEgOS42NDI1NzgxIEMgMTE1LjA0MDU5IDkuNTQzMzkxOSAxMTUuMjAxNTkgOS41NDMzOTE5IDExNS4zMDA3OCA5LjY0MjU3ODEgTCAxMTYuMzU3NDIgMTAuNjk5MjE5IEMgMTE2LjQ1NjYxIDEwLjc5ODQwNSAxMTYuNDU2NjEgMTAuOTU5NDA3IDExNi4zNTc0MiAxMS4wNTg1OTQgTCAxMTQuNDE2MDIgMTMgTCAxMTYuMzU3NDIgMTQuOTQxNDA2IEMgMTE2LjQ1NjYxIDE1LjA0MDU5MyAxMTYuNDU2NjEgMTUuMjAxNTk1IDExNi4zNTc0MiAxNS4zMDA3ODEgTCAxMTUuMzAwNzggMTYuMzU3NDIyIEMgMTE1LjIwMTU5IDE2LjQ1NjYwOCAxMTUuMDQwNTkgMTYuNDU2NjA4IDExNC45NDE0MSAxNi4zNTc0MjIgTCAxMTMgMTQuNDE2MDE2IEwgMTExLjA1ODU5IDE2LjM1NzQyMiBDIDExMC45NTk0MSAxNi40NTY2MDggMTEwLjc5ODQxIDE2LjQ1NjYwOCAxMTAuNjk5MjIgMTYuMzU3NDIyIEwgMTA5LjY0MjU4IDE1LjMwMDc4MSBDIDEwOS41NDMzOSAxNS4yMDE1OTUgMTA5LjU0MzM5IDE1LjA0MDU5MyAxMDkuNjQyNTggMTQuOTQxNDA2IEwgMTExLjU4Mzk4IDEzIEwgMTA5LjY0MjU4IDExLjA1ODU5NCBDIDEwOS41NDMzOSAxMC45NTk0MDcgMTA5LjU0MzM5IDEwLjc5ODQwNSAxMDkuNjQyNTggMTAuNjk5MjE5IEwgMTEwLjY5OTIyIDkuNjQyNTc4MSBDIDExMC43NDg4MSA5LjU5Mjk4NTIgMTEwLjgxNDE4IDkuNTY4MzU5NCAxMTAuODc4OTEgOS41NjgzNTk0IHogTSA4OS4yNTM5MDYgMTUgTCA5Ni43NDYwOTQgMTUgQyA5Ni44ODYzNjUgMTUgOTcgMTUuMTEzNjM1IDk3IDE1LjI1MzkwNiBMIDk3IDE2Ljc0NjA5NCBDIDk3IDE2Ljg4NjM2NSA5Ni44ODYzNjUgMTcgOTYuNzQ2MDk0IDE3IEwgODkuMjUzOTA2IDE3IEMgODkuMTEzNjM1IDE3IDg5IDE2Ljg4NjM2NSA4OSAxNi43NDYwOTQgTCA4OSAxNS4yNTM5MDYgQyA4OSAxNS4xMTM2MzUgODkuMTEzNjM1IDE1IDg5LjI1MzkwNiAxNSB6IE0gMTAuOTEwMTU2IDE3Ljg3MTA5NCBMIDExNy4wODk4NCAxNy44NzEwOTQgTCAxMTcuMDg5ODQgODYuMTI4OTA2IEwgMTAuOTEwMTU2IDg2LjEyODkwNiBMIDEwLjkxMDE1NiAxNy44NzEwOTQgeiAiIC8+CiAgICA8cmVjdAogICAgICAgc3R5bGU9ImZpbGw6IzNlY2M1ZjtzdHJva2Utd2lkdGg6MC43OTA5Mjc7LWlua3NjYXBlLXN0cm9rZTpub25lO2ZpbGwtb3BhY2l0eToxIgogICAgICAgaWQ9InJlY3QzIgogICAgICAgd2lkdGg9IjYiCiAgICAgICBoZWlnaHQ9IjYiCiAgICAgICB4PSIxMDAiCiAgICAgICB5PSIxMCIKICAgICAgIHJ5PSIwLjEyMjUxNjI3IiAvPgogICAgPHRleHQKICAgICAgIHhtbDpzcGFjZT0icHJlc2VydmUiCiAgICAgICBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDtmb250LXNpemU6MjEuMzMzM3B4O2xpbmUtaGVpZ2h0OjE7Zm9udC1mYW1pbHk6TWFuamFyaTstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOidNYW5qYXJpIEJvbGQnO3RleHQtYWxpZ246Y2VudGVyO3RleHQtYW5jaG9yOm1pZGRsZTtmaWxsOiMzZWNjNWY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjQ7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kIgogICAgICAgeD0iMjUiCiAgICAgICB5PSIzMSIKICAgICAgIGlkPSJ0ZXh0MSI+PHRzcGFuCiAgICAgICAgIHNvZGlwb2RpOnJvbGU9ImxpbmUiCiAgICAgICAgIGlkPSJ0c3BhbjEiCiAgICAgICAgIHg9IjI1IgogICAgICAgICB5PSIzMSI+Jmd0O188L3RzcGFuPjwvdGV4dD4KICA8L2c+Cjwvc3ZnPgo=" width="128" height="96" class="img_ev3q"></p>
<p>Vantagens:</p>
<ul>
<li>Utilizar a linguagem que mais estou em dia Python<!-- -->
<ul>
<li>Em outras palavras: Nenhum tempo perdido por errar algo de uma linguagem que não estou acostumado (JavaScript)</li>
</ul>
</li>
<li>Utilizar a mesma linguagem com qual trabalho para fazer queryies</li>
<li>Utilizar o padrão de comunicação que eu quiser<!-- -->
<ul>
<li>No próximo tópico você vai entender o que eu quero dizer com isto</li>
</ul>
</li>
</ul>
<p>Se estivessemos falando de um produto para diversos usuários, definitivamente JavaScript seria a melhor escolha.</p>
<p>Para projeto pessoal com interesse em Godot? Utilizar a linguagem que mais tenho conhecimento no momento.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="communication">Communication<a href="#communication" class="hash-link" aria-label="Link direto para Communication" title="Link direto para Communication">​</a></h2>
<p><img loading="lazy" alt="Shell" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iMzg0IgogICBoZWlnaHQ9Ijk2IgogICB2aWV3Qm94PSIwIDAgMzg0IDk2IgogICB2ZXJzaW9uPSIxLjEiCiAgIGlkPSJzdmcxIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIxLjMgKDE6MS4zKzIwMjMwNzIzMTQ1OSswZTE1MGVkNmM0KSIKICAgc29kaXBvZGk6ZG9jbmFtZT0ic2hlbGxfbW9uZG90LnN2ZyIKICAgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9Im5hbWVkdmlldzEiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjMTExMTExIgogICAgIGJvcmRlcm9wYWNpdHk9IjEiCiAgICAgaW5rc2NhcGU6c2hvd3BhZ2VzaGFkb3c9ImZhbHNlIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwIgogICAgIGlua3NjYXBlOnBhZ2VjaGVja2VyYm9hcmQ9IjEiCiAgICAgaW5rc2NhcGU6ZGVza2NvbG9yPSIjYWZhZmFmIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBzaG93Z3JpZD0idHJ1ZSIKICAgICBsYWJlbHN0eWxlPSJkZWZhdWx0IgogICAgIGlua3NjYXBlOnpvb209IjUuODE1NDg4MSIKICAgICBpbmtzY2FwZTpjeD0iMjkzLjk1NjQxIgogICAgIGlua3NjYXBlOmN5PSI3MC4xNTc0ODEiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxOTIwIgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9IjEwMTYiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjE5MjAiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjI3IgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjEiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIj48aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9ImdyaWQxIgogICAgICAgdW5pdHM9InB4IgogICAgICAgb3JpZ2lueD0iMCIKICAgICAgIG9yaWdpbnk9IjAiCiAgICAgICBzcGFjaW5neD0iMSIKICAgICAgIHNwYWNpbmd5PSIxIgogICAgICAgZW1wY29sb3I9IiMwMDk5ZTUiCiAgICAgICBlbXBvcGFjaXR5PSIwLjMwMTk2MDc4IgogICAgICAgY29sb3I9IiMwMDk5ZTUiCiAgICAgICBvcGFjaXR5PSIwLjE0OTAxOTYxIgogICAgICAgZW1wc3BhY2luZz0iOCIKICAgICAgIGRvdHRlZD0iZmFsc2UiCiAgICAgICBncmlkYW5nbGV4PSIzMCIKICAgICAgIGdyaWRhbmdsZXo9IjMwIgogICAgICAgdmlzaWJsZT0idHJ1ZSIgLz48L3NvZGlwb2RpOm5hbWVkdmlldz48ZGVmcwogICAgIGlkPSJkZWZzMSIgLz48ZwogICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgIGlua3NjYXBlOmdyb3VwbW9kZT0ibGF5ZXIiCiAgICAgaWQ9ImxheWVyMSI+PGcKICAgICAgIGlkPSJnMSI+PHBhdGgKICAgICAgICAgaWQ9InJlY3QyIgogICAgICAgICBzdHlsZT0iZmlsbDojM2VjYzVmO3N0cm9rZS13aWR0aDozLjY3NTI3Oy1pbmtzY2FwZS1zdHJva2U6bm9uZSIKICAgICAgICAgZD0iTSAyNjYuNjk5MjIsOCBDIDI2NS4yMDM5MSw4IDI2NCw5LjIwMzkwNTMgMjY0LDEwLjY5OTIxOSB2IDc0LjcwNTA3OCBjIDAsMS40OTUzMDkgMS4yMDM5MSwyLjY5OTIxOSAyLjY5OTIyLDIuNjk5MjE5IGggMTA2LjYwMTU2IGMgMS40OTUzMiwwIDIuNjk5MjIsLTEuMjAzOTEgMi42OTkyMiwtMi42OTkyMTkgViAxMC42OTkyMTkgQyAzNzYsOS4yMDM5MDUzIDM3NC43OTYxLDggMzczLjMwMDc4LDggWiBtIDg4LjU1NDY5LDEgaCA3LjQ5MjE4IEMgMzYyLjg4NjM2LDkgMzYzLDkuMTEzNjM1OSAzNjMsOS4yNTM5MDYyIFYgMTYuNzQ2MDk0IEMgMzYzLDE2Ljg4NjM2NSAzNjIuODg2MzYsMTcgMzYyLjc0NjA5LDE3IGggLTcuNDkyMTggQyAzNTUuMTEzNjMsMTcgMzU1LDE2Ljg4NjM2NSAzNTUsMTYuNzQ2MDk0IFYgOS4yNTM5MDYyIEMgMzU1LDkuMTEzNjM1OSAzNTUuMTEzNjMsOSAzNTUuMjUzOTEsOSBaIG0gMTEuNjI1LDAuNTY4MzU5NCBjIDAuMDY0NywwIDAuMTMwMDksMC4wMjQ2MjYgMC4xNzk2OCwwLjA3NDIxOSBMIDM2OSwxMS41ODM5ODQgMzcwLjk0MTQxLDkuNjQyNTc4MSBjIDAuMDk5MiwtMC4wOTkxODYgMC4yNjAxOCwtMC4wOTkxODYgMC4zNTkzNywwIGwgMS4wNTY2NCwxLjA1NjY0MDkgYyAwLjA5OTIsMC4wOTkxOSAwLjA5OTIsMC4yNjAxODggMCwwLjM1OTM3NSBMIDM3MC40MTYwMiwxMyBsIDEuOTQxNCwxLjk0MTQwNiBjIDAuMDk5MiwwLjA5OTE5IDAuMDk5MiwwLjI2MDE4OSAwLDAuMzU5Mzc1IGwgLTEuMDU2NjQsMS4wNTY2NDEgYyAtMC4wOTkyLDAuMDk5MTkgLTAuMjYwMTksMC4wOTkxOSAtMC4zNTkzNywwIEwgMzY5LDE0LjQxNjAxNiBsIC0xLjk0MTQxLDEuOTQxNDA2IGMgLTAuMDk5MiwwLjA5OTE5IC0wLjI2MDE4LDAuMDk5MTkgLTAuMzU5MzcsMCBsIC0xLjA1NjY0LC0xLjA1NjY0MSBjIC0wLjA5OTIsLTAuMDk5MTkgLTAuMDk5MiwtMC4yNjAxODggMCwtMC4zNTkzNzUgTCAzNjcuNTgzOTgsMTMgbCAtMS45NDE0LC0xLjk0MTQwNiBjIC0wLjA5OTIsLTAuMDk5MTkgLTAuMDk5MiwtMC4yNjAxODkgMCwtMC4zNTkzNzUgbCAxLjA1NjY0LC0xLjA1NjY0MDkgYyAwLjA0OTYsLTAuMDQ5NTkzIDAuMTE0OTYsLTAuMDc0MjE5IDAuMTc5NjksLTAuMDc0MjE5IHogTSAzNDUuMjUzOTEsMTUgaCA3LjQ5MjE4IEMgMzUyLjg4NjM2LDE1IDM1MywxNS4xMTM2MzUgMzUzLDE1LjI1MzkwNiB2IDEuNDkyMTg4IEMgMzUzLDE2Ljg4NjM2NSAzNTIuODg2MzYsMTcgMzUyLjc0NjA5LDE3IGggLTcuNDkyMTggQyAzNDUuMTEzNjMsMTcgMzQ1LDE2Ljg4NjM2NSAzNDUsMTYuNzQ2MDk0IFYgMTUuMjUzOTA2IEMgMzQ1LDE1LjExMzYzNSAzNDUuMTEzNjMsMTUgMzQ1LjI1MzkxLDE1IFogbSAtNzguMzQzNzUsMi44NzEwOTQgSCAzNzMuMDg5ODQgViA4Ni4xMjg5MDYgSCAyNjYuOTEwMTYgWiIgLz48cmVjdAogICAgICAgICBzdHlsZT0iZmlsbDojM2VjYzVmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDowLjc5MDkyNzstaW5rc2NhcGUtc3Ryb2tlOm5vbmUiCiAgICAgICAgIGlkPSJyZWN0MyIKICAgICAgICAgd2lkdGg9IjYiCiAgICAgICAgIGhlaWdodD0iNiIKICAgICAgICAgeD0iMzU2IgogICAgICAgICB5PSIxMCIKICAgICAgICAgcnk9IjAuMTIyNTE2MjciIC8+PHJlY3QKICAgICAgICAgc3R5bGU9ImZpbGw6IzNlY2M1ZjtzdHJva2Utd2lkdGg6NC4zMzA3MztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiCiAgICAgICAgIGlkPSJyZWN0MSIKICAgICAgICAgd2lkdGg9Ijg0IgogICAgICAgICBoZWlnaHQ9IjQ0IgogICAgICAgICB4PSIyODgiCiAgICAgICAgIHk9IjIwIgogICAgICAgICByeD0iMCIKICAgICAgICAgcnk9IjAiIC8+PHJlY3QKICAgICAgICAgc3R5bGU9ImZpbGw6IzNlY2M1ZjtzdHJva2Utd2lkdGg6Mi42NjYyNjtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiCiAgICAgICAgIGlkPSJyZWN0MS01IgogICAgICAgICB3aWR0aD0iODQiCiAgICAgICAgIGhlaWdodD0iMTYuNjc3Njk4IgogICAgICAgICB4PSIyODgiCiAgICAgICAgIHk9IjY3LjMyMjMwNCIKICAgICAgICAgcng9IjAiCiAgICAgICAgIHJ5PSIwIiAvPjxyZWN0CiAgICAgICAgIHN0eWxlPSJmaWxsOiMzZWNjNWY7c3Ryb2tlLXdpZHRoOjIuNDE3ODE7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kIgogICAgICAgICBpZD0icmVjdDEtNS0yIgogICAgICAgICB3aWR0aD0iMTgiCiAgICAgICAgIGhlaWdodD0iNjQiCiAgICAgICAgIHg9IjI2OCIKICAgICAgICAgeT0iMjAiCiAgICAgICAgIHJ4PSIwIgogICAgICAgICByeT0iMCIgLz48L2c+PGcKICAgICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgICAgaWQ9ImxheWVyMS0wIj48cGF0aAogICAgICAgICBpZD0icmVjdDItOSIKICAgICAgICAgc3R5bGU9ImZpbGw6IzNlY2M1ZjtzdHJva2Utd2lkdGg6My42NzUyNzstaW5rc2NhcGUtc3Ryb2tlOm5vbmUiCiAgICAgICAgIGQ9Ik0gMTAuNjk5MjE5LDggQyA5LjIwMzkwNTMsOCA4LDkuMjAzOTA1MyA4LDEwLjY5OTIxOSB2IDc0LjcwNTA3OCBjIDAsMS40OTUzMDkgMS4yMDM5MDUzLDIuNjk5MjE5IDIuNjk5MjE5LDIuNjk5MjE5IEggMTE3LjMwMDc4IGMgMS40OTUzMiwwIDIuNjk5MjIsLTEuMjAzOTEgMi42OTkyMiwtMi42OTkyMTkgViAxMC42OTkyMTkgQyAxMjAsOS4yMDM5MDUzIDExOC43OTYxLDggMTE3LjMwMDc4LDggWiBtIDg4LjU1NDY4NywxIGggNy40OTIxODQgQyAxMDYuODg2MzYsOSAxMDcsOS4xMTM2MzU5IDEwNyw5LjI1MzkwNjIgViAxNi43NDYwOTQgQyAxMDcsMTYuODg2MzY1IDEwNi44ODYzNiwxNyAxMDYuNzQ2MDksMTcgSCA5OS4yNTM5MDYgQyA5OS4xMTM2MzUsMTcgOTksMTYuODg2MzY1IDk5LDE2Ljc0NjA5NCBWIDkuMjUzOTA2MiBDIDk5LDkuMTEzNjM1OSA5OS4xMTM2MzUsOSA5OS4yNTM5MDYsOSBaIG0gMTEuNjI1MDA0LDAuNTY4MzU5NCBjIDAuMDY0NywwIDAuMTMwMDksMC4wMjQ2MjYgMC4xNzk2OCwwLjA3NDIxOSBMIDExMywxMS41ODM5ODQgMTE0Ljk0MTQxLDkuNjQyNTc4MSBjIDAuMDk5MiwtMC4wOTkxODYgMC4yNjAxOCwtMC4wOTkxODYgMC4zNTkzNywwIGwgMS4wNTY2NCwxLjA1NjY0MDkgYyAwLjA5OTIsMC4wOTkxOSAwLjA5OTIsMC4yNjAxODggMCwwLjM1OTM3NSBMIDExNC40MTYwMiwxMyBsIDEuOTQxNCwxLjk0MTQwNiBjIDAuMDk5MiwwLjA5OTE5IDAuMDk5MiwwLjI2MDE4OSAwLDAuMzU5Mzc1IGwgLTEuMDU2NjQsMS4wNTY2NDEgYyAtMC4wOTkyLDAuMDk5MTkgLTAuMjYwMTksMC4wOTkxOSAtMC4zNTkzNywwIEwgMTEzLDE0LjQxNjAxNiBsIC0xLjk0MTQxLDEuOTQxNDA2IGMgLTAuMDk5MiwwLjA5OTE5IC0wLjI2MDE4LDAuMDk5MTkgLTAuMzU5MzcsMCBsIC0xLjA1NjY0LC0xLjA1NjY0MSBjIC0wLjA5OTIsLTAuMDk5MTkgLTAuMDk5MiwtMC4yNjAxODggMCwtMC4zNTkzNzUgTCAxMTEuNTgzOTgsMTMgbCAtMS45NDE0LC0xLjk0MTQwNiBjIC0wLjA5OTIsLTAuMDk5MTkgLTAuMDk5MiwtMC4yNjAxODkgMCwtMC4zNTkzNzUgbCAxLjA1NjY0LC0xLjA1NjY0MDkgYyAwLjA0OTYsLTAuMDQ5NTkzIDAuMTE0OTYsLTAuMDc0MjE5IDAuMTc5NjksLTAuMDc0MjE5IHogTSA4OS4yNTM5MDYsMTUgaCA3LjQ5MjE4OCBDIDk2Ljg4NjM2NSwxNSA5NywxNS4xMTM2MzUgOTcsMTUuMjUzOTA2IHYgMS40OTIxODggQyA5NywxNi44ODYzNjUgOTYuODg2MzY1LDE3IDk2Ljc0NjA5NCwxNyBIIDg5LjI1MzkwNiBDIDg5LjExMzYzNSwxNyA4OSwxNi44ODYzNjUgODksMTYuNzQ2MDk0IFYgMTUuMjUzOTA2IEMgODksMTUuMTEzNjM1IDg5LjExMzYzNSwxNSA4OS4yNTM5MDYsMTUgWiBtIC03OC4zNDM3NSwyLjg3MTA5NCBIIDExNy4wODk4NCBWIDg2LjEyODkwNiBIIDEwLjkxMDE1NiBaIiAvPjxyZWN0CiAgICAgICAgIHN0eWxlPSJmaWxsOiMzZWNjNWY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjAuNzkwOTI3Oy1pbmtzY2FwZS1zdHJva2U6bm9uZSIKICAgICAgICAgaWQ9InJlY3QzLTMiCiAgICAgICAgIHdpZHRoPSI2IgogICAgICAgICBoZWlnaHQ9IjYiCiAgICAgICAgIHg9IjEwMCIKICAgICAgICAgeT0iMTAiCiAgICAgICAgIHJ5PSIwLjEyMjUxNjI3IiAvPjx0ZXh0CiAgICAgICAgIHhtbDpzcGFjZT0icHJlc2VydmUiCiAgICAgICAgIHN0eWxlPSJmb250LXdlaWdodDpib2xkO2ZvbnQtc2l6ZToyMS4zMzMzcHg7bGluZS1oZWlnaHQ6MTtmb250LWZhbWlseTpNYW5qYXJpOy1pbmtzY2FwZS1mb250LXNwZWNpZmljYXRpb246J01hbmphcmkgQm9sZCc7dGV4dC1hbGlnbjpjZW50ZXI7dGV4dC1hbmNob3I6bWlkZGxlO2ZpbGw6IzNlY2M1ZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6NDtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiCiAgICAgICAgIHg9IjI1IgogICAgICAgICB5PSIzMSIKICAgICAgICAgaWQ9InRleHQxIj48dHNwYW4KICAgICAgICAgICBzb2RpcG9kaTpyb2xlPSJsaW5lIgogICAgICAgICAgIGlkPSJ0c3BhbjEiCiAgICAgICAgICAgeD0iMjUiCiAgICAgICAgICAgeT0iMzEiPiZndDtfPC90c3Bhbj48L3RleHQ+PC9nPjxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDojM2VjYzVmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojM2VjYzVmO3N0cm9rZS13aWR0aDo4LjM2MzQ5O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTttYXJrZXItZW5kOiIKICAgICAgIGQ9Im0gMTQwLjcwMjg3LDM4Ljc2NjkyMiBjIDEwOC4yMDY1NCwwIDEwOS4wMjAzNiwwIDEwOS4wMjAzNiwwIHoiCiAgICAgICBpZD0icGF0aDEiIC8+PHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOiMzZWNjNWY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMzZWNjNWY7c3Ryb2tlLXdpZHRoOjguMzYzNDk7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxO21hcmtlci1lbmQ6IgogICAgICAgZD0ibSAyNDMuMTkzMDMsNTcuMjMzMDc3IGMgLTEwOC4yMDY1NCwwIC0xMDkuMDIwMzYsMCAtMTA5LjAyMDM2LDAgeiIKICAgICAgIGlkPSJwYXRoMS04IiAvPjxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJzdGFyIgogICAgICAgc3R5bGU9ImZpbGw6IzNlY2M1ZjtzdHJva2U6IzNlY2M1ZjtzdHJva2Utd2lkdGg6ODtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiCiAgICAgICBpZD0icGF0aDItMyIKICAgICAgIGlua3NjYXBlOmZsYXRzaWRlZD0idHJ1ZSIKICAgICAgIHNvZGlwb2RpOnNpZGVzPSIzIgogICAgICAgc29kaXBvZGk6Y3g9IjIxMi4yOTgyMiIKICAgICAgIHNvZGlwb2RpOmN5PSI3My45NDg2MDEiCiAgICAgICBzb2RpcG9kaTpyMT0iOC4zMTkzNDA3IgogICAgICAgc29kaXBvZGk6cjI9IjQuMTU5NjcwNCIKICAgICAgIHNvZGlwb2RpOmFyZzE9IjIuMDk0Mzk1MSIKICAgICAgIHNvZGlwb2RpOmFyZzI9IjMuMTQxNTkyNyIKICAgICAgIGlua3NjYXBlOnJvdW5kZWQ9IjAiCiAgICAgICBpbmtzY2FwZTpyYW5kb21pemVkPSIwIgogICAgICAgZD0ibSAyMDguMTM4NTUsODEuMTUzMzYxIDAsLTE0LjQwOTUyMSAxMi40NzkwMSw3LjIwNDc2MSB6IgogICAgICAgaW5rc2NhcGU6dHJhbnNmb3JtLWNlbnRlci14PSItMS43MjY1Mzg2IgogICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMC44MzAxMzQ0LDAsMCwwLjgzMDEzNDQsNzQuNTM3NTcsLTQuMTU0MjAwMykiIC8+PHBhdGgKICAgICAgIHNvZGlwb2RpOnR5cGU9InN0YXIiCiAgICAgICBzdHlsZT0iZmlsbDojM2VjYzVmO3N0cm9rZTojM2VjYzVmO3N0cm9rZS13aWR0aDo4O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZCIKICAgICAgIGlkPSJwYXRoMiIKICAgICAgIGlua3NjYXBlOmZsYXRzaWRlZD0idHJ1ZSIKICAgICAgIHNvZGlwb2RpOnNpZGVzPSIzIgogICAgICAgc29kaXBvZGk6Y3g9IjIxMi4yOTgyMiIKICAgICAgIHNvZGlwb2RpOmN5PSI3My45NDg2MDEiCiAgICAgICBzb2RpcG9kaTpyMT0iOC4zMTkzNDA3IgogICAgICAgc29kaXBvZGk6cjI9IjQuMTU5NjcwNCIKICAgICAgIHNvZGlwb2RpOmFyZzE9IjIuMDk0Mzk1MSIKICAgICAgIHNvZGlwb2RpOmFyZzI9IjMuMTQxNTkyNyIKICAgICAgIGlua3NjYXBlOnJvdW5kZWQ9IjAiCiAgICAgICBpbmtzY2FwZTpyYW5kb21pemVkPSIwIgogICAgICAgZD0ibSAyMDguMTM4NTUsODEuMTUzMzYxIDAsLTE0LjQwOTUyMSAxMi40NzkwMSw3LjIwNDc2MSB6IgogICAgICAgaW5rc2NhcGU6dHJhbnNmb3JtLWNlbnRlci14PSIxLjcyNjUzOTEiCiAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCgtMC44MzAxMzQ0LDAsMCwwLjgzMDEzNDQsMzA5LjQ2MjQzLC0yMi42MjAzNTUpIiAvPjwvZz48L3N2Zz4K" width="384" height="96" class="img_ev3q"></p>
<p>De todas as maneiras para duas aplicações se comunicarem, eu escolhi a mais simples.</p>
<p><strong>Arquivos...</strong> <!-- -->:D</p>
<p>Em vez de quebrar a cabeça para entender como eu poderia reproduzir a interatividade do shell do Mongo, eu poderia apenas fazer com que ambos escrevessem em arquivos quando quisessem se comunicar um com o outro.</p>
<p>O processo em si é bem simples:</p>
<ol>
<li>Godot executa o shell, passando a query</li>
<li>Shell escreve X documentos em um arquivo</li>
<li>Godot solicita mais documentos</li>
</ol>
<p>Note que você deve repetir etapa 2 e 3 até acabar os documentos ou Godot mandar parar.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="start-1">Start<a href="#start-1" class="hash-link" aria-label="Link direto para Start" title="Link direto para Start">​</a></h3>
<p><img loading="lazy" alt="Primeira parte da comunicação entre shell e Mondot" src="/pt-br/assets/images/shell_mondot_communication_0-376a8f5977248c6b63ee22f2645d86fb.svg" width="384" height="320" class="img_ev3q"></p>
<ol>
<li>Godot escreve o código Python em um arquivo<!-- -->
<ul>
<li><code>xxxxx</code> representa o nome do arquivo</li>
<li>O nome do arquivo é aleatório</li>
</ul>
</li>
<li>Godot executa o shell passando o caminho para o arquivo como parâmetro</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="output">Output<a href="#output" class="hash-link" aria-label="Link direto para Output" title="Link direto para Output">​</a></h3>
<p><img loading="lazy" alt="Segunda parte da comunicação entre shell e Mondot" src="/pt-br/assets/images/shell_mondot_communication_1-91a7258b2a21d3521fce61b8a64609e6.svg" width="384" height="440" class="img_ev3q"></p>
<ul>
<li>Godot fica periodicamente conferindo se o arquivo de saída existe<!-- -->
<ul>
<li><code>xxxxx_out_0</code> representa o <strong>primeiro</strong> arquivo de saída<!-- -->
<ul>
<li><code>xxxxx_out_1</code> segundo arquivo de saída</li>
<li><code>xxxxx_out_2</code> terceiro arquivo de saída</li>
<li>etc</li>
</ul>
</li>
</ul>
</li>
<li>Shell escreve no arquivo de saída um <a href="https://en.wikipedia.org/wiki/JSON" target="_blank" rel="noopener noreferrer">JSON</a> com o resultado da query<!-- -->
<ul>
<li>O resultado de uma query pode ser partido em diversos arquivos<!-- -->
<ul>
<li><code>xxxxx_out_0</code>, <code>xxxxx_out_1</code>, <code>xxxxx_out_2</code>, ...</li>
<li>Esses arquivos são criados conforme o usuário solicita mais documentos do resultado</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="input">Input<a href="#input" class="hash-link" aria-label="Link direto para Input" title="Link direto para Input">​</a></h3>
<p><img loading="lazy" alt="Terceira parte da comunicação entre shell e Mondot" src="/pt-br/assets/images/shell_mondot_communication_2-e58894562aaecdca8ae484bcac94bbad.svg" width="384" height="440" class="img_ev3q"></p>
<ul>
<li>Godot escreve no arquivo de entrada solicitando mais documentos do resultado da query</li>
<li>Shell fica periodicamente conferindo se tem algo escrito no arquivo de entrada<!-- -->
<ul>
<li><code>xxxxx_in</code> representa o arquivo de entrada</li>
<li>Ele lê o arquivo e remove o conteúdo do arquivo<!-- -->
<ul>
<li>Justamente para receber futuras solicitações pelo mesmo arquivo</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="shell">Shell<a href="#shell" class="hash-link" aria-label="Link direto para Shell" title="Link direto para Shell">​</a></h2>
<p>O que o meu shell precisa fazer?</p>
<ul>
<li>Receber o código do usuário</li>
<li>Executar o código do usuário</li>
<li>Iterar sobre o resultado do código<!-- -->
<ul>
<li>Iterar em partes (pegando X documentos por vez)</li>
</ul>
</li>
</ul>
<p>Em outras palavras, eu preciso acoplar o código do usuário ao código do shell.</p>
<p><img loading="lazy" alt="Código do usuário sendo acoplado no meio do código do shell" src="/pt-br/assets/images/shell_python_code-3a1ec3f7e6f66dc27c234512bbe738f8.svg" width="128" height="192" class="img_ev3q"></p>
<p>Note que existem operações que meu shell irá fazer antes e após a execução do código do usuário. Por causa disso, o desenho mostra o código no meio do código shell.</p>
<p>O plano era receber um código simples do usuário, parecido com o do shell do Mongo:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="attempt-1">Attempt 1<a href="#attempt-1" class="hash-link" aria-label="Link direto para Attempt 1" title="Link direto para Attempt 1">​</a></h3>
<p><a href="https://docs.python.org/3/library/functions.html#eval" target="_blank" rel="noopener noreferrer"><code>eval(expression, globals=None, locals=None)</code></a></p>
<p><strong>Bom</strong>: A função faz o parser e avalia a expressão, retornando o resultado dela.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">eval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    db.test.find({})</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Ruim</strong>: Precisa ser uma expressão. Uma ou mais declarações não funcionam.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">eval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    db.test.find({})</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    db.test.find({})</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="attempt-2">Attempt 2<a href="#attempt-2" class="hash-link" aria-label="Link direto para Attempt 2" title="Link direto para Attempt 2">​</a></h3>
<p><a href="https://docs.python.org/3/library/functions.html#exec" target="_blank" rel="noopener noreferrer"><code>exec(object, globals=None, locals=None, /, *, closure=None)</code></a></p>
<p><strong>Bom</strong>: Executa múltiplas declarações.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">exec</span><span class="token punctuation" style="color:#393A34">(</span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    db.test.find({})</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    db.test.find({})</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Ruim</strong>: Cada declaração pode ter ou não um resultado, então essa função não retornar nada.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># result is None</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">exec</span><span class="token punctuation" style="color:#393A34">(</span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    db.test.find({})</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    db.test.find({})</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="problem">Problem<a href="#problem" class="hash-link" aria-label="Link direto para Problem" title="Link direto para Problem">​</a></h3>
<p>Nas tentativas acima, para obter o resultado desejado eu teria que alterar a string. Porém, isto apresenta grande risco da alteração dar erro pois cada caso pode requer uma alteração diferente.</p>
<p>No final eu seria forçado a ler o código, entende-lo para depois alterar sem grande chance de erros. Mas sabe quem já faz isso de ler e entender código? O compilador.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ast">AST<a href="#ast" class="hash-link" aria-label="Link direto para AST" title="Link direto para AST">​</a></h2>
<p><img loading="lazy" alt="Desenho de uma árvore para representar AST" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iMTc2IgogICBoZWlnaHQ9IjE4MCIKICAgdmlld0JveD0iMCAwIDE3NiAxODAiCiAgIHZlcnNpb249IjEuMSIKICAgaWQ9InN2ZzEiCiAgIGlua3NjYXBlOnZlcnNpb249IjEuMyAoMToxLjMrMjAyMzA3MjMxNDU5KzBlMTUwZWQ2YzQpIgogICBzb2RpcG9kaTpkb2NuYW1lPSJ0cmVlLnN2ZyIKICAgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJuYW1lZHZpZXcxIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzExMTExMSIKICAgICBib3JkZXJvcGFjaXR5PSIxIgogICAgIGlua3NjYXBlOnNob3dwYWdlc2hhZG93PSJmYWxzZSIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMCIKICAgICBpbmtzY2FwZTpwYWdlY2hlY2tlcmJvYXJkPSIxIgogICAgIGlua3NjYXBlOmRlc2tjb2xvcj0iI2FmYWZhZiIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgbGFiZWxzdHlsZT0iZGVmYXVsdCIKICAgICBpbmtzY2FwZTp6b29tPSI0LjExMjE3MTIiCiAgICAgaW5rc2NhcGU6Y3g9IjEzNC44NDM2MSIKICAgICBpbmtzY2FwZTpjeT0iOTQuMzU0MDQ4IgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTkyMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSIxMDE2IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIxOTIwIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIyNyIKICAgICBpbmtzY2FwZTp3aW5kb3ctbWF4aW1pemVkPSIxIgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImxheWVyMSI+PGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJncmlkMSIKICAgICAgIHVuaXRzPSJweCIKICAgICAgIG9yaWdpbng9IjAiCiAgICAgICBvcmlnaW55PSIwIgogICAgICAgc3BhY2luZ3g9IjEiCiAgICAgICBzcGFjaW5neT0iMSIKICAgICAgIGVtcGNvbG9yPSIjMDA5OWU1IgogICAgICAgZW1wb3BhY2l0eT0iMC4zMDE5NjA3OCIKICAgICAgIGNvbG9yPSIjMDA5OWU1IgogICAgICAgb3BhY2l0eT0iMC4xNDkwMTk2MSIKICAgICAgIGVtcHNwYWNpbmc9IjgiCiAgICAgICBkb3R0ZWQ9ImZhbHNlIgogICAgICAgZ3JpZGFuZ2xleD0iMzAiCiAgICAgICBncmlkYW5nbGV6PSIzMCIKICAgICAgIHZpc2libGU9InRydWUiIC8+PC9zb2RpcG9kaTpuYW1lZHZpZXc+PGRlZnMKICAgICBpZD0iZGVmczEiPjxsaW5lYXJHcmFkaWVudAogICAgICAgaWQ9ImEiCiAgICAgICB4MT0iLTEzMy4yNjgwMSIKICAgICAgIHkxPSItMjAyLjkxIgogICAgICAgeDI9Ii0xMzMuMTk4IgogICAgICAgeTI9Ii0yMDIuODQiCiAgICAgICBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDE4OS4zOCwwLDAsMTg5LjgxLDI1MjQzLjA2MSwzODUxOS4xNykiCiAgICAgICBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3AKICAgICAgICAgb2Zmc2V0PSIwIgogICAgICAgICBzdG9wLWNvbG9yPSIjMzg3ZWI4IgogICAgICAgICBpZD0ic3RvcDEiIC8+PHN0b3AKICAgICAgICAgb2Zmc2V0PSIxIgogICAgICAgICBzdG9wLWNvbG9yPSIjMzY2OTk0IgogICAgICAgICBpZD0ic3RvcDIiIC8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQKICAgICAgIGlkPSJiIgogICAgICAgeDE9Ii0xMzMuNTc1IgogICAgICAgeTE9Ii0yMDMuMjAzIgogICAgICAgeDI9Ii0xMzMuNDk1IgogICAgICAgeTI9Ii0yMDMuMTMzIgogICAgICAgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgxODkuMzgsMCwwLDE4OS44MSwyNTMwOS4wNjEsMzg1ODMuNDIpIgogICAgICAgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wCiAgICAgICAgIG9mZnNldD0iMCIKICAgICAgICAgc3RvcC1jb2xvcj0iI2ZmZTA1MiIKICAgICAgICAgaWQ9InN0b3AzIiAvPjxzdG9wCiAgICAgICAgIG9mZnNldD0iMSIKICAgICAgICAgc3RvcC1jb2xvcj0iI2ZmYzMzMSIKICAgICAgICAgaWQ9InN0b3A0IiAvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50CiAgICAgICBpZD0iYS02IgogICAgICAgeDE9Ii0xMzMuMjY4MDEiCiAgICAgICB5MT0iLTIwMi45MSIKICAgICAgIHgyPSItMTMzLjE5OCIKICAgICAgIHkyPSItMjAyLjg0IgogICAgICAgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgxODkuMzgsMCwwLDE4OS44MSwyNTI0My4wNjEsMzg1MTkuMTcpIgogICAgICAgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wCiAgICAgICAgIG9mZnNldD0iMCIKICAgICAgICAgc3RvcC1jb2xvcj0iIzM4N2ViOCIKICAgICAgICAgaWQ9InN0b3AxLTkiIC8+PHN0b3AKICAgICAgICAgb2Zmc2V0PSIxIgogICAgICAgICBzdG9wLWNvbG9yPSIjMzY2OTk0IgogICAgICAgICBpZD0ic3RvcDItMyIgLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudAogICAgICAgaWQ9ImItNyIKICAgICAgIHgxPSItMTMzLjU3NSIKICAgICAgIHkxPSItMjAzLjIwMyIKICAgICAgIHgyPSItMTMzLjQ5NSIKICAgICAgIHkyPSItMjAzLjEzMyIKICAgICAgIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMTg5LjM4LDAsMCwxODkuODEsMjUzMDkuMDYxLDM4NTgzLjQyKSIKICAgICAgIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcAogICAgICAgICBvZmZzZXQ9IjAiCiAgICAgICAgIHN0b3AtY29sb3I9IiNmZmUwNTIiCiAgICAgICAgIGlkPSJzdG9wMy00IiAvPjxzdG9wCiAgICAgICAgIG9mZnNldD0iMSIKICAgICAgICAgc3RvcC1jb2xvcj0iI2ZmYzMzMSIKICAgICAgICAgaWQ9InN0b3A0LTUiIC8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQKICAgICAgIGlkPSJsaW5lYXJHcmFkaWVudDgzODUiPjxzdG9wCiAgICAgICAgIG9mZnNldD0iMCIKICAgICAgICAgaWQ9InN0b3AxLTciIC8+PHN0b3AKICAgICAgICAgc3RvcC1jb2xvcj0iI2ZmZiIKICAgICAgICAgb2Zmc2V0PSIxIgogICAgICAgICBpZD0ic3RvcDItMiIgLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudAogICAgICAgaWQ9ImxpbmVhckdyYWRpZW50MzAwMiIKICAgICAgIHgxPSItNTUzLjI3MDAyIgogICAgICAgeDI9Ii02NjYuMTIiCiAgICAgICB5MT0iNTI1LjkwOTk3IgogICAgICAgeTI9IjQxMy4wNDk5OSIKICAgICAgIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMC45OTg4NCwwLDAsMC45OTg3LDY4OS4wMSwtMzg4Ljg0KSIKICAgICAgIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIgogICAgICAgeGxpbms6aHJlZj0iI2xpbmVhckdyYWRpZW50ODM4NSIgLz48bGluZWFyR3JhZGllbnQKICAgICAgIGlkPSJsaW5lYXJHcmFkaWVudDMwMDUiCiAgICAgICB4MT0iLTY2Ni4xMiIKICAgICAgIHgyPSItNTUzLjI3MDAyIgogICAgICAgeTE9IjQxMy4wNDAwMSIKICAgICAgIHkyPSI1MjUuOTA5OTciCiAgICAgICBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDAuOTk4ODQsMCwwLDAuOTk4Nyw2ODkuMDEsLTM4OC44NCkiCiAgICAgICBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIKICAgICAgIHhsaW5rOmhyZWY9IiNsaW5lYXJHcmFkaWVudDgzODUiIC8+PC9kZWZzPjxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj48Y2lyY2xlCiAgICAgICBzdHlsZT0iZmlsbDojM2VjYzVmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDo3LjY1MTgyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZCIKICAgICAgIGlkPSJwYXRoMSIKICAgICAgIGN4PSI3NiIKICAgICAgIGN5PSI2OCIKICAgICAgIHI9IjIwIiAvPjxjaXJjbGUKICAgICAgIHN0eWxlPSJmaWxsOiMzZWNjNWY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjcuNjUxODI7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kIgogICAgICAgaWQ9InBhdGgxLTQiCiAgICAgICBjeD0iMTAwIgogICAgICAgY3k9IjY4IgogICAgICAgcj0iMjAiIC8+PGNpcmNsZQogICAgICAgc3R5bGU9ImZpbGw6IzNlY2M1ZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6Ny42NTE4MjtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiCiAgICAgICBpZD0icGF0aDEtMyIKICAgICAgIGN4PSIxMjQiCiAgICAgICBjeT0iNjAiCiAgICAgICByPSIyMCIgLz48Y2lyY2xlCiAgICAgICBzdHlsZT0iZmlsbDojM2VjYzVmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDo3LjY1MTgyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZCIKICAgICAgIGlkPSJwYXRoMS02IgogICAgICAgY3g9IjUyIgogICAgICAgY3k9IjYwIgogICAgICAgcj0iMjAiIC8+PGNpcmNsZQogICAgICAgc3R5bGU9ImZpbGw6IzNlY2M1ZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6Ny42NTE4MjtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiCiAgICAgICBpZD0icGF0aDEtMzEiCiAgICAgICBjeD0iMTQwIgogICAgICAgY3k9IjQ0IgogICAgICAgcj0iMjAiIC8+PGNpcmNsZQogICAgICAgc3R5bGU9ImZpbGw6IzNlY2M1ZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6Ny42NTE4MjtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiCiAgICAgICBpZD0icGF0aDEtMCIKICAgICAgIGN4PSIzNiIKICAgICAgIGN5PSI0NCIKICAgICAgIHI9IjIwIiAvPjxjaXJjbGUKICAgICAgIHN0eWxlPSJmaWxsOiMzZWNjNWY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjcuNjUxODI7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kIgogICAgICAgaWQ9InBhdGgxLTIiCiAgICAgICBjeD0iNjAiCiAgICAgICBjeT0iMzYiCiAgICAgICByPSIyMCIgLz48Y2lyY2xlCiAgICAgICBzdHlsZT0iZmlsbDojM2VjYzVmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDo3LjY1MTgyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZCIKICAgICAgIGlkPSJwYXRoMS05IgogICAgICAgY3g9IjExNiIKICAgICAgIGN5PSIzNiIKICAgICAgIHI9IjIwIiAvPjxlbGxpcHNlCiAgICAgICBzdHlsZT0iZmlsbDojM2VjYzVmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDo4LjM4MjE1O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZCIKICAgICAgIGlkPSJwYXRoMS04IgogICAgICAgY3g9Ijg4IgogICAgICAgY3k9IjM2IgogICAgICAgcng9IjI0IgogICAgICAgcnk9IjIwIiAvPjxlbGxpcHNlCiAgICAgICBzdHlsZT0iZmlsbDojM2VjYzVmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDo4LjM4MjE1O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZCIKICAgICAgIGlkPSJwYXRoMS04LTEiCiAgICAgICBjeD0iNTYiCiAgICAgICBjeT0iMjgiCiAgICAgICByeD0iMjQiCiAgICAgICByeT0iMjAiIC8+PGVsbGlwc2UKICAgICAgIHN0eWxlPSJmaWxsOiMzZWNjNWY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjguMzgyMTU7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kIgogICAgICAgaWQ9InBhdGgxLTgtMS05IgogICAgICAgY3g9IjEyMCIKICAgICAgIGN5PSIyOCIKICAgICAgIHJ4PSIyNCIKICAgICAgIHJ5PSIyMCIgLz48ZWxsaXBzZQogICAgICAgc3R5bGU9ImZpbGw6IzNlY2M1ZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6OC4zODIxNTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiCiAgICAgICBpZD0icGF0aDEtOC0xLTciCiAgICAgICBjeD0iODgiCiAgICAgICBjeT0iMjAiCiAgICAgICByeD0iMjQiCiAgICAgICByeT0iMjAiIC8+PHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMzZWNjNWY7c3Ryb2tlLXdpZHRoOjguMjMxNTM7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDEwOC4xMTU3Nyw4NC4xMTU3NjUgYyAwLjkxMjc4LDg5Ljk3ODY5NSAyMi4zOTExOSw4NC43NTA2OTUgMjIuNjg1MzUsODQuNjYyODc1IgogICAgICAgaWQ9InBhdGgyLTIiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPjxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojM2VjYzVmO3N0cm9rZS13aWR0aDo4LjIzMTUzO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSA2Ny44ODQyMyw4NC4xMTU3NjUgQyA2Ni45NzE0NSwxNzQuMDk0NDYgNDUuNDkzMDQsMTY4Ljg2NjQ2IDQ1LjE5ODg4LDE2OC43Nzg2NCIKICAgICAgIGlkPSJwYXRoMi0yLTYiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPjwvZz48L3N2Zz4K" width="176" height="180" class="img_ev3q"></p>
<p>A compilação de uma linguagem envolve diversas etapas. Uma delas envolve gerar uma <a href="https://en.wikipedia.org/wiki/Abstract_syntax_tree" target="_blank" rel="noopener noreferrer">árvore sintática abstrata</a>, uma árvore que garante que os objetos estão ligados corretamente.</p>
<p>Podemos usar este conhecimento para compilar parcialmente o código do usuário. Por exemplo, o seguinte código:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> x </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;_id&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;_id&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;code&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;code&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Gera uma árvore com a seguinte raiz:</p>
<p><img loading="lazy" alt="Simples AST" src="/pt-br/assets/images/ast_example-3d33817e8f2457ede47f8ad972a1a7f4.svg" width="384" height="180" class="img_ev3q"></p>
<blockquote>
<p>Note que eu só mostrei o início da árvore pois todo o resto é irrelevante para nós.<br>
<!-- -->Não vamos alterar nada que esteja a fundo do código do usuário, apenas na raiz.</p>
</blockquote>
<p>Com esse conhecimento em mão, podemos finalmente alterar o código do usuário!</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Utilizei um módulo do próprio Python chamado <a href="https://docs.python.org/3/library/ast.html#module-ast" target="_blank" rel="noopener noreferrer">ast</a> para analisar e reestruturar a AST.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="rewriting-code">Rewriting code<a href="#rewriting-code" class="hash-link" aria-label="Link direto para Rewriting code" title="Link direto para Rewriting code">​</a></h2>
<p>Vamos criar um código inútil apenas para usar como exemplo:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># User code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">doc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">find_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">update_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;valid&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>A idéia é transformar este código em uma função que o shell poderá chamar e receber de volta o valor da última expressão. Em outras palavras, queremos isto:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">code</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># User code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    doc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">find_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">update_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;valid&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Vamos ao passo a passo de como obter isto:</p>
<ol>
<li>Análisar o código do usuário com AST</li>
<li>Inserir o conteúdo do módulo dentro de uma função pré montada</li>
<li>Encapsular a última expressão em um <code>return</code>
<ul>
<li>Apenas fazer isto se for uma expressão que retorna valor</li>
</ul>
</li>
</ol>
<p>O video seguinte demonstra a transformação que está sendo feita de certa forma.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/F2In19FGfxg?si=zNhw4kjCnjwPBRJg" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Link direto para Conclusion" title="Link direto para Conclusion">​</a></h2>
<p>Com isto eu consegui preparar justamente uma interface gráfica para o Mongo em Godot. Esse foi meu projeto de 2021!</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/OlV9N12_UxE?si=bmihRtrP3vznuQo5" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<hr>
<p>Em 2023 eu decidi dar uma refatorada e criei uma segunda versão. Mas toda essa base vista do Mondot ainda é a mesma!</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/laGAwJniaUc?si=rtEg3tyhduiRbFh-" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<hr>
<p>Agora já estou cansado de falar deste projeto hahahaha, foi bom enquanto durou.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Link direto para References" title="Link direto para References">​</a></h2>
<ul>
<li><a href="https://blog.robomongo.org/robomongo-has-been-acquired-by-3t/" target="_blank" rel="noopener noreferrer">Robomongo adquirido pelo 3T</a></li>
<li><a href="https://blog.robomongo.org/mongodb-shell-integration/" target="_blank" rel="noopener noreferrer">Robomongo e integração com shell</a></li>
<li><a href="https://github.com/Studio3T/robomongo-shell" target="_blank" rel="noopener noreferrer">robomongo-shell</a></li>
<li><a href="https://github.com/Studio3T/robomongo" target="_blank" rel="noopener noreferrer">robomongo</a></li>
<li><a href="https://github.com/mongodb/mongo" target="_blank" rel="noopener noreferrer">Mongo</a></li>
<li><a href="https://www.mongodb.com/docs/v4.4/mongo/" target="_blank" rel="noopener noreferrer">Mongo shell docs</a></li>
<li><a href="https://en.wikipedia.org/wiki/Abstract_syntax_tree" target="_blank" rel="noopener noreferrer">AST</a></li>
<li><a href="https://docs.python.org/3/library/ast.html" target="_blank" rel="noopener noreferrer">Python AST</a></li>
</ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Marcadores:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pt-br/blog/tags/mongo">mongo</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pt-br/blog/tags/mongodb">mongodb</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pt-br/blog/tags/gui">gui</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pt-br/blog/tags/godot">godot</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pt-br/blog/tags/python">python</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/pt-br/blog/tags/gdscript">gdscript</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Navegação da página de listagem do blog"></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Thiago Lages de Alencar, Built with Docusaurus</div></div></div></footer></div>
</body>
</html>